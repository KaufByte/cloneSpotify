function bN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function RN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Kr(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var hS={exports:{}},af={},fS={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sc=Symbol.for("react.element"),CN=Symbol.for("react.portal"),kN=Symbol.for("react.fragment"),xN=Symbol.for("react.strict_mode"),NN=Symbol.for("react.profiler"),ON=Symbol.for("react.provider"),DN=Symbol.for("react.context"),VN=Symbol.for("react.forward_ref"),MN=Symbol.for("react.suspense"),LN=Symbol.for("react.memo"),FN=Symbol.for("react.lazy"),uI=Symbol.iterator;function jN(t){return t===null||typeof t!="object"?null:(t=uI&&t[uI]||t["@@iterator"],typeof t=="function"?t:null)}var pS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mS=Object.assign,gS={};function xa(t,e,n){this.props=t,this.context=e,this.refs=gS,this.updater=n||pS}xa.prototype.isReactComponent={};xa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yS(){}yS.prototype=xa.prototype;function e_(t,e,n){this.props=t,this.context=e,this.refs=gS,this.updater=n||pS}var t_=e_.prototype=new yS;t_.constructor=e_;mS(t_,xa.prototype);t_.isPureReactComponent=!0;var cI=Array.isArray,_S=Object.prototype.hasOwnProperty,n_={current:null},vS={key:!0,ref:!0,__self:!0,__source:!0};function wS(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)_S.call(e,r)&&!vS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:sc,type:t,key:s,ref:o,props:i,_owner:n_.current}}function UN(t,e){return{$$typeof:sc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function r_(t){return typeof t=="object"&&t!==null&&t.$$typeof===sc}function $N(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var dI=/\/+/g;function am(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$N(""+t.key):e.toString(36)}function Ad(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case sc:case CN:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+am(o,0):r,cI(i)?(n="",t!=null&&(n=t.replace(dI,"$&/")+"/"),Ad(i,e,n,"",function(c){return c})):i!=null&&(r_(i)&&(i=UN(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(dI,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",cI(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+am(s,a);o+=Ad(s,e,n,l,i)}else if(l=jN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+am(s,a++),o+=Ad(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ed(t,e,n){if(t==null)return t;var r=[],i=0;return Ad(t,r,"","",function(s){return e.call(n,s,i++)}),r}function BN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ht={current:null},bd={transition:null},zN={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:bd,ReactCurrentOwner:n_};function IS(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:ed,forEach:function(t,e,n){ed(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ed(t,function(){e++}),e},toArray:function(t){return ed(t,function(e){return e})||[]},only:function(t){if(!r_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=xa;ie.Fragment=kN;ie.Profiler=NN;ie.PureComponent=e_;ie.StrictMode=xN;ie.Suspense=MN;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zN;ie.act=IS;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=mS({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=n_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)_S.call(e,l)&&!vS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:sc,type:t.type,key:i,ref:s,props:r,_owner:o}};ie.createContext=function(t){return t={$$typeof:DN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ON,_context:t},t.Consumer=t};ie.createElement=wS;ie.createFactory=function(t){var e=wS.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:VN,render:t}};ie.isValidElement=r_;ie.lazy=function(t){return{$$typeof:FN,_payload:{_status:-1,_result:t},_init:BN}};ie.memo=function(t,e){return{$$typeof:LN,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=bd.transition;bd.transition={};try{t()}finally{bd.transition=e}};ie.unstable_act=IS;ie.useCallback=function(t,e){return Ht.current.useCallback(t,e)};ie.useContext=function(t){return Ht.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return Ht.current.useDeferredValue(t)};ie.useEffect=function(t,e){return Ht.current.useEffect(t,e)};ie.useId=function(){return Ht.current.useId()};ie.useImperativeHandle=function(t,e,n){return Ht.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return Ht.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return Ht.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return Ht.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return Ht.current.useReducer(t,e,n)};ie.useRef=function(t){return Ht.current.useRef(t)};ie.useState=function(t){return Ht.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return Ht.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return Ht.current.useTransition()};ie.version="18.3.1";fS.exports=ie;var M=fS.exports;const Ii=RN(M),nh=bN({__proto__:null,default:Ii},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qN=M,WN=Symbol.for("react.element"),GN=Symbol.for("react.fragment"),KN=Object.prototype.hasOwnProperty,HN=qN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QN={key:!0,ref:!0,__self:!0,__source:!0};function ES(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)KN.call(e,r)&&!QN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:WN,type:t,key:s,ref:o,props:i,_owner:HN.current}}af.Fragment=GN;af.jsx=ES;af.jsxs=ES;hS.exports=af;var O=hS.exports;var TS={exports:{}},vn={},SS={exports:{}},PS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,K){var ee=H.length;H.push(K);e:for(;0<ee;){var ve=ee-1>>>1,we=H[ve];if(0<i(we,K))H[ve]=K,H[ee]=we,ee=ve;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var K=H[0],ee=H.pop();if(ee!==K){H[0]=ee;e:for(var ve=0,we=H.length,Ye=we>>>1;ve<Ye;){var Sr=2*(ve+1)-1,Pr=H[Sr],Ar=Sr+1,Xn=H[Ar];if(0>i(Pr,ee))Ar<we&&0>i(Xn,Pr)?(H[ve]=Xn,H[Ar]=ee,ve=Ar):(H[ve]=Pr,H[Sr]=ee,ve=Sr);else if(Ar<we&&0>i(Xn,ee))H[ve]=Xn,H[Ar]=ee,ve=Ar;else break e}}return K}function i(H,K){var ee=H.sortIndex-K.sortIndex;return ee!==0?ee:H.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,g=!1,w=!1,v=!1,A=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(H){for(var K=n(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=H)r(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(c)}}function k(H){if(v=!1,T(H),!w)if(n(l)!==null)w=!0,Jn(V);else{var K=n(c);K!==null&&En(k,K.startTime-H)}}function V(H,K){w=!1,v&&(v=!1,I(E),E=-1),g=!0;var ee=p;try{for(T(K),h=n(l);h!==null&&(!(h.expirationTime>K)||H&&!C());){var ve=h.callback;if(typeof ve=="function"){h.callback=null,p=h.priorityLevel;var we=ve(h.expirationTime<=K);K=t.unstable_now(),typeof we=="function"?h.callback=we:h===n(l)&&r(l),T(K)}else r(l);h=n(l)}if(h!==null)var Ye=!0;else{var Sr=n(c);Sr!==null&&En(k,Sr.startTime-K),Ye=!1}return Ye}finally{h=null,p=ee,g=!1}}var j=!1,S=null,E=-1,P=5,b=-1;function C(){return!(t.unstable_now()-b<P)}function x(){if(S!==null){var H=t.unstable_now();b=H;var K=!0;try{K=S(!0,H)}finally{K?R():(j=!1,S=null)}}else j=!1}var R;if(typeof y=="function")R=function(){y(x)};else if(typeof MessageChannel<"u"){var at=new MessageChannel,Fn=at.port2;at.port1.onmessage=x,R=function(){Fn.postMessage(null)}}else R=function(){A(x,0)};function Jn(H){S=H,j||(j=!0,R())}function En(H,K){E=A(function(){H(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,Jn(V))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var ee=p;p=K;try{return H()}finally{p=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,K){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ee=p;p=H;try{return K()}finally{p=ee}},t.unstable_scheduleCallback=function(H,K,ee){var ve=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ve+ee:ve):ee=ve,H){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=ee+we,H={id:d++,callback:K,priorityLevel:H,startTime:ee,expirationTime:we,sortIndex:-1},ee>ve?(H.sortIndex=ee,e(c,H),n(l)===null&&H===n(c)&&(v?(I(E),E=-1):v=!0,En(k,ee-ve))):(H.sortIndex=we,e(l,H),w||g||(w=!0,Jn(V))),H},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(H){var K=p;return function(){var ee=p;p=K;try{return H.apply(this,arguments)}finally{p=ee}}}})(PS);SS.exports=PS;var YN=SS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JN=M,gn=YN;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var AS=new Set,uu={};function Js(t,e){sa(t,e),sa(t+"Capture",e)}function sa(t,e){for(uu[t]=e,t=0;t<e.length;t++)AS.add(e[t])}var Fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ug=Object.prototype.hasOwnProperty,XN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hI={},fI={};function ZN(t){return ug.call(fI,t)?!0:ug.call(hI,t)?!1:XN.test(t)?fI[t]=!0:(hI[t]=!0,!1)}function eO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tO(t,e,n,r){if(e===null||typeof e>"u"||eO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var At={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){At[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];At[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){At[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){At[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){At[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){At[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){At[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){At[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){At[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var i_=/[\-:]([a-z])/g;function s_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(i_,s_);At[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(i_,s_);At[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(i_,s_);At[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){At[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});At.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){At[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function o_(t,e,n,r){var i=At.hasOwnProperty(e)?At[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tO(e,n,i,r)&&(n=null),r||i===null?ZN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Hr=JN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,td=Symbol.for("react.element"),bo=Symbol.for("react.portal"),Ro=Symbol.for("react.fragment"),a_=Symbol.for("react.strict_mode"),cg=Symbol.for("react.profiler"),bS=Symbol.for("react.provider"),RS=Symbol.for("react.context"),l_=Symbol.for("react.forward_ref"),dg=Symbol.for("react.suspense"),hg=Symbol.for("react.suspense_list"),u_=Symbol.for("react.memo"),li=Symbol.for("react.lazy"),CS=Symbol.for("react.offscreen"),pI=Symbol.iterator;function fl(t){return t===null||typeof t!="object"?null:(t=pI&&t[pI]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,lm;function xl(t){if(lm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lm=e&&e[1]||""}return`
`+lm+t}var um=!1;function cm(t,e){if(!t||um)return"";um=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{um=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xl(t):""}function nO(t){switch(t.tag){case 5:return xl(t.type);case 16:return xl("Lazy");case 13:return xl("Suspense");case 19:return xl("SuspenseList");case 0:case 2:case 15:return t=cm(t.type,!1),t;case 11:return t=cm(t.type.render,!1),t;case 1:return t=cm(t.type,!0),t;default:return""}}function fg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ro:return"Fragment";case bo:return"Portal";case cg:return"Profiler";case a_:return"StrictMode";case dg:return"Suspense";case hg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case RS:return(t.displayName||"Context")+".Consumer";case bS:return(t._context.displayName||"Context")+".Provider";case l_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case u_:return e=t.displayName||null,e!==null?e:fg(t.type)||"Memo";case li:e=t._payload,t=t._init;try{return fg(t(e))}catch{}}return null}function rO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fg(e);case 8:return e===a_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Oi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iO(t){var e=kS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nd(t){t._valueTracker||(t._valueTracker=iO(t))}function xS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=kS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function rh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pg(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function mI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Oi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function NS(t,e){e=e.checked,e!=null&&o_(t,"checked",e,!1)}function mg(t,e){NS(t,e);var n=Oi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gg(t,e.type,n):e.hasOwnProperty("defaultValue")&&gg(t,e.type,Oi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function gI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function gg(t,e,n){(e!=="number"||rh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Nl=Array.isArray;function $o(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Oi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function yg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Nl(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Oi(n)}}function OS(t,e){var n=Oi(e.value),r=Oi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function _I(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function DS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _g(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?DS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rd,VS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rd=rd||document.createElement("div"),rd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ql={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sO=["Webkit","ms","Moz","O"];Object.keys(ql).forEach(function(t){sO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ql[e]=ql[t]})});function MS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ql.hasOwnProperty(t)&&ql[t]?(""+e).trim():e+"px"}function LS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=MS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var oO=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vg(t,e){if(e){if(oO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function wg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ig=null;function c_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Eg=null,Bo=null,zo=null;function vI(t){if(t=lc(t)){if(typeof Eg!="function")throw Error(B(280));var e=t.stateNode;e&&(e=hf(e),Eg(t.stateNode,t.type,e))}}function FS(t){Bo?zo?zo.push(t):zo=[t]:Bo=t}function jS(){if(Bo){var t=Bo,e=zo;if(zo=Bo=null,vI(t),e)for(t=0;t<e.length;t++)vI(e[t])}}function US(t,e){return t(e)}function $S(){}var dm=!1;function BS(t,e,n){if(dm)return t(e,n);dm=!0;try{return US(t,e,n)}finally{dm=!1,(Bo!==null||zo!==null)&&($S(),jS())}}function du(t,e){var n=t.stateNode;if(n===null)return null;var r=hf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Tg=!1;if(Fr)try{var pl={};Object.defineProperty(pl,"passive",{get:function(){Tg=!0}}),window.addEventListener("test",pl,pl),window.removeEventListener("test",pl,pl)}catch{Tg=!1}function aO(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Wl=!1,ih=null,sh=!1,Sg=null,lO={onError:function(t){Wl=!0,ih=t}};function uO(t,e,n,r,i,s,o,a,l){Wl=!1,ih=null,aO.apply(lO,arguments)}function cO(t,e,n,r,i,s,o,a,l){if(uO.apply(this,arguments),Wl){if(Wl){var c=ih;Wl=!1,ih=null}else throw Error(B(198));sh||(sh=!0,Sg=c)}}function Xs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function wI(t){if(Xs(t)!==t)throw Error(B(188))}function dO(t){var e=t.alternate;if(!e){if(e=Xs(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return wI(i),t;if(s===r)return wI(i),e;s=s.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function qS(t){return t=dO(t),t!==null?WS(t):null}function WS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=WS(t);if(e!==null)return e;t=t.sibling}return null}var GS=gn.unstable_scheduleCallback,II=gn.unstable_cancelCallback,hO=gn.unstable_shouldYield,fO=gn.unstable_requestPaint,Je=gn.unstable_now,pO=gn.unstable_getCurrentPriorityLevel,d_=gn.unstable_ImmediatePriority,KS=gn.unstable_UserBlockingPriority,oh=gn.unstable_NormalPriority,mO=gn.unstable_LowPriority,HS=gn.unstable_IdlePriority,lf=null,dr=null;function gO(t){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(lf,t,void 0,(t.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:vO,yO=Math.log,_O=Math.LN2;function vO(t){return t>>>=0,t===0?32:31-(yO(t)/_O|0)|0}var id=64,sd=4194304;function Ol(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ah(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ol(a):(s&=o,s!==0&&(r=Ol(s)))}else o=n&~i,o!==0?r=Ol(o):s!==0&&(r=Ol(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wn(e),i=1<<n,r|=t[n],e&=~i;return r}function wO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Wn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=wO(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Pg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function QS(){var t=id;return id<<=1,!(id&4194240)&&(id=64),t}function hm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function oc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wn(e),t[e]=n}function EO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Wn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function h_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var me=0;function YS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var JS,f_,XS,ZS,eP,Ag=!1,od=[],Ei=null,Ti=null,Si=null,hu=new Map,fu=new Map,ci=[],TO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function EI(t,e){switch(t){case"focusin":case"focusout":Ei=null;break;case"dragenter":case"dragleave":Ti=null;break;case"mouseover":case"mouseout":Si=null;break;case"pointerover":case"pointerout":hu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fu.delete(e.pointerId)}}function ml(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=lc(e),e!==null&&f_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function SO(t,e,n,r,i){switch(e){case"focusin":return Ei=ml(Ei,t,e,n,r,i),!0;case"dragenter":return Ti=ml(Ti,t,e,n,r,i),!0;case"mouseover":return Si=ml(Si,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return hu.set(s,ml(hu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,fu.set(s,ml(fu.get(s)||null,t,e,n,r,i)),!0}return!1}function tP(t){var e=ws(t.target);if(e!==null){var n=Xs(e);if(n!==null){if(e=n.tag,e===13){if(e=zS(n),e!==null){t.blockedOn=e,eP(t.priority,function(){XS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ig=r,n.target.dispatchEvent(r),Ig=null}else return e=lc(n),e!==null&&f_(e),t.blockedOn=n,!1;e.shift()}return!0}function TI(t,e,n){Rd(t)&&n.delete(e)}function PO(){Ag=!1,Ei!==null&&Rd(Ei)&&(Ei=null),Ti!==null&&Rd(Ti)&&(Ti=null),Si!==null&&Rd(Si)&&(Si=null),hu.forEach(TI),fu.forEach(TI)}function gl(t,e){t.blockedOn===e&&(t.blockedOn=null,Ag||(Ag=!0,gn.unstable_scheduleCallback(gn.unstable_NormalPriority,PO)))}function pu(t){function e(i){return gl(i,t)}if(0<od.length){gl(od[0],t);for(var n=1;n<od.length;n++){var r=od[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ei!==null&&gl(Ei,t),Ti!==null&&gl(Ti,t),Si!==null&&gl(Si,t),hu.forEach(e),fu.forEach(e),n=0;n<ci.length;n++)r=ci[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ci.length&&(n=ci[0],n.blockedOn===null);)tP(n),n.blockedOn===null&&ci.shift()}var qo=Hr.ReactCurrentBatchConfig,lh=!0;function AO(t,e,n,r){var i=me,s=qo.transition;qo.transition=null;try{me=1,p_(t,e,n,r)}finally{me=i,qo.transition=s}}function bO(t,e,n,r){var i=me,s=qo.transition;qo.transition=null;try{me=4,p_(t,e,n,r)}finally{me=i,qo.transition=s}}function p_(t,e,n,r){if(lh){var i=bg(t,e,n,r);if(i===null)Em(t,e,r,uh,n),EI(t,r);else if(SO(i,t,e,n,r))r.stopPropagation();else if(EI(t,r),e&4&&-1<TO.indexOf(t)){for(;i!==null;){var s=lc(i);if(s!==null&&JS(s),s=bg(t,e,n,r),s===null&&Em(t,e,r,uh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Em(t,e,r,null,n)}}var uh=null;function bg(t,e,n,r){if(uh=null,t=c_(r),t=ws(t),t!==null)if(e=Xs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return uh=t,null}function nP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pO()){case d_:return 1;case KS:return 4;case oh:case mO:return 16;case HS:return 536870912;default:return 16}default:return 16}}var gi=null,m_=null,Cd=null;function rP(){if(Cd)return Cd;var t,e=m_,n=e.length,r,i="value"in gi?gi.value:gi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Cd=i.slice(t,1<r?1-r:void 0)}function kd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ad(){return!0}function SI(){return!1}function wn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ad:SI,this.isPropagationStopped=SI,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ad)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ad)},persist:function(){},isPersistent:ad}),e}var Na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},g_=wn(Na),ac=Fe({},Na,{view:0,detail:0}),RO=wn(ac),fm,pm,yl,uf=Fe({},ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:y_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yl&&(yl&&t.type==="mousemove"?(fm=t.screenX-yl.screenX,pm=t.screenY-yl.screenY):pm=fm=0,yl=t),fm)},movementY:function(t){return"movementY"in t?t.movementY:pm}}),PI=wn(uf),CO=Fe({},uf,{dataTransfer:0}),kO=wn(CO),xO=Fe({},ac,{relatedTarget:0}),mm=wn(xO),NO=Fe({},Na,{animationName:0,elapsedTime:0,pseudoElement:0}),OO=wn(NO),DO=Fe({},Na,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VO=wn(DO),MO=Fe({},Na,{data:0}),AI=wn(MO),LO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jO[t])?!!e[t]:!1}function y_(){return UO}var $O=Fe({},ac,{key:function(t){if(t.key){var e=LO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=kd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:y_,charCode:function(t){return t.type==="keypress"?kd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?kd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),BO=wn($O),zO=Fe({},uf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bI=wn(zO),qO=Fe({},ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:y_}),WO=wn(qO),GO=Fe({},Na,{propertyName:0,elapsedTime:0,pseudoElement:0}),KO=wn(GO),HO=Fe({},uf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),QO=wn(HO),YO=[9,13,27,32],__=Fr&&"CompositionEvent"in window,Gl=null;Fr&&"documentMode"in document&&(Gl=document.documentMode);var JO=Fr&&"TextEvent"in window&&!Gl,iP=Fr&&(!__||Gl&&8<Gl&&11>=Gl),RI=String.fromCharCode(32),CI=!1;function sP(t,e){switch(t){case"keyup":return YO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Co=!1;function XO(t,e){switch(t){case"compositionend":return oP(e);case"keypress":return e.which!==32?null:(CI=!0,RI);case"textInput":return t=e.data,t===RI&&CI?null:t;default:return null}}function ZO(t,e){if(Co)return t==="compositionend"||!__&&sP(t,e)?(t=rP(),Cd=m_=gi=null,Co=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iP&&e.locale!=="ko"?null:e.data;default:return null}}var e2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!e2[t.type]:e==="textarea"}function aP(t,e,n,r){FS(r),e=ch(e,"onChange"),0<e.length&&(n=new g_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Kl=null,mu=null;function t2(t){_P(t,0)}function cf(t){var e=No(t);if(xS(e))return t}function n2(t,e){if(t==="change")return e}var lP=!1;if(Fr){var gm;if(Fr){var ym="oninput"in document;if(!ym){var xI=document.createElement("div");xI.setAttribute("oninput","return;"),ym=typeof xI.oninput=="function"}gm=ym}else gm=!1;lP=gm&&(!document.documentMode||9<document.documentMode)}function NI(){Kl&&(Kl.detachEvent("onpropertychange",uP),mu=Kl=null)}function uP(t){if(t.propertyName==="value"&&cf(mu)){var e=[];aP(e,mu,t,c_(t)),BS(t2,e)}}function r2(t,e,n){t==="focusin"?(NI(),Kl=e,mu=n,Kl.attachEvent("onpropertychange",uP)):t==="focusout"&&NI()}function i2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cf(mu)}function s2(t,e){if(t==="click")return cf(e)}function o2(t,e){if(t==="input"||t==="change")return cf(e)}function a2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hn=typeof Object.is=="function"?Object.is:a2;function gu(t,e){if(Hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ug.call(e,i)||!Hn(t[i],e[i]))return!1}return!0}function OI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function DI(t,e){var n=OI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=OI(n)}}function cP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dP(){for(var t=window,e=rh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=rh(t.document)}return e}function v_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function l2(t){var e=dP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cP(n.ownerDocument.documentElement,n)){if(r!==null&&v_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=DI(n,s);var o=DI(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var u2=Fr&&"documentMode"in document&&11>=document.documentMode,ko=null,Rg=null,Hl=null,Cg=!1;function VI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cg||ko==null||ko!==rh(r)||(r=ko,"selectionStart"in r&&v_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hl&&gu(Hl,r)||(Hl=r,r=ch(Rg,"onSelect"),0<r.length&&(e=new g_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ko)))}function ld(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xo={animationend:ld("Animation","AnimationEnd"),animationiteration:ld("Animation","AnimationIteration"),animationstart:ld("Animation","AnimationStart"),transitionend:ld("Transition","TransitionEnd")},_m={},hP={};Fr&&(hP=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function df(t){if(_m[t])return _m[t];if(!xo[t])return t;var e=xo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hP)return _m[t]=e[n];return t}var fP=df("animationend"),pP=df("animationiteration"),mP=df("animationstart"),gP=df("transitionend"),yP=new Map,MI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ki(t,e){yP.set(t,e),Js(e,[t])}for(var vm=0;vm<MI.length;vm++){var wm=MI[vm],c2=wm.toLowerCase(),d2=wm[0].toUpperCase()+wm.slice(1);Ki(c2,"on"+d2)}Ki(fP,"onAnimationEnd");Ki(pP,"onAnimationIteration");Ki(mP,"onAnimationStart");Ki("dblclick","onDoubleClick");Ki("focusin","onFocus");Ki("focusout","onBlur");Ki(gP,"onTransitionEnd");sa("onMouseEnter",["mouseout","mouseover"]);sa("onMouseLeave",["mouseout","mouseover"]);sa("onPointerEnter",["pointerout","pointerover"]);sa("onPointerLeave",["pointerout","pointerover"]);Js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Js("onBeforeInput",["compositionend","keypress","textInput","paste"]);Js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dl));function LI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,cO(r,e,void 0,t),t.currentTarget=null}function _P(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;LI(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;LI(i,a,c),s=l}}}if(sh)throw t=Sg,sh=!1,Sg=null,t}function Pe(t,e){var n=e[Dg];n===void 0&&(n=e[Dg]=new Set);var r=t+"__bubble";n.has(r)||(vP(e,t,2,!1),n.add(r))}function Im(t,e,n){var r=0;e&&(r|=4),vP(n,t,r,e)}var ud="_reactListening"+Math.random().toString(36).slice(2);function yu(t){if(!t[ud]){t[ud]=!0,AS.forEach(function(n){n!=="selectionchange"&&(h2.has(n)||Im(n,!1,t),Im(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ud]||(e[ud]=!0,Im("selectionchange",!1,e))}}function vP(t,e,n,r){switch(nP(e)){case 1:var i=AO;break;case 4:i=bO;break;default:i=p_}n=i.bind(null,e,n,t),i=void 0,!Tg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Em(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ws(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}BS(function(){var c=s,d=c_(n),h=[];e:{var p=yP.get(t);if(p!==void 0){var g=g_,w=t;switch(t){case"keypress":if(kd(n)===0)break e;case"keydown":case"keyup":g=BO;break;case"focusin":w="focus",g=mm;break;case"focusout":w="blur",g=mm;break;case"beforeblur":case"afterblur":g=mm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=PI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=kO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=WO;break;case fP:case pP:case mP:g=OO;break;case gP:g=KO;break;case"scroll":g=RO;break;case"wheel":g=QO;break;case"copy":case"cut":case"paste":g=VO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=bI}var v=(e&4)!==0,A=!v&&t==="scroll",I=v?p!==null?p+"Capture":null:p;v=[];for(var y=c,T;y!==null;){T=y;var k=T.stateNode;if(T.tag===5&&k!==null&&(T=k,I!==null&&(k=du(y,I),k!=null&&v.push(_u(y,k,T)))),A)break;y=y.return}0<v.length&&(p=new g(p,w,null,n,d),h.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Ig&&(w=n.relatedTarget||n.fromElement)&&(ws(w)||w[jr]))break e;if((g||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=c,w=w?ws(w):null,w!==null&&(A=Xs(w),w!==A||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=c),g!==w)){if(v=PI,k="onMouseLeave",I="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=bI,k="onPointerLeave",I="onPointerEnter",y="pointer"),A=g==null?p:No(g),T=w==null?p:No(w),p=new v(k,y+"leave",g,n,d),p.target=A,p.relatedTarget=T,k=null,ws(d)===c&&(v=new v(I,y+"enter",w,n,d),v.target=T,v.relatedTarget=A,k=v),A=k,g&&w)t:{for(v=g,I=w,y=0,T=v;T;T=co(T))y++;for(T=0,k=I;k;k=co(k))T++;for(;0<y-T;)v=co(v),y--;for(;0<T-y;)I=co(I),T--;for(;y--;){if(v===I||I!==null&&v===I.alternate)break t;v=co(v),I=co(I)}v=null}else v=null;g!==null&&FI(h,p,g,v,!1),w!==null&&A!==null&&FI(h,A,w,v,!0)}}e:{if(p=c?No(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var V=n2;else if(kI(p))if(lP)V=o2;else{V=i2;var j=r2}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(V=s2);if(V&&(V=V(t,c))){aP(h,V,n,d);break e}j&&j(t,p,c),t==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&gg(p,"number",p.value)}switch(j=c?No(c):window,t){case"focusin":(kI(j)||j.contentEditable==="true")&&(ko=j,Rg=c,Hl=null);break;case"focusout":Hl=Rg=ko=null;break;case"mousedown":Cg=!0;break;case"contextmenu":case"mouseup":case"dragend":Cg=!1,VI(h,n,d);break;case"selectionchange":if(u2)break;case"keydown":case"keyup":VI(h,n,d)}var S;if(__)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Co?sP(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(iP&&n.locale!=="ko"&&(Co||E!=="onCompositionStart"?E==="onCompositionEnd"&&Co&&(S=rP()):(gi=d,m_="value"in gi?gi.value:gi.textContent,Co=!0)),j=ch(c,E),0<j.length&&(E=new AI(E,t,null,n,d),h.push({event:E,listeners:j}),S?E.data=S:(S=oP(n),S!==null&&(E.data=S)))),(S=JO?XO(t,n):ZO(t,n))&&(c=ch(c,"onBeforeInput"),0<c.length&&(d=new AI("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=S))}_P(h,e)})}function _u(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ch(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=du(t,n),s!=null&&r.unshift(_u(t,s,i)),s=du(t,e),s!=null&&r.push(_u(t,s,i))),t=t.return}return r}function co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function FI(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=du(n,s),l!=null&&o.unshift(_u(n,l,a))):i||(l=du(n,s),l!=null&&o.push(_u(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var f2=/\r\n?/g,p2=/\u0000|\uFFFD/g;function jI(t){return(typeof t=="string"?t:""+t).replace(f2,`
`).replace(p2,"")}function cd(t,e,n){if(e=jI(e),jI(t)!==e&&n)throw Error(B(425))}function dh(){}var kg=null,xg=null;function Ng(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Og=typeof setTimeout=="function"?setTimeout:void 0,m2=typeof clearTimeout=="function"?clearTimeout:void 0,UI=typeof Promise=="function"?Promise:void 0,g2=typeof queueMicrotask=="function"?queueMicrotask:typeof UI<"u"?function(t){return UI.resolve(null).then(t).catch(y2)}:Og;function y2(t){setTimeout(function(){throw t})}function Tm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),pu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);pu(e)}function Pi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $I(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Oa=Math.random().toString(36).slice(2),rr="__reactFiber$"+Oa,vu="__reactProps$"+Oa,jr="__reactContainer$"+Oa,Dg="__reactEvents$"+Oa,_2="__reactListeners$"+Oa,v2="__reactHandles$"+Oa;function ws(t){var e=t[rr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jr]||n[rr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$I(t);t!==null;){if(n=t[rr])return n;t=$I(t)}return e}t=n,n=t.parentNode}return null}function lc(t){return t=t[rr]||t[jr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function No(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function hf(t){return t[vu]||null}var Vg=[],Oo=-1;function Hi(t){return{current:t}}function be(t){0>Oo||(t.current=Vg[Oo],Vg[Oo]=null,Oo--)}function Ee(t,e){Oo++,Vg[Oo]=t.current,t.current=e}var Di={},Lt=Hi(Di),rn=Hi(!1),xs=Di;function oa(t,e){var n=t.type.contextTypes;if(!n)return Di;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function sn(t){return t=t.childContextTypes,t!=null}function hh(){be(rn),be(Lt)}function BI(t,e,n){if(Lt.current!==Di)throw Error(B(168));Ee(Lt,e),Ee(rn,n)}function wP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(B(108,rO(t)||"Unknown",i));return Fe({},n,r)}function fh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Di,xs=Lt.current,Ee(Lt,t),Ee(rn,rn.current),!0}function zI(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=wP(t,e,xs),r.__reactInternalMemoizedMergedChildContext=t,be(rn),be(Lt),Ee(Lt,t)):be(rn),Ee(rn,n)}var kr=null,ff=!1,Sm=!1;function IP(t){kr===null?kr=[t]:kr.push(t)}function w2(t){ff=!0,IP(t)}function Qi(){if(!Sm&&kr!==null){Sm=!0;var t=0,e=me;try{var n=kr;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}kr=null,ff=!1}catch(i){throw kr!==null&&(kr=kr.slice(t+1)),GS(d_,Qi),i}finally{me=e,Sm=!1}}return null}var Do=[],Vo=0,ph=null,mh=0,Sn=[],Pn=0,Ns=null,xr=1,Nr="";function cs(t,e){Do[Vo++]=mh,Do[Vo++]=ph,ph=t,mh=e}function EP(t,e,n){Sn[Pn++]=xr,Sn[Pn++]=Nr,Sn[Pn++]=Ns,Ns=t;var r=xr;t=Nr;var i=32-Wn(r)-1;r&=~(1<<i),n+=1;var s=32-Wn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,xr=1<<32-Wn(e)+i|n<<i|r,Nr=s+t}else xr=1<<s|n<<i|r,Nr=t}function w_(t){t.return!==null&&(cs(t,1),EP(t,1,0))}function I_(t){for(;t===ph;)ph=Do[--Vo],Do[Vo]=null,mh=Do[--Vo],Do[Vo]=null;for(;t===Ns;)Ns=Sn[--Pn],Sn[Pn]=null,Nr=Sn[--Pn],Sn[Pn]=null,xr=Sn[--Pn],Sn[Pn]=null}var pn=null,hn=null,xe=!1,zn=null;function TP(t,e){var n=bn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function qI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,pn=t,hn=Pi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,pn=t,hn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ns!==null?{id:xr,overflow:Nr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,pn=t,hn=null,!0):!1;default:return!1}}function Mg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Lg(t){if(xe){var e=hn;if(e){var n=e;if(!qI(t,e)){if(Mg(t))throw Error(B(418));e=Pi(n.nextSibling);var r=pn;e&&qI(t,e)?TP(r,n):(t.flags=t.flags&-4097|2,xe=!1,pn=t)}}else{if(Mg(t))throw Error(B(418));t.flags=t.flags&-4097|2,xe=!1,pn=t}}}function WI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pn=t}function dd(t){if(t!==pn)return!1;if(!xe)return WI(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ng(t.type,t.memoizedProps)),e&&(e=hn)){if(Mg(t))throw SP(),Error(B(418));for(;e;)TP(t,e),e=Pi(e.nextSibling)}if(WI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){hn=Pi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}hn=null}}else hn=pn?Pi(t.stateNode.nextSibling):null;return!0}function SP(){for(var t=hn;t;)t=Pi(t.nextSibling)}function aa(){hn=pn=null,xe=!1}function E_(t){zn===null?zn=[t]:zn.push(t)}var I2=Hr.ReactCurrentBatchConfig;function _l(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function hd(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function GI(t){var e=t._init;return e(t._payload)}function PP(t){function e(I,y){if(t){var T=I.deletions;T===null?(I.deletions=[y],I.flags|=16):T.push(y)}}function n(I,y){if(!t)return null;for(;y!==null;)e(I,y),y=y.sibling;return null}function r(I,y){for(I=new Map;y!==null;)y.key!==null?I.set(y.key,y):I.set(y.index,y),y=y.sibling;return I}function i(I,y){return I=Ci(I,y),I.index=0,I.sibling=null,I}function s(I,y,T){return I.index=T,t?(T=I.alternate,T!==null?(T=T.index,T<y?(I.flags|=2,y):T):(I.flags|=2,y)):(I.flags|=1048576,y)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function a(I,y,T,k){return y===null||y.tag!==6?(y=xm(T,I.mode,k),y.return=I,y):(y=i(y,T),y.return=I,y)}function l(I,y,T,k){var V=T.type;return V===Ro?d(I,y,T.props.children,k,T.key):y!==null&&(y.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===li&&GI(V)===y.type)?(k=i(y,T.props),k.ref=_l(I,y,T),k.return=I,k):(k=Ld(T.type,T.key,T.props,null,I.mode,k),k.ref=_l(I,y,T),k.return=I,k)}function c(I,y,T,k){return y===null||y.tag!==4||y.stateNode.containerInfo!==T.containerInfo||y.stateNode.implementation!==T.implementation?(y=Nm(T,I.mode,k),y.return=I,y):(y=i(y,T.children||[]),y.return=I,y)}function d(I,y,T,k,V){return y===null||y.tag!==7?(y=bs(T,I.mode,k,V),y.return=I,y):(y=i(y,T),y.return=I,y)}function h(I,y,T){if(typeof y=="string"&&y!==""||typeof y=="number")return y=xm(""+y,I.mode,T),y.return=I,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case td:return T=Ld(y.type,y.key,y.props,null,I.mode,T),T.ref=_l(I,null,y),T.return=I,T;case bo:return y=Nm(y,I.mode,T),y.return=I,y;case li:var k=y._init;return h(I,k(y._payload),T)}if(Nl(y)||fl(y))return y=bs(y,I.mode,T,null),y.return=I,y;hd(I,y)}return null}function p(I,y,T,k){var V=y!==null?y.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return V!==null?null:a(I,y,""+T,k);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case td:return T.key===V?l(I,y,T,k):null;case bo:return T.key===V?c(I,y,T,k):null;case li:return V=T._init,p(I,y,V(T._payload),k)}if(Nl(T)||fl(T))return V!==null?null:d(I,y,T,k,null);hd(I,T)}return null}function g(I,y,T,k,V){if(typeof k=="string"&&k!==""||typeof k=="number")return I=I.get(T)||null,a(y,I,""+k,V);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case td:return I=I.get(k.key===null?T:k.key)||null,l(y,I,k,V);case bo:return I=I.get(k.key===null?T:k.key)||null,c(y,I,k,V);case li:var j=k._init;return g(I,y,T,j(k._payload),V)}if(Nl(k)||fl(k))return I=I.get(T)||null,d(y,I,k,V,null);hd(y,k)}return null}function w(I,y,T,k){for(var V=null,j=null,S=y,E=y=0,P=null;S!==null&&E<T.length;E++){S.index>E?(P=S,S=null):P=S.sibling;var b=p(I,S,T[E],k);if(b===null){S===null&&(S=P);break}t&&S&&b.alternate===null&&e(I,S),y=s(b,y,E),j===null?V=b:j.sibling=b,j=b,S=P}if(E===T.length)return n(I,S),xe&&cs(I,E),V;if(S===null){for(;E<T.length;E++)S=h(I,T[E],k),S!==null&&(y=s(S,y,E),j===null?V=S:j.sibling=S,j=S);return xe&&cs(I,E),V}for(S=r(I,S);E<T.length;E++)P=g(S,I,E,T[E],k),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?E:P.key),y=s(P,y,E),j===null?V=P:j.sibling=P,j=P);return t&&S.forEach(function(C){return e(I,C)}),xe&&cs(I,E),V}function v(I,y,T,k){var V=fl(T);if(typeof V!="function")throw Error(B(150));if(T=V.call(T),T==null)throw Error(B(151));for(var j=V=null,S=y,E=y=0,P=null,b=T.next();S!==null&&!b.done;E++,b=T.next()){S.index>E?(P=S,S=null):P=S.sibling;var C=p(I,S,b.value,k);if(C===null){S===null&&(S=P);break}t&&S&&C.alternate===null&&e(I,S),y=s(C,y,E),j===null?V=C:j.sibling=C,j=C,S=P}if(b.done)return n(I,S),xe&&cs(I,E),V;if(S===null){for(;!b.done;E++,b=T.next())b=h(I,b.value,k),b!==null&&(y=s(b,y,E),j===null?V=b:j.sibling=b,j=b);return xe&&cs(I,E),V}for(S=r(I,S);!b.done;E++,b=T.next())b=g(S,I,E,b.value,k),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?E:b.key),y=s(b,y,E),j===null?V=b:j.sibling=b,j=b);return t&&S.forEach(function(x){return e(I,x)}),xe&&cs(I,E),V}function A(I,y,T,k){if(typeof T=="object"&&T!==null&&T.type===Ro&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case td:e:{for(var V=T.key,j=y;j!==null;){if(j.key===V){if(V=T.type,V===Ro){if(j.tag===7){n(I,j.sibling),y=i(j,T.props.children),y.return=I,I=y;break e}}else if(j.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===li&&GI(V)===j.type){n(I,j.sibling),y=i(j,T.props),y.ref=_l(I,j,T),y.return=I,I=y;break e}n(I,j);break}else e(I,j);j=j.sibling}T.type===Ro?(y=bs(T.props.children,I.mode,k,T.key),y.return=I,I=y):(k=Ld(T.type,T.key,T.props,null,I.mode,k),k.ref=_l(I,y,T),k.return=I,I=k)}return o(I);case bo:e:{for(j=T.key;y!==null;){if(y.key===j)if(y.tag===4&&y.stateNode.containerInfo===T.containerInfo&&y.stateNode.implementation===T.implementation){n(I,y.sibling),y=i(y,T.children||[]),y.return=I,I=y;break e}else{n(I,y);break}else e(I,y);y=y.sibling}y=Nm(T,I.mode,k),y.return=I,I=y}return o(I);case li:return j=T._init,A(I,y,j(T._payload),k)}if(Nl(T))return w(I,y,T,k);if(fl(T))return v(I,y,T,k);hd(I,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,y!==null&&y.tag===6?(n(I,y.sibling),y=i(y,T),y.return=I,I=y):(n(I,y),y=xm(T,I.mode,k),y.return=I,I=y),o(I)):n(I,y)}return A}var la=PP(!0),AP=PP(!1),gh=Hi(null),yh=null,Mo=null,T_=null;function S_(){T_=Mo=yh=null}function P_(t){var e=gh.current;be(gh),t._currentValue=e}function Fg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Wo(t,e){yh=t,T_=Mo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zt=!0),t.firstContext=null)}function xn(t){var e=t._currentValue;if(T_!==t)if(t={context:t,memoizedValue:e,next:null},Mo===null){if(yh===null)throw Error(B(308));Mo=t,yh.dependencies={lanes:0,firstContext:t}}else Mo=Mo.next=t;return e}var Is=null;function A_(t){Is===null?Is=[t]:Is.push(t)}function bP(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,A_(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ur(t,r)}function Ur(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ui=!1;function b_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ai(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ur(t,n)}return i=r.interleaved,i===null?(e.next=e,A_(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ur(t,n)}function xd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,h_(t,n)}}function KI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _h(t,e,n,r){var i=t.updateQueue;ui=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,v=a;switch(p=e,g=n,v.tag){case 1:if(w=v.payload,typeof w=="function"){h=w.call(g,h,p);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,p=typeof w=="function"?w.call(g,h,p):w,p==null)break e;h=Fe({},h,p);break e;case 2:ui=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=g,l=h):d=d.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ds|=o,t.lanes=o,t.memoizedState=h}}function HI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var uc={},hr=Hi(uc),wu=Hi(uc),Iu=Hi(uc);function Es(t){if(t===uc)throw Error(B(174));return t}function R_(t,e){switch(Ee(Iu,e),Ee(wu,t),Ee(hr,uc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_g(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_g(e,t)}be(hr),Ee(hr,e)}function ua(){be(hr),be(wu),be(Iu)}function CP(t){Es(Iu.current);var e=Es(hr.current),n=_g(e,t.type);e!==n&&(Ee(wu,t),Ee(hr,n))}function C_(t){wu.current===t&&(be(hr),be(wu))}var Ve=Hi(0);function vh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pm=[];function k_(){for(var t=0;t<Pm.length;t++)Pm[t]._workInProgressVersionPrimary=null;Pm.length=0}var Nd=Hr.ReactCurrentDispatcher,Am=Hr.ReactCurrentBatchConfig,Os=0,Me=null,lt=null,ft=null,wh=!1,Ql=!1,Eu=0,E2=0;function xt(){throw Error(B(321))}function x_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hn(t[n],e[n]))return!1;return!0}function N_(t,e,n,r,i,s){if(Os=s,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nd.current=t===null||t.memoizedState===null?A2:b2,t=n(r,i),Ql){s=0;do{if(Ql=!1,Eu=0,25<=s)throw Error(B(301));s+=1,ft=lt=null,e.updateQueue=null,Nd.current=R2,t=n(r,i)}while(Ql)}if(Nd.current=Ih,e=lt!==null&&lt.next!==null,Os=0,ft=lt=Me=null,wh=!1,e)throw Error(B(300));return t}function O_(){var t=Eu!==0;return Eu=0,t}function er(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Me.memoizedState=ft=t:ft=ft.next=t,ft}function Nn(){if(lt===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var e=ft===null?Me.memoizedState:ft.next;if(e!==null)ft=e,lt=t;else{if(t===null)throw Error(B(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ft===null?Me.memoizedState=ft=t:ft=ft.next=t}return ft}function Tu(t,e){return typeof e=="function"?e(t):e}function bm(t){var e=Nn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=lt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Os&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Me.lanes|=d,Ds|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Hn(r,e.memoizedState)||(Zt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Me.lanes|=s,Ds|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Rm(t){var e=Nn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Hn(s,e.memoizedState)||(Zt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function kP(){}function xP(t,e){var n=Me,r=Nn(),i=e(),s=!Hn(r.memoizedState,i);if(s&&(r.memoizedState=i,Zt=!0),r=r.queue,D_(DP.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ft!==null&&ft.memoizedState.tag&1){if(n.flags|=2048,Su(9,OP.bind(null,n,r,i,e),void 0,null),mt===null)throw Error(B(349));Os&30||NP(n,e,i)}return i}function NP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function OP(t,e,n,r){e.value=n,e.getSnapshot=r,VP(e)&&MP(t)}function DP(t,e,n){return n(function(){VP(e)&&MP(t)})}function VP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hn(t,n)}catch{return!0}}function MP(t){var e=Ur(t,1);e!==null&&Gn(e,t,1,-1)}function QI(t){var e=er();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tu,lastRenderedState:t},e.queue=t,t=t.dispatch=P2.bind(null,Me,t),[e.memoizedState,t]}function Su(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function LP(){return Nn().memoizedState}function Od(t,e,n,r){var i=er();Me.flags|=t,i.memoizedState=Su(1|e,n,void 0,r===void 0?null:r)}function pf(t,e,n,r){var i=Nn();r=r===void 0?null:r;var s=void 0;if(lt!==null){var o=lt.memoizedState;if(s=o.destroy,r!==null&&x_(r,o.deps)){i.memoizedState=Su(e,n,s,r);return}}Me.flags|=t,i.memoizedState=Su(1|e,n,s,r)}function YI(t,e){return Od(8390656,8,t,e)}function D_(t,e){return pf(2048,8,t,e)}function FP(t,e){return pf(4,2,t,e)}function jP(t,e){return pf(4,4,t,e)}function UP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $P(t,e,n){return n=n!=null?n.concat([t]):null,pf(4,4,UP.bind(null,e,t),n)}function V_(){}function BP(t,e){var n=Nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&x_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zP(t,e){var n=Nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&x_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qP(t,e,n){return Os&21?(Hn(n,e)||(n=QS(),Me.lanes|=n,Ds|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zt=!0),t.memoizedState=n)}function T2(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=Am.transition;Am.transition={};try{t(!1),e()}finally{me=n,Am.transition=r}}function WP(){return Nn().memoizedState}function S2(t,e,n){var r=Ri(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},GP(t))KP(e,n);else if(n=bP(t,e,n,r),n!==null){var i=zt();Gn(n,t,r,i),HP(n,e,r)}}function P2(t,e,n){var r=Ri(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(GP(t))KP(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Hn(a,o)){var l=e.interleaved;l===null?(i.next=i,A_(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=bP(t,e,i,r),n!==null&&(i=zt(),Gn(n,t,r,i),HP(n,e,r))}}function GP(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function KP(t,e){Ql=wh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function HP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,h_(t,n)}}var Ih={readContext:xn,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},A2={readContext:xn,useCallback:function(t,e){return er().memoizedState=[t,e===void 0?null:e],t},useContext:xn,useEffect:YI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Od(4194308,4,UP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Od(4194308,4,t,e)},useInsertionEffect:function(t,e){return Od(4,2,t,e)},useMemo:function(t,e){var n=er();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=er();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=S2.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=er();return t={current:t},e.memoizedState=t},useState:QI,useDebugValue:V_,useDeferredValue:function(t){return er().memoizedState=t},useTransition:function(){var t=QI(!1),e=t[0];return t=T2.bind(null,t[1]),er().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,i=er();if(xe){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),mt===null)throw Error(B(349));Os&30||NP(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,YI(DP.bind(null,r,s,t),[t]),r.flags|=2048,Su(9,OP.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=er(),e=mt.identifierPrefix;if(xe){var n=Nr,r=xr;n=(r&~(1<<32-Wn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Eu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=E2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},b2={readContext:xn,useCallback:BP,useContext:xn,useEffect:D_,useImperativeHandle:$P,useInsertionEffect:FP,useLayoutEffect:jP,useMemo:zP,useReducer:bm,useRef:LP,useState:function(){return bm(Tu)},useDebugValue:V_,useDeferredValue:function(t){var e=Nn();return qP(e,lt.memoizedState,t)},useTransition:function(){var t=bm(Tu)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:kP,useSyncExternalStore:xP,useId:WP,unstable_isNewReconciler:!1},R2={readContext:xn,useCallback:BP,useContext:xn,useEffect:D_,useImperativeHandle:$P,useInsertionEffect:FP,useLayoutEffect:jP,useMemo:zP,useReducer:Rm,useRef:LP,useState:function(){return Rm(Tu)},useDebugValue:V_,useDeferredValue:function(t){var e=Nn();return lt===null?e.memoizedState=t:qP(e,lt.memoizedState,t)},useTransition:function(){var t=Rm(Tu)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:kP,useSyncExternalStore:xP,useId:WP,unstable_isNewReconciler:!1};function $n(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var mf={isMounted:function(t){return(t=t._reactInternals)?Xs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=zt(),i=Ri(t),s=Mr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ai(t,s,i),e!==null&&(Gn(e,t,i,r),xd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=zt(),i=Ri(t),s=Mr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ai(t,s,i),e!==null&&(Gn(e,t,i,r),xd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=zt(),r=Ri(t),i=Mr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ai(t,i,r),e!==null&&(Gn(e,t,r,n),xd(e,t,r))}};function JI(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!gu(n,r)||!gu(i,s):!0}function QP(t,e,n){var r=!1,i=Di,s=e.contextType;return typeof s=="object"&&s!==null?s=xn(s):(i=sn(e)?xs:Lt.current,r=e.contextTypes,s=(r=r!=null)?oa(t,i):Di),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=mf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function XI(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&mf.enqueueReplaceState(e,e.state,null)}function Ug(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},b_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=xn(s):(s=sn(e)?xs:Lt.current,i.context=oa(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(jg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&mf.enqueueReplaceState(i,i.state,null),_h(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ca(t,e){try{var n="",r=e;do n+=nO(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Cm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function $g(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var C2=typeof WeakMap=="function"?WeakMap:Map;function YP(t,e,n){n=Mr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Th||(Th=!0,Jg=r),$g(t,e)},n}function JP(t,e,n){n=Mr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){$g(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){$g(t,e),typeof r!="function"&&(bi===null?bi=new Set([this]):bi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ZI(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new C2;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=z2.bind(null,t,e,n),e.then(t,t))}function eE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function tE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mr(-1,1),e.tag=2,Ai(n,e,1))),n.lanes|=1),t)}var k2=Hr.ReactCurrentOwner,Zt=!1;function Ut(t,e,n,r){e.child=t===null?AP(e,null,n,r):la(e,t.child,n,r)}function nE(t,e,n,r,i){n=n.render;var s=e.ref;return Wo(e,i),r=N_(t,e,n,r,s,i),n=O_(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$r(t,e,i)):(xe&&n&&w_(e),e.flags|=1,Ut(t,e,r,i),e.child)}function rE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!z_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,XP(t,e,s,r,i)):(t=Ld(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:gu,n(o,r)&&t.ref===e.ref)return $r(t,e,i)}return e.flags|=1,t=Ci(s,r),t.ref=e.ref,t.return=e,e.child=t}function XP(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(gu(s,r)&&t.ref===e.ref)if(Zt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Zt=!0);else return e.lanes=t.lanes,$r(t,e,i)}return Bg(t,e,n,r,i)}function ZP(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(Fo,un),un|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(Fo,un),un|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ee(Fo,un),un|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ee(Fo,un),un|=r;return Ut(t,e,i,n),e.child}function eA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bg(t,e,n,r,i){var s=sn(n)?xs:Lt.current;return s=oa(e,s),Wo(e,i),n=N_(t,e,n,r,s,i),r=O_(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$r(t,e,i)):(xe&&r&&w_(e),e.flags|=1,Ut(t,e,n,i),e.child)}function iE(t,e,n,r,i){if(sn(n)){var s=!0;fh(e)}else s=!1;if(Wo(e,i),e.stateNode===null)Dd(t,e),QP(e,n,r),Ug(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=xn(c):(c=sn(n)?xs:Lt.current,c=oa(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&XI(e,o,r,c),ui=!1;var p=e.memoizedState;o.state=p,_h(e,r,o,i),l=e.memoizedState,a!==r||p!==l||rn.current||ui?(typeof d=="function"&&(jg(e,n,d,r),l=e.memoizedState),(a=ui||JI(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,RP(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:$n(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=xn(l):(l=sn(n)?xs:Lt.current,l=oa(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&XI(e,o,r,l),ui=!1,p=e.memoizedState,o.state=p,_h(e,r,o,i);var w=e.memoizedState;a!==h||p!==w||rn.current||ui?(typeof g=="function"&&(jg(e,n,g,r),w=e.memoizedState),(c=ui||JI(e,n,c,r,p,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return zg(t,e,n,r,s,i)}function zg(t,e,n,r,i,s){eA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&zI(e,n,!1),$r(t,e,s);r=e.stateNode,k2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=la(e,t.child,null,s),e.child=la(e,null,a,s)):Ut(t,e,a,s),e.memoizedState=r.state,i&&zI(e,n,!0),e.child}function tA(t){var e=t.stateNode;e.pendingContext?BI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&BI(t,e.context,!1),R_(t,e.containerInfo)}function sE(t,e,n,r,i){return aa(),E_(i),e.flags|=256,Ut(t,e,n,r),e.child}var qg={dehydrated:null,treeContext:null,retryLane:0};function Wg(t){return{baseLanes:t,cachePool:null,transitions:null}}function nA(t,e,n){var r=e.pendingProps,i=Ve.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ee(Ve,i&1),t===null)return Lg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=_f(o,r,0,null),t=bs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Wg(n),e.memoizedState=qg,t):M_(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return x2(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ci(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ci(a,s):(s=bs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Wg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=qg,r}return s=t.child,t=s.sibling,r=Ci(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function M_(t,e){return e=_f({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fd(t,e,n,r){return r!==null&&E_(r),la(e,t.child,null,n),t=M_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function x2(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Cm(Error(B(422))),fd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=_f({mode:"visible",children:r.children},i,0,null),s=bs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&la(e,t.child,null,o),e.child.memoizedState=Wg(o),e.memoizedState=qg,s);if(!(e.mode&1))return fd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(B(419)),r=Cm(s,r,void 0),fd(t,e,o,r)}if(a=(o&t.childLanes)!==0,Zt||a){if(r=mt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ur(t,i),Gn(r,t,i,-1))}return B_(),r=Cm(Error(B(421))),fd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=q2.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,hn=Pi(i.nextSibling),pn=e,xe=!0,zn=null,t!==null&&(Sn[Pn++]=xr,Sn[Pn++]=Nr,Sn[Pn++]=Ns,xr=t.id,Nr=t.overflow,Ns=e),e=M_(e,r.children),e.flags|=4096,e)}function oE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Fg(t.return,e,n)}function km(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function rA(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ut(t,e,r.children,n),r=Ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&oE(t,n,e);else if(t.tag===19)oE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ee(Ve,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&vh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),km(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&vh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}km(e,!0,n,null,s);break;case"together":km(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Dd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $r(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ds|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Ci(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ci(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function N2(t,e,n){switch(e.tag){case 3:tA(e),aa();break;case 5:CP(e);break;case 1:sn(e.type)&&fh(e);break;case 4:R_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ee(gh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ee(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?nA(t,e,n):(Ee(Ve,Ve.current&1),t=$r(t,e,n),t!==null?t.sibling:null);Ee(Ve,Ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return rA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ee(Ve,Ve.current),r)break;return null;case 22:case 23:return e.lanes=0,ZP(t,e,n)}return $r(t,e,n)}var iA,Gg,sA,oA;iA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Gg=function(){};sA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Es(hr.current);var s=null;switch(n){case"input":i=pg(t,i),r=pg(t,r),s=[];break;case"select":i=Fe({},i,{value:void 0}),r=Fe({},r,{value:void 0}),s=[];break;case"textarea":i=yg(t,i),r=yg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=dh)}vg(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(uu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(uu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Pe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};oA=function(t,e,n,r){n!==r&&(e.flags|=4)};function vl(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function O2(t,e,n){var r=e.pendingProps;switch(I_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return sn(e.type)&&hh(),Nt(e),null;case 3:return r=e.stateNode,ua(),be(rn),be(Lt),k_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(dd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zn!==null&&(ey(zn),zn=null))),Gg(t,e),Nt(e),null;case 5:C_(e);var i=Es(Iu.current);if(n=e.type,t!==null&&e.stateNode!=null)sA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return Nt(e),null}if(t=Es(hr.current),dd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[rr]=e,r[vu]=s,t=(e.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(i=0;i<Dl.length;i++)Pe(Dl[i],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":mI(r,s),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pe("invalid",r);break;case"textarea":yI(r,s),Pe("invalid",r)}vg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&cd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&cd(r.textContent,a,t),i=["children",""+a]):uu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Pe("scroll",r)}switch(n){case"input":nd(r),gI(r,s,!0);break;case"textarea":nd(r),_I(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=dh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=DS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[rr]=e,t[vu]=r,iA(t,e,!1,!1),e.stateNode=t;e:{switch(o=wg(n,r),n){case"dialog":Pe("cancel",t),Pe("close",t),i=r;break;case"iframe":case"object":case"embed":Pe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Dl.length;i++)Pe(Dl[i],t);i=r;break;case"source":Pe("error",t),i=r;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),i=r;break;case"details":Pe("toggle",t),i=r;break;case"input":mI(t,r),i=pg(t,r),Pe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Fe({},r,{value:void 0}),Pe("invalid",t);break;case"textarea":yI(t,r),i=yg(t,r),Pe("invalid",t);break;default:i=r}vg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?LS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&VS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&cu(t,l):typeof l=="number"&&cu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(uu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Pe("scroll",t):l!=null&&o_(t,s,l,o))}switch(n){case"input":nd(t),gI(t,r,!1);break;case"textarea":nd(t),_I(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Oi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?$o(t,!!r.multiple,s,!1):r.defaultValue!=null&&$o(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=dh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)oA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Es(Iu.current),Es(hr.current),dd(e)){if(r=e.stateNode,n=e.memoizedProps,r[rr]=e,(s=r.nodeValue!==n)&&(t=pn,t!==null))switch(t.tag){case 3:cd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[rr]=e,e.stateNode=r}return Nt(e),null;case 13:if(be(Ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&hn!==null&&e.mode&1&&!(e.flags&128))SP(),aa(),e.flags|=98560,s=!1;else if(s=dd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[rr]=e}else aa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),s=!1}else zn!==null&&(ey(zn),zn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?ut===0&&(ut=3):B_())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return ua(),Gg(t,e),t===null&&yu(e.stateNode.containerInfo),Nt(e),null;case 10:return P_(e.type._context),Nt(e),null;case 17:return sn(e.type)&&hh(),Nt(e),null;case 19:if(be(Ve),s=e.memoizedState,s===null)return Nt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)vl(s,!1);else{if(ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=vh(t),o!==null){for(e.flags|=128,vl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ee(Ve,Ve.current&1|2),e.child}t=t.sibling}s.tail!==null&&Je()>da&&(e.flags|=128,r=!0,vl(s,!1),e.lanes=4194304)}else{if(!r)if(t=vh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!xe)return Nt(e),null}else 2*Je()-s.renderingStartTime>da&&n!==1073741824&&(e.flags|=128,r=!0,vl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Je(),e.sibling=null,n=Ve.current,Ee(Ve,r?n&1|2:n&1),e):(Nt(e),null);case 22:case 23:return $_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?un&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function D2(t,e){switch(I_(e),e.tag){case 1:return sn(e.type)&&hh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ua(),be(rn),be(Lt),k_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return C_(e),null;case 13:if(be(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));aa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(Ve),null;case 4:return ua(),null;case 10:return P_(e.type._context),null;case 22:case 23:return $_(),null;case 24:return null;default:return null}}var pd=!1,Mt=!1,V2=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Lo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(t,e,r)}else n.current=null}function Kg(t,e,n){try{n()}catch(r){ze(t,e,r)}}var aE=!1;function M2(t,e){if(kg=lh,t=dP(),v_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var g;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)p=h,h=g;for(;;){if(h===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++d===r&&(l=o),(g=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(xg={focusedElem:t,selectionRange:n},lh=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,A=w.memoizedState,I=e.stateNode,y=I.getSnapshotBeforeUpdate(e.elementType===e.type?v:$n(e.type,v),A);I.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(k){ze(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return w=aE,aE=!1,w}function Yl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Kg(e,n,s)}i=i.next}while(i!==r)}}function gf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Hg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function aA(t){var e=t.alternate;e!==null&&(t.alternate=null,aA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[rr],delete e[vu],delete e[Dg],delete e[_2],delete e[v2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lA(t){return t.tag===5||t.tag===3||t.tag===4}function lE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=dh));else if(r!==4&&(t=t.child,t!==null))for(Qg(t,e,n),t=t.sibling;t!==null;)Qg(t,e,n),t=t.sibling}function Yg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Yg(t,e,n),t=t.sibling;t!==null;)Yg(t,e,n),t=t.sibling}var It=null,Bn=!1;function ri(t,e,n){for(n=n.child;n!==null;)uA(t,e,n),n=n.sibling}function uA(t,e,n){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(lf,n)}catch{}switch(n.tag){case 5:Mt||Lo(n,e);case 6:var r=It,i=Bn;It=null,ri(t,e,n),It=r,Bn=i,It!==null&&(Bn?(t=It,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):It.removeChild(n.stateNode));break;case 18:It!==null&&(Bn?(t=It,n=n.stateNode,t.nodeType===8?Tm(t.parentNode,n):t.nodeType===1&&Tm(t,n),pu(t)):Tm(It,n.stateNode));break;case 4:r=It,i=Bn,It=n.stateNode.containerInfo,Bn=!0,ri(t,e,n),It=r,Bn=i;break;case 0:case 11:case 14:case 15:if(!Mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Kg(n,e,o),i=i.next}while(i!==r)}ri(t,e,n);break;case 1:if(!Mt&&(Lo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ze(n,e,a)}ri(t,e,n);break;case 21:ri(t,e,n);break;case 22:n.mode&1?(Mt=(r=Mt)||n.memoizedState!==null,ri(t,e,n),Mt=r):ri(t,e,n);break;default:ri(t,e,n)}}function uE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new V2),e.forEach(function(r){var i=W2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Un(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:It=a.stateNode,Bn=!1;break e;case 3:It=a.stateNode.containerInfo,Bn=!0;break e;case 4:It=a.stateNode.containerInfo,Bn=!0;break e}a=a.return}if(It===null)throw Error(B(160));uA(s,o,i),It=null,Bn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ze(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cA(e,t),e=e.sibling}function cA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Un(e,t),Zn(t),r&4){try{Yl(3,t,t.return),gf(3,t)}catch(v){ze(t,t.return,v)}try{Yl(5,t,t.return)}catch(v){ze(t,t.return,v)}}break;case 1:Un(e,t),Zn(t),r&512&&n!==null&&Lo(n,n.return);break;case 5:if(Un(e,t),Zn(t),r&512&&n!==null&&Lo(n,n.return),t.flags&32){var i=t.stateNode;try{cu(i,"")}catch(v){ze(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&NS(i,s),wg(a,o);var c=wg(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?LS(i,h):d==="dangerouslySetInnerHTML"?VS(i,h):d==="children"?cu(i,h):o_(i,d,h,c)}switch(a){case"input":mg(i,s);break;case"textarea":OS(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?$o(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?$o(i,!!s.multiple,s.defaultValue,!0):$o(i,!!s.multiple,s.multiple?[]:"",!1))}i[vu]=s}catch(v){ze(t,t.return,v)}}break;case 6:if(Un(e,t),Zn(t),r&4){if(t.stateNode===null)throw Error(B(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){ze(t,t.return,v)}}break;case 3:if(Un(e,t),Zn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{pu(e.containerInfo)}catch(v){ze(t,t.return,v)}break;case 4:Un(e,t),Zn(t);break;case 13:Un(e,t),Zn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(j_=Je())),r&4&&uE(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Mt=(c=Mt)||d,Un(e,t),Mt=c):Un(e,t),Zn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Y=t,d=t.child;d!==null;){for(h=Y=d;Y!==null;){switch(p=Y,g=p.child,p.tag){case 0:case 11:case 14:case 15:Yl(4,p,p.return);break;case 1:Lo(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(v){ze(r,n,v)}}break;case 5:Lo(p,p.return);break;case 22:if(p.memoizedState!==null){dE(h);continue}}g!==null?(g.return=p,Y=g):dE(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=MS("display",o))}catch(v){ze(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){ze(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Un(e,t),Zn(t),r&4&&uE(t);break;case 21:break;default:Un(e,t),Zn(t)}}function Zn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(lA(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(cu(i,""),r.flags&=-33);var s=lE(t);Yg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=lE(t);Qg(t,a,o);break;default:throw Error(B(161))}}catch(l){ze(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function L2(t,e,n){Y=t,dA(t)}function dA(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var i=Y,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||pd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Mt;a=pd;var c=Mt;if(pd=o,(Mt=l)&&!c)for(Y=i;Y!==null;)o=Y,l=o.child,o.tag===22&&o.memoizedState!==null?hE(i):l!==null?(l.return=o,Y=l):hE(i);for(;s!==null;)Y=s,dA(s),s=s.sibling;Y=i,pd=a,Mt=c}cE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Y=s):cE(t)}}function cE(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mt||gf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Mt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:$n(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&HI(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}HI(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&pu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Mt||e.flags&512&&Hg(e)}catch(p){ze(e,e.return,p)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function dE(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function hE(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{gf(4,e)}catch(l){ze(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ze(e,i,l)}}var s=e.return;try{Hg(e)}catch(l){ze(e,s,l)}break;case 5:var o=e.return;try{Hg(e)}catch(l){ze(e,o,l)}}}catch(l){ze(e,e.return,l)}if(e===t){Y=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Y=a;break}Y=e.return}}var F2=Math.ceil,Eh=Hr.ReactCurrentDispatcher,L_=Hr.ReactCurrentOwner,Cn=Hr.ReactCurrentBatchConfig,ue=0,mt=null,ot=null,Pt=0,un=0,Fo=Hi(0),ut=0,Pu=null,Ds=0,yf=0,F_=0,Jl=null,Xt=null,j_=0,da=1/0,Cr=null,Th=!1,Jg=null,bi=null,md=!1,yi=null,Sh=0,Xl=0,Xg=null,Vd=-1,Md=0;function zt(){return ue&6?Je():Vd!==-1?Vd:Vd=Je()}function Ri(t){return t.mode&1?ue&2&&Pt!==0?Pt&-Pt:I2.transition!==null?(Md===0&&(Md=QS()),Md):(t=me,t!==0||(t=window.event,t=t===void 0?16:nP(t.type)),t):1}function Gn(t,e,n,r){if(50<Xl)throw Xl=0,Xg=null,Error(B(185));oc(t,n,r),(!(ue&2)||t!==mt)&&(t===mt&&(!(ue&2)&&(yf|=n),ut===4&&di(t,Pt)),on(t,r),n===1&&ue===0&&!(e.mode&1)&&(da=Je()+500,ff&&Qi()))}function on(t,e){var n=t.callbackNode;IO(t,e);var r=ah(t,t===mt?Pt:0);if(r===0)n!==null&&II(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&II(n),e===1)t.tag===0?w2(fE.bind(null,t)):IP(fE.bind(null,t)),g2(function(){!(ue&6)&&Qi()}),n=null;else{switch(YS(r)){case 1:n=d_;break;case 4:n=KS;break;case 16:n=oh;break;case 536870912:n=HS;break;default:n=oh}n=vA(n,hA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function hA(t,e){if(Vd=-1,Md=0,ue&6)throw Error(B(327));var n=t.callbackNode;if(Go()&&t.callbackNode!==n)return null;var r=ah(t,t===mt?Pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ph(t,r);else{e=r;var i=ue;ue|=2;var s=pA();(mt!==t||Pt!==e)&&(Cr=null,da=Je()+500,As(t,e));do try{$2();break}catch(a){fA(t,a)}while(1);S_(),Eh.current=s,ue=i,ot!==null?e=0:(mt=null,Pt=0,e=ut)}if(e!==0){if(e===2&&(i=Pg(t),i!==0&&(r=i,e=Zg(t,i))),e===1)throw n=Pu,As(t,0),di(t,r),on(t,Je()),n;if(e===6)di(t,r);else{if(i=t.current.alternate,!(r&30)&&!j2(i)&&(e=Ph(t,r),e===2&&(s=Pg(t),s!==0&&(r=s,e=Zg(t,s))),e===1))throw n=Pu,As(t,0),di(t,r),on(t,Je()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:ds(t,Xt,Cr);break;case 3:if(di(t,r),(r&130023424)===r&&(e=j_+500-Je(),10<e)){if(ah(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){zt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Og(ds.bind(null,t,Xt,Cr),e);break}ds(t,Xt,Cr);break;case 4:if(di(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Wn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*F2(r/1960))-r,10<r){t.timeoutHandle=Og(ds.bind(null,t,Xt,Cr),r);break}ds(t,Xt,Cr);break;case 5:ds(t,Xt,Cr);break;default:throw Error(B(329))}}}return on(t,Je()),t.callbackNode===n?hA.bind(null,t):null}function Zg(t,e){var n=Jl;return t.current.memoizedState.isDehydrated&&(As(t,e).flags|=256),t=Ph(t,e),t!==2&&(e=Xt,Xt=n,e!==null&&ey(e)),t}function ey(t){Xt===null?Xt=t:Xt.push.apply(Xt,t)}function j2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Hn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function di(t,e){for(e&=~F_,e&=~yf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wn(e),r=1<<n;t[n]=-1,e&=~r}}function fE(t){if(ue&6)throw Error(B(327));Go();var e=ah(t,0);if(!(e&1))return on(t,Je()),null;var n=Ph(t,e);if(t.tag!==0&&n===2){var r=Pg(t);r!==0&&(e=r,n=Zg(t,r))}if(n===1)throw n=Pu,As(t,0),di(t,e),on(t,Je()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ds(t,Xt,Cr),on(t,Je()),null}function U_(t,e){var n=ue;ue|=1;try{return t(e)}finally{ue=n,ue===0&&(da=Je()+500,ff&&Qi())}}function Vs(t){yi!==null&&yi.tag===0&&!(ue&6)&&Go();var e=ue;ue|=1;var n=Cn.transition,r=me;try{if(Cn.transition=null,me=1,t)return t()}finally{me=r,Cn.transition=n,ue=e,!(ue&6)&&Qi()}}function $_(){un=Fo.current,be(Fo)}function As(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,m2(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch(I_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hh();break;case 3:ua(),be(rn),be(Lt),k_();break;case 5:C_(r);break;case 4:ua();break;case 13:be(Ve);break;case 19:be(Ve);break;case 10:P_(r.type._context);break;case 22:case 23:$_()}n=n.return}if(mt=t,ot=t=Ci(t.current,null),Pt=un=e,ut=0,Pu=null,F_=yf=Ds=0,Xt=Jl=null,Is!==null){for(e=0;e<Is.length;e++)if(n=Is[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Is=null}return t}function fA(t,e){do{var n=ot;try{if(S_(),Nd.current=Ih,wh){for(var r=Me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}wh=!1}if(Os=0,ft=lt=Me=null,Ql=!1,Eu=0,L_.current=null,n===null||n.return===null){ut=1,Pu=e,ot=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Pt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=eE(o);if(g!==null){g.flags&=-257,tE(g,o,a,s,e),g.mode&1&&ZI(s,c,e),e=g,l=c;var w=e.updateQueue;if(w===null){var v=new Set;v.add(l),e.updateQueue=v}else w.add(l);break e}else{if(!(e&1)){ZI(s,c,e),B_();break e}l=Error(B(426))}}else if(xe&&a.mode&1){var A=eE(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),tE(A,o,a,s,e),E_(ca(l,a));break e}}s=l=ca(l,a),ut!==4&&(ut=2),Jl===null?Jl=[s]:Jl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=YP(s,l,e);KI(s,I);break e;case 1:a=l;var y=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(bi===null||!bi.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=JP(s,a,e);KI(s,k);break e}}s=s.return}while(s!==null)}gA(n)}catch(V){e=V,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(1)}function pA(){var t=Eh.current;return Eh.current=Ih,t===null?Ih:t}function B_(){(ut===0||ut===3||ut===2)&&(ut=4),mt===null||!(Ds&268435455)&&!(yf&268435455)||di(mt,Pt)}function Ph(t,e){var n=ue;ue|=2;var r=pA();(mt!==t||Pt!==e)&&(Cr=null,As(t,e));do try{U2();break}catch(i){fA(t,i)}while(1);if(S_(),ue=n,Eh.current=r,ot!==null)throw Error(B(261));return mt=null,Pt=0,ut}function U2(){for(;ot!==null;)mA(ot)}function $2(){for(;ot!==null&&!hO();)mA(ot)}function mA(t){var e=_A(t.alternate,t,un);t.memoizedProps=t.pendingProps,e===null?gA(t):ot=e,L_.current=null}function gA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=D2(n,e),n!==null){n.flags&=32767,ot=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ut=6,ot=null;return}}else if(n=O2(n,e,un),n!==null){ot=n;return}if(e=e.sibling,e!==null){ot=e;return}ot=e=t}while(e!==null);ut===0&&(ut=5)}function ds(t,e,n){var r=me,i=Cn.transition;try{Cn.transition=null,me=1,B2(t,e,n,r)}finally{Cn.transition=i,me=r}return null}function B2(t,e,n,r){do Go();while(yi!==null);if(ue&6)throw Error(B(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(EO(t,s),t===mt&&(ot=mt=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||md||(md=!0,vA(oh,function(){return Go(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Cn.transition,Cn.transition=null;var o=me;me=1;var a=ue;ue|=4,L_.current=null,M2(t,n),cA(n,t),l2(xg),lh=!!kg,xg=kg=null,t.current=n,L2(n),fO(),ue=a,me=o,Cn.transition=s}else t.current=n;if(md&&(md=!1,yi=t,Sh=i),s=t.pendingLanes,s===0&&(bi=null),gO(n.stateNode),on(t,Je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Th)throw Th=!1,t=Jg,Jg=null,t;return Sh&1&&t.tag!==0&&Go(),s=t.pendingLanes,s&1?t===Xg?Xl++:(Xl=0,Xg=t):Xl=0,Qi(),null}function Go(){if(yi!==null){var t=YS(Sh),e=Cn.transition,n=me;try{if(Cn.transition=null,me=16>t?16:t,yi===null)var r=!1;else{if(t=yi,yi=null,Sh=0,ue&6)throw Error(B(331));var i=ue;for(ue|=4,Y=t.current;Y!==null;){var s=Y,o=s.child;if(Y.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Y=c;Y!==null;){var d=Y;switch(d.tag){case 0:case 11:case 15:Yl(8,d,s)}var h=d.child;if(h!==null)h.return=d,Y=h;else for(;Y!==null;){d=Y;var p=d.sibling,g=d.return;if(aA(d),d===c){Y=null;break}if(p!==null){p.return=g,Y=p;break}Y=g}}}var w=s.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var A=v.sibling;v.sibling=null,v=A}while(v!==null)}}Y=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Y=o;else e:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Yl(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,Y=I;break e}Y=s.return}}var y=t.current;for(Y=y;Y!==null;){o=Y;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,Y=T;else e:for(o=y;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:gf(9,a)}}catch(V){ze(a,a.return,V)}if(a===o){Y=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,Y=k;break e}Y=a.return}}if(ue=i,Qi(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(lf,t)}catch{}r=!0}return r}finally{me=n,Cn.transition=e}}return!1}function pE(t,e,n){e=ca(n,e),e=YP(t,e,1),t=Ai(t,e,1),e=zt(),t!==null&&(oc(t,1,e),on(t,e))}function ze(t,e,n){if(t.tag===3)pE(t,t,n);else for(;e!==null;){if(e.tag===3){pE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(bi===null||!bi.has(r))){t=ca(n,t),t=JP(e,t,1),e=Ai(e,t,1),t=zt(),e!==null&&(oc(e,1,t),on(e,t));break}}e=e.return}}function z2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=zt(),t.pingedLanes|=t.suspendedLanes&n,mt===t&&(Pt&n)===n&&(ut===4||ut===3&&(Pt&130023424)===Pt&&500>Je()-j_?As(t,0):F_|=n),on(t,e)}function yA(t,e){e===0&&(t.mode&1?(e=sd,sd<<=1,!(sd&130023424)&&(sd=4194304)):e=1);var n=zt();t=Ur(t,e),t!==null&&(oc(t,e,n),on(t,n))}function q2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),yA(t,n)}function W2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),yA(t,n)}var _A;_A=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rn.current)Zt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zt=!1,N2(t,e,n);Zt=!!(t.flags&131072)}else Zt=!1,xe&&e.flags&1048576&&EP(e,mh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Dd(t,e),t=e.pendingProps;var i=oa(e,Lt.current);Wo(e,n),i=N_(null,e,r,t,i,n);var s=O_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,sn(r)?(s=!0,fh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,b_(e),i.updater=mf,e.stateNode=i,i._reactInternals=e,Ug(e,r,t,n),e=zg(null,e,r,!0,s,n)):(e.tag=0,xe&&s&&w_(e),Ut(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Dd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=K2(r),t=$n(r,t),i){case 0:e=Bg(null,e,r,t,n);break e;case 1:e=iE(null,e,r,t,n);break e;case 11:e=nE(null,e,r,t,n);break e;case 14:e=rE(null,e,r,$n(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),Bg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),iE(t,e,r,i,n);case 3:e:{if(tA(e),t===null)throw Error(B(387));r=e.pendingProps,s=e.memoizedState,i=s.element,RP(t,e),_h(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ca(Error(B(423)),e),e=sE(t,e,r,n,i);break e}else if(r!==i){i=ca(Error(B(424)),e),e=sE(t,e,r,n,i);break e}else for(hn=Pi(e.stateNode.containerInfo.firstChild),pn=e,xe=!0,zn=null,n=AP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(aa(),r===i){e=$r(t,e,n);break e}Ut(t,e,r,n)}e=e.child}return e;case 5:return CP(e),t===null&&Lg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ng(r,i)?o=null:s!==null&&Ng(r,s)&&(e.flags|=32),eA(t,e),Ut(t,e,o,n),e.child;case 6:return t===null&&Lg(e),null;case 13:return nA(t,e,n);case 4:return R_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=la(e,null,r,n):Ut(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),nE(t,e,r,i,n);case 7:return Ut(t,e,e.pendingProps,n),e.child;case 8:return Ut(t,e,e.pendingProps.children,n),e.child;case 12:return Ut(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ee(gh,r._currentValue),r._currentValue=o,s!==null)if(Hn(s.value,o)){if(s.children===i.children&&!rn.current){e=$r(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Mr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Fg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Fg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ut(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Wo(e,n),i=xn(i),r=r(i),e.flags|=1,Ut(t,e,r,n),e.child;case 14:return r=e.type,i=$n(r,e.pendingProps),i=$n(r.type,i),rE(t,e,r,i,n);case 15:return XP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),Dd(t,e),e.tag=1,sn(r)?(t=!0,fh(e)):t=!1,Wo(e,n),QP(e,r,i),Ug(e,r,i,n),zg(null,e,r,!0,t,n);case 19:return rA(t,e,n);case 22:return ZP(t,e,n)}throw Error(B(156,e.tag))};function vA(t,e){return GS(t,e)}function G2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(t,e,n,r){return new G2(t,e,n,r)}function z_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function K2(t){if(typeof t=="function")return z_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===l_)return 11;if(t===u_)return 14}return 2}function Ci(t,e){var n=t.alternate;return n===null?(n=bn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ld(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")z_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ro:return bs(n.children,i,s,e);case a_:o=8,i|=8;break;case cg:return t=bn(12,n,e,i|2),t.elementType=cg,t.lanes=s,t;case dg:return t=bn(13,n,e,i),t.elementType=dg,t.lanes=s,t;case hg:return t=bn(19,n,e,i),t.elementType=hg,t.lanes=s,t;case CS:return _f(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bS:o=10;break e;case RS:o=9;break e;case l_:o=11;break e;case u_:o=14;break e;case li:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=bn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function bs(t,e,n,r){return t=bn(7,t,r,e),t.lanes=n,t}function _f(t,e,n,r){return t=bn(22,t,r,e),t.elementType=CS,t.lanes=n,t.stateNode={isHidden:!1},t}function xm(t,e,n){return t=bn(6,t,null,e),t.lanes=n,t}function Nm(t,e,n){return e=bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function H2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hm(0),this.expirationTimes=hm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function q_(t,e,n,r,i,s,o,a,l){return t=new H2(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=bn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},b_(s),t}function Q2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function wA(t){if(!t)return Di;t=t._reactInternals;e:{if(Xs(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(sn(n))return wP(t,n,e)}return e}function IA(t,e,n,r,i,s,o,a,l){return t=q_(n,r,!0,t,i,s,o,a,l),t.context=wA(null),n=t.current,r=zt(),i=Ri(n),s=Mr(r,i),s.callback=e??null,Ai(n,s,i),t.current.lanes=i,oc(t,i,r),on(t,r),t}function vf(t,e,n,r){var i=e.current,s=zt(),o=Ri(i);return n=wA(n),e.context===null?e.context=n:e.pendingContext=n,e=Mr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ai(i,e,o),t!==null&&(Gn(t,i,o,s),xd(t,i,o)),o}function Ah(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function W_(t,e){mE(t,e),(t=t.alternate)&&mE(t,e)}function Y2(){return null}var EA=typeof reportError=="function"?reportError:function(t){console.error(t)};function G_(t){this._internalRoot=t}wf.prototype.render=G_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));vf(t,e,null,null)};wf.prototype.unmount=G_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vs(function(){vf(null,t,null,null)}),e[jr]=null}};function wf(t){this._internalRoot=t}wf.prototype.unstable_scheduleHydration=function(t){if(t){var e=ZS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ci.length&&e!==0&&e<ci[n].priority;n++);ci.splice(n,0,t),n===0&&tP(t)}};function K_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function If(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gE(){}function J2(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Ah(o);s.call(c)}}var o=IA(e,r,t,0,null,!1,!1,"",gE);return t._reactRootContainer=o,t[jr]=o.current,yu(t.nodeType===8?t.parentNode:t),Vs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Ah(l);a.call(c)}}var l=q_(t,0,!1,null,null,!1,!1,"",gE);return t._reactRootContainer=l,t[jr]=l.current,yu(t.nodeType===8?t.parentNode:t),Vs(function(){vf(e,l,n,r)}),l}function Ef(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ah(o);a.call(l)}}vf(e,o,t,i)}else o=J2(n,e,t,i,r);return Ah(o)}JS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ol(e.pendingLanes);n!==0&&(h_(e,n|1),on(e,Je()),!(ue&6)&&(da=Je()+500,Qi()))}break;case 13:Vs(function(){var r=Ur(t,1);if(r!==null){var i=zt();Gn(r,t,1,i)}}),W_(t,1)}};f_=function(t){if(t.tag===13){var e=Ur(t,134217728);if(e!==null){var n=zt();Gn(e,t,134217728,n)}W_(t,134217728)}};XS=function(t){if(t.tag===13){var e=Ri(t),n=Ur(t,e);if(n!==null){var r=zt();Gn(n,t,e,r)}W_(t,e)}};ZS=function(){return me};eP=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};Eg=function(t,e,n){switch(e){case"input":if(mg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=hf(r);if(!i)throw Error(B(90));xS(r),mg(r,i)}}}break;case"textarea":OS(t,n);break;case"select":e=n.value,e!=null&&$o(t,!!n.multiple,e,!1)}};US=U_;$S=Vs;var X2={usingClientEntryPoint:!1,Events:[lc,No,hf,FS,jS,U_]},wl={findFiberByHostInstance:ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Z2={bundleType:wl.bundleType,version:wl.version,rendererPackageName:wl.rendererPackageName,rendererConfig:wl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qS(t),t===null?null:t.stateNode},findFiberByHostInstance:wl.findFiberByHostInstance||Y2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gd.isDisabled&&gd.supportsFiber)try{lf=gd.inject(Z2),dr=gd}catch{}}vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X2;vn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!K_(e))throw Error(B(200));return Q2(t,e,null,n)};vn.createRoot=function(t,e){if(!K_(t))throw Error(B(299));var n=!1,r="",i=EA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=q_(t,1,!1,null,null,n,!1,r,i),t[jr]=e.current,yu(t.nodeType===8?t.parentNode:t),new G_(e)};vn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=qS(e),t=t===null?null:t.stateNode,t};vn.flushSync=function(t){return Vs(t)};vn.hydrate=function(t,e,n){if(!If(e))throw Error(B(200));return Ef(null,t,e,!0,n)};vn.hydrateRoot=function(t,e,n){if(!K_(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=EA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=IA(e,null,t,1,n??null,i,!1,s,o),t[jr]=e.current,yu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new wf(e)};vn.render=function(t,e,n){if(!If(e))throw Error(B(200));return Ef(null,t,e,!1,n)};vn.unmountComponentAtNode=function(t){if(!If(t))throw Error(B(40));return t._reactRootContainer?(Vs(function(){Ef(null,null,t,!1,function(){t._reactRootContainer=null,t[jr]=null})}),!0):!1};vn.unstable_batchedUpdates=U_;vn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!If(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Ef(t,e,n,!1,r)};vn.version="18.3.1-next-f1338f8080-20240426";function TA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TA)}catch(t){console.error(t)}}TA(),TS.exports=vn;var SA=TS.exports;/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Au(){return Au=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Au.apply(this,arguments)}var _i;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_i||(_i={}));const yE="popstate";function eD(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return ty("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:bh(i)}return nD(e,n,null,t)}function Ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function PA(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tD(){return Math.random().toString(36).substr(2,8)}function _E(t,e){return{usr:t.state,key:t.key,idx:e}}function ty(t,e,n,r){return n===void 0&&(n=null),Au({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Da(e):e,{state:n,key:e&&e.key||r||tD()})}function bh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Da(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function nD(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=_i.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Au({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=_i.Pop;let A=d(),I=A==null?null:A-c;c=A,l&&l({action:a,location:v.location,delta:I})}function p(A,I){a=_i.Push;let y=ty(v.location,A,I);n&&n(y,A),c=d()+1;let T=_E(y,c),k=v.createHref(y);try{o.pushState(T,"",k)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(k)}s&&l&&l({action:a,location:v.location,delta:1})}function g(A,I){a=_i.Replace;let y=ty(v.location,A,I);n&&n(y,A),c=d();let T=_E(y,c),k=v.createHref(y);o.replaceState(T,"",k),s&&l&&l({action:a,location:v.location,delta:0})}function w(A){let I=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof A=="string"?A:bh(A);return y=y.replace(/ $/,"%20"),Ze(I,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,I)}let v={get action(){return a},get location(){return t(i,o)},listen(A){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(yE,h),l=A,()=>{i.removeEventListener(yE,h),l=null}},createHref(A){return e(i,A)},createURL:w,encodeLocation(A){let I=w(A);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:p,replace:g,go(A){return o.go(A)}};return v}var vE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(vE||(vE={}));function rD(t,e,n){return n===void 0&&(n="/"),iD(t,e,n,!1)}function iD(t,e,n,r){let i=typeof e=="string"?Da(e):e,s=H_(i.pathname||"/",n);if(s==null)return null;let o=AA(t);sD(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=gD(s);a=pD(o[l],c,r)}return a}function AA(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ze(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ki([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(Ze(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),AA(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:hD(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of bA(s.path))i(s,o,l)}),e}function bA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=bA(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function sD(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:fD(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const oD=/^:[\w-]+$/,aD=3,lD=2,uD=1,cD=10,dD=-2,wE=t=>t==="*";function hD(t,e){let n=t.split("/"),r=n.length;return n.some(wE)&&(r+=dD),e&&(r+=lD),n.filter(i=>!wE(i)).reduce((i,s)=>i+(oD.test(s)?aD:s===""?uD:cD),r)}function fD(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function pD(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=IE({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=IE({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:ki([s,h.pathname]),pathnameBase:wD(ki([s,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(s=ki([s,h.pathnameBase]))}return o}function IE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=mD(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:p,isOptional:g}=d;if(p==="*"){let v=a[h]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const w=a[h];return g&&!w?c[p]=void 0:c[p]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function mD(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),PA(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function gD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return PA(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function H_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function yD(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Da(t):t;return{pathname:n?n.startsWith("/")?n:_D(n,e):e,search:ID(r),hash:ED(i)}}function _D(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Om(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vD(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Q_(t,e){let n=vD(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Y_(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Da(t):(i=Au({},t),Ze(!i.pathname||!i.pathname.includes("?"),Om("?","pathname","search",i)),Ze(!i.pathname||!i.pathname.includes("#"),Om("#","pathname","hash",i)),Ze(!i.search||!i.search.includes("#"),Om("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=yD(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const ki=t=>t.join("/").replace(/\/\/+/g,"/"),wD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ID=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ED=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function TD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const RA=["post","put","patch","delete"];new Set(RA);const SD=["get",...RA];new Set(SD);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bu(){return bu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bu.apply(this,arguments)}const J_=M.createContext(null),PD=M.createContext(null),Yi=M.createContext(null),Tf=M.createContext(null),Ji=M.createContext({outlet:null,matches:[],isDataRoute:!1}),CA=M.createContext(null);function AD(t,e){let{relative:n}=e===void 0?{}:e;Va()||Ze(!1);let{basename:r,navigator:i}=M.useContext(Yi),{hash:s,pathname:o,search:a}=xA(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ki([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Va(){return M.useContext(Tf)!=null}function cc(){return Va()||Ze(!1),M.useContext(Tf).location}function kA(t){M.useContext(Yi).static||M.useLayoutEffect(t)}function Sf(){let{isDataRoute:t}=M.useContext(Ji);return t?jD():bD()}function bD(){Va()||Ze(!1);let t=M.useContext(J_),{basename:e,future:n,navigator:r}=M.useContext(Yi),{matches:i}=M.useContext(Ji),{pathname:s}=cc(),o=JSON.stringify(Q_(i,n.v7_relativeSplatPath)),a=M.useRef(!1);return kA(()=>{a.current=!0}),M.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=Y_(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ki([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,t])}function xA(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(Yi),{matches:i}=M.useContext(Ji),{pathname:s}=cc(),o=JSON.stringify(Q_(i,r.v7_relativeSplatPath));return M.useMemo(()=>Y_(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function RD(t,e){return CD(t,e)}function CD(t,e,n,r){Va()||Ze(!1);let{navigator:i}=M.useContext(Yi),{matches:s}=M.useContext(Ji),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=cc(),d;if(e){var h;let A=typeof e=="string"?Da(e):e;l==="/"||(h=A.pathname)!=null&&h.startsWith(l)||Ze(!1),d=A}else d=c;let p=d.pathname||"/",g=p;if(l!=="/"){let A=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(A.length).join("/")}let w=rD(t,{pathname:g}),v=DD(w&&w.map(A=>Object.assign({},A,{params:Object.assign({},a,A.params),pathname:ki([l,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?l:ki([l,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),s,n,r);return e&&v?M.createElement(Tf.Provider,{value:{location:bu({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:_i.Pop}},v):v}function kD(){let t=FD(),e=TD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:i},n):null,s)}const xD=M.createElement(kD,null);class ND extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Ji.Provider,{value:this.props.routeContext},M.createElement(CA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function OD(t){let{routeContext:e,match:n,children:r}=t,i=M.useContext(J_);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Ji.Provider,{value:e},r)}function DD(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Ze(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:p,errors:g}=n,w=h.route.loader&&p[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||w){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let g,w=!1,v=null,A=null;n&&(g=a&&h.route.id?a[h.route.id]:void 0,v=h.route.errorElement||xD,l&&(c<0&&p===0?(UD("route-fallback",!1),w=!0,A=null):c===p&&(w=!0,A=h.route.hydrateFallbackElement||null)));let I=e.concat(o.slice(0,p+1)),y=()=>{let T;return g?T=v:w?T=A:h.route.Component?T=M.createElement(h.route.Component,null):h.route.element?T=h.route.element:T=d,M.createElement(OD,{match:h,routeContext:{outlet:d,matches:I,isDataRoute:n!=null},children:T})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?M.createElement(ND,{location:n.location,revalidation:n.revalidation,component:v,error:g,children:y(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):y()},null)}var NA=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(NA||{}),Rh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Rh||{});function VD(t){let e=M.useContext(J_);return e||Ze(!1),e}function MD(t){let e=M.useContext(PD);return e||Ze(!1),e}function LD(t){let e=M.useContext(Ji);return e||Ze(!1),e}function OA(t){let e=LD(),n=e.matches[e.matches.length-1];return n.route.id||Ze(!1),n.route.id}function FD(){var t;let e=M.useContext(CA),n=MD(Rh.UseRouteError),r=OA(Rh.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function jD(){let{router:t}=VD(NA.UseNavigateStable),e=OA(Rh.UseNavigateStable),n=M.useRef(!1);return kA(()=>{n.current=!0}),M.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,bu({fromRouteId:e},s)))},[t,e])}const EE={};function UD(t,e,n){!e&&!EE[t]&&(EE[t]=!0)}function $D(t){let{to:e,replace:n,state:r,relative:i}=t;Va()||Ze(!1);let{future:s,static:o}=M.useContext(Yi),{matches:a}=M.useContext(Ji),{pathname:l}=cc(),c=Sf(),d=Y_(e,Q_(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return M.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:i}),[c,h,i,n,r]),null}function Vl(t){Ze(!1)}function BD(t){let{basename:e="/",children:n=null,location:r,navigationType:i=_i.Pop,navigator:s,static:o=!1,future:a}=t;Va()&&Ze(!1);let l=e.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:l,navigator:s,static:o,future:bu({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Da(r));let{pathname:d="/",search:h="",hash:p="",state:g=null,key:w="default"}=r,v=M.useMemo(()=>{let A=H_(d,l);return A==null?null:{location:{pathname:A,search:h,hash:p,state:g,key:w},navigationType:i}},[l,d,h,p,g,w,i]);return v==null?null:M.createElement(Yi.Provider,{value:c},M.createElement(Tf.Provider,{children:n,value:v}))}function zD(t){let{children:e,location:n}=t;return RD(ny(e),n)}new Promise(()=>{});function ny(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,i)=>{if(!M.isValidElement(r))return;let s=[...e,i];if(r.type===M.Fragment){n.push.apply(n,ny(r.props.children,s));return}r.type!==Vl&&Ze(!1),!r.props.index||!r.props.children||Ze(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ny(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ry(){return ry=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ry.apply(this,arguments)}function qD(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function WD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function GD(t,e){return t.button===0&&(!e||e==="_self")&&!WD(t)}const KD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],HD="6";try{window.__reactRouterVersion=HD}catch{}const QD="startTransition",TE=nh[QD];function YD(t){let{basename:e,children:n,future:r,window:i}=t,s=M.useRef();s.current==null&&(s.current=eD({window:i,v5Compat:!0}));let o=s.current,[a,l]=M.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=M.useCallback(h=>{c&&TE?TE(()=>l(h)):l(h)},[l,c]);return M.useLayoutEffect(()=>o.listen(d),[o,d]),M.createElement(BD,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const JD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",XD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,DA=M.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,unstable_viewTransition:h}=e,p=qD(e,KD),{basename:g}=M.useContext(Yi),w,v=!1;if(typeof c=="string"&&XD.test(c)&&(w=c,JD))try{let T=new URL(window.location.href),k=c.startsWith("//")?new URL(T.protocol+c):new URL(c),V=H_(k.pathname,g);k.origin===T.origin&&V!=null?c=V+k.search+k.hash:v=!0}catch{}let A=AD(c,{relative:i}),I=ZD(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,unstable_viewTransition:h});function y(T){r&&r(T),T.defaultPrevented||I(T)}return M.createElement("a",ry({},p,{href:w||A,onClick:v||s?r:y,ref:n,target:l}))});var SE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(SE||(SE={}));var PE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(PE||(PE={}));function ZD(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=Sf(),c=cc(),d=xA(t,{relative:o});return M.useCallback(h=>{if(GD(h,n)){h.preventDefault();let p=r!==void 0?r:bh(c)===bh(d);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,d,r,i,n,t,s,o,a])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},eV=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},MA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(n[d],n[h],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new tV;const p=s<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),h!==64){const w=c<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nV=function(t){const e=VA(t);return MA.encodeByteArray(e,!0)},Ch=function(t){return nV(t).replace(/\./g,"")},LA=function(t){try{return MA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function kh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!rV(n)||(t[n]=kh(t[n],e[n]));return t}function rV(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=()=>FA().__FIREBASE_DEFAULTS__,sV=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LA(t[1]);return e&&JSON.parse(e)},X_=()=>{try{return iV()||sV()||oV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jA=()=>{var t;return(t=X_())===null||t===void 0?void 0:t.config},aV=t=>{var e;return(e=X_())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Ch(JSON.stringify(n)),Ch(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function Z_(){var t;const e=(t=X_())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dV(){return typeof window<"u"||UA()}function UA(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function hV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $A(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ev(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BA(){const t=je();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zA(){return!Z_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ru(){try{return typeof indexedDB=="object"}catch{return!1}}function fV(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV="FirebaseError";class qt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pV,Object.setPrototypeOf(this,qt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zs.prototype.create)}}class Zs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?mV(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new qt(i,a,r)}}function mV(t,e){return t.replace(gV,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const gV=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function yV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(bE(s)&&bE(o)){if(!Cu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function bE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function jo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ml(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function qA(t,e){const n=new _V(t,e);return n.subscribe.bind(n)}class _V{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");vV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Dm),i.error===void 0&&(i.error=Dm),i.complete===void 0&&(i.complete=Dm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Dm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t){return t&&t._delegate?t._delegate:t}class _r{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wV=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new lV;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EV(e))try{this.getOrInitializeService({instanceIdentifier:hs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hs){return this.instances.has(e)}getOptions(e=hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=hs){return this.component?this.component.multipleInstances?e:hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function IV(t){return t===hs?void 0:t}function EV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=[];var re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(re||(re={}));const GA={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},TV=re.INFO,SV={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},PV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=SV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pf{constructor(e){this.name=e,this._logLevel=TV,this._logHandler=PV,this._userLogHandler=null,tv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}}function AV(t){tv.forEach(e=>{e.setLogLevel(t)})}function bV(t,e){for(const n of tv){let r=null;e&&e.level&&(r=GA[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:re[s].toLowerCase(),message:a,args:o,type:i.name})}}}const RV=(t,e)=>e.some(n=>t instanceof n);let RE,CE;function CV(){return RE||(RE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kV(){return CE||(CE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const KA=new WeakMap,iy=new WeakMap,HA=new WeakMap,Vm=new WeakMap,nv=new WeakMap;function xV(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(xi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&KA.set(n,t)}).catch(()=>{}),nv.set(e,t),e}function NV(t){if(iy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});iy.set(t,e)}let sy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return iy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||HA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OV(t){sy=t(sy)}function DV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mm(this),e,...n);return HA.set(r,e.sort?e.sort():[e]),xi(r)}:kV().includes(t)?function(...e){return t.apply(Mm(this),e),xi(KA.get(this))}:function(...e){return xi(t.apply(Mm(this),e))}}function VV(t){return typeof t=="function"?DV(t):(t instanceof IDBTransaction&&NV(t),RV(t,CV())?new Proxy(t,sy):t)}function xi(t){if(t instanceof IDBRequest)return xV(t);if(Vm.has(t))return Vm.get(t);const e=VV(t);return e!==t&&(Vm.set(t,e),nv.set(e,t)),e}const Mm=t=>nv.get(t);function MV(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=xi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(xi(o.result),l.oldVersion,l.newVersion,xi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const LV=["get","getKey","getAll","getAllKeys","count"],FV=["put","add","delete","clear"],Lm=new Map;function kE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lm.get(e))return Lm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=FV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||LV.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Lm.set(e,s),s}OV(t=>({...t,get:(e,n,r)=>kE(e,n)||t.get(e,n,r),has:(e,n)=>!!kE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(UV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function UV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xh="@firebase/app",oy="0.10.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new Pf("@firebase/app"),$V="@firebase/app-compat",BV="@firebase/analytics-compat",zV="@firebase/analytics",qV="@firebase/app-check-compat",WV="@firebase/app-check",GV="@firebase/auth",KV="@firebase/auth-compat",HV="@firebase/database",QV="@firebase/database-compat",YV="@firebase/functions",JV="@firebase/functions-compat",XV="@firebase/installations",ZV="@firebase/installations-compat",eM="@firebase/messaging",tM="@firebase/messaging-compat",nM="@firebase/performance",rM="@firebase/performance-compat",iM="@firebase/remote-config",sM="@firebase/remote-config-compat",oM="@firebase/storage",aM="@firebase/storage-compat",lM="@firebase/firestore",uM="@firebase/vertexai-preview",cM="@firebase/firestore-compat",dM="firebase",hM="10.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="[DEFAULT]",fM={[xh]:"fire-core",[$V]:"fire-core-compat",[zV]:"fire-analytics",[BV]:"fire-analytics-compat",[WV]:"fire-app-check",[qV]:"fire-app-check-compat",[GV]:"fire-auth",[KV]:"fire-auth-compat",[HV]:"fire-rtdb",[QV]:"fire-rtdb-compat",[YV]:"fire-fn",[JV]:"fire-fn-compat",[XV]:"fire-iid",[ZV]:"fire-iid-compat",[eM]:"fire-fcm",[tM]:"fire-fcm-compat",[nM]:"fire-perf",[rM]:"fire-perf-compat",[iM]:"fire-rc",[sM]:"fire-rc-compat",[oM]:"fire-gcs",[aM]:"fire-gcs-compat",[lM]:"fire-fst",[cM]:"fire-fst-compat",[uM]:"fire-vertex","fire-js":"fire-js",[dM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new Map,ha=new Map,fa=new Map;function ku(t,e){try{t.container.addComponent(e)}catch(n){Br.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function QA(t,e){t.container.addOrOverwriteComponent(e)}function Li(t){const e=t.name;if(fa.has(e))return Br.debug(`There were multiple attempts to register component ${e}.`),!1;fa.set(e,t);for(const n of Mi.values())ku(n,t);for(const n of ha.values())ku(n,t);return!0}function YA(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function pM(t,e,n=Vi){YA(t,e).clearInstance(n)}function JA(t){return t.options!==void 0}function qe(t){return t.settings!==void 0}function mM(){fa.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kn=new Zs("app","Firebase",gM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XA=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM extends XA{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Kn(xh,oy,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){iv(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw kn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=hM;function rv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Vi,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw kn.create("bad-app-name",{appName:String(i)});if(n||(n=jA()),!n)throw kn.create("no-options");const s=Mi.get(i);if(s){if(Cu(n,s.options)&&Cu(r,s.config))return s;throw kn.create("duplicate-app",{appName:i})}const o=new WA(i);for(const l of fa.values())o.addComponent(l);const a=new XA(n,r,o);return Mi.set(i,a),a}function _M(t,e){if(dV()&&!UA())throw kn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;JA(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=c=>[...c].reduce((d,h)=>Math.imul(31,d)+h.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw kn.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=ha.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new WA(s);for(const c of fa.values())a.addComponent(c);const l=new yM(n,e,s,a);return ha.set(s,l),l}function vM(t=Vi){const e=Mi.get(t);if(!e&&t===Vi&&jA())return rv();if(!e)throw kn.create("no-app",{appName:t});return e}function wM(){return Array.from(Mi.values())}async function iv(t){let e=!1;const n=t.name;Mi.has(n)?(e=!0,Mi.delete(n)):ha.has(n)&&t.decRefCount()<=0&&(ha.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Kn(t,e,n){var r;let i=(r=fM[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Br.warn(a.join(" "));return}Li(new _r(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function ZA(t,e){if(t!==null&&typeof t!="function")throw kn.create("invalid-log-argument");bV(t,e)}function eb(t){AV(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM="firebase-heartbeat-database",EM=1,xu="firebase-heartbeat-store";let Fm=null;function tb(){return Fm||(Fm=MV(IM,EM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xu)}catch(n){console.warn(n)}}}}).catch(t=>{throw kn.create("idb-open",{originalErrorMessage:t.message})})),Fm}async function TM(t){try{const n=(await tb()).transaction(xu),r=await n.objectStore(xu).get(nb(t));return await n.done,r}catch(e){if(e instanceof qt)Br.warn(e.message);else{const n=kn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Br.warn(n.message)}}}async function xE(t,e){try{const r=(await tb()).transaction(xu,"readwrite");await r.objectStore(xu).put(e,nb(t)),await r.done}catch(n){if(n instanceof qt)Br.warn(n.message);else{const r=kn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Br.warn(r.message)}}}function nb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=1024,PM=30*24*60*60*1e3;class AM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new RM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=NE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=PM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Br.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=NE(),{heartbeatsToSend:r,unsentEntries:i}=bM(this._heartbeatsCache.heartbeats),s=Ch(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Br.warn(n),""}}}function NE(){return new Date().toISOString().substring(0,10)}function bM(t,e=SM){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),OE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),OE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class RM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ru()?fV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await TM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return xE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return xE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function OE(t){return Ch(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(t){Li(new _r("platform-logger",e=>new jV(e),"PRIVATE")),Li(new _r("heartbeat",e=>new AM(e),"PRIVATE")),Kn(xh,oy,t),Kn(xh,oy,"esm2017"),Kn("fire-js","")}CM("");const kM=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:qt,SDK_VERSION:Xi,_DEFAULT_ENTRY_NAME:Vi,_addComponent:ku,_addOrOverwriteComponent:QA,_apps:Mi,_clearComponents:mM,_components:fa,_getProvider:YA,_isFirebaseApp:JA,_isFirebaseServerApp:qe,_registerComponent:Li,_removeServiceInstance:pM,_serverApps:ha,deleteApp:iv,getApp:vM,getApps:wM,initializeApp:rv,initializeServerApp:_M,onLog:ZA,registerVersion:Kn,setLogLevel:eb},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e,n){this._delegate=e,this.firebase=n,ku(e,new _r("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),iv(this._delegate)))}_getService(e,n=Vi){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Vi){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){ku(this._delegate,e)}_addOrOverwriteComponent(e){QA(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},DE=new Zs("app-compat","Firebase",NM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Kn,setLogLevel:eb,onLog:ZA,apps:null,SDK_VERSION:Xi,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:kM}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||Vi,!AE(e,c))throw DE.create("no-app",{appName:c});return e[c]}i.App=t;function s(c,d={}){const h=rv(c,d);if(AE(e,h.name))return e[h.name];const p=new t(h,n);return e[h.name]=p,p}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const d=c.name,h=d.replace("-compat","");if(Li(c)&&c.type==="PUBLIC"){const p=(g=i())=>{if(typeof g[h]!="function")throw DE.create("invalid-app-argument",{appName:d});return g[h]()};c.serviceProps!==void 0&&kh(p,c.serviceProps),n[h]=p,t.prototype[h]=function(...g){return this._getService.bind(this,d).apply(this,c.multipleInstances?g:[])}}return c.type==="PUBLIC"?n[h]:null}function l(c,d){return d==="serverAuth"?null:d}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(){const t=OM(xM);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:rb,extendNamespace:e,createSubscribe:qA,ErrorFactory:Zs,deepExtend:kh});function e(n){kh(t,n)}return t}const DM=rb();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE=new Pf("@firebase/app-compat"),VM="@firebase/app-compat",MM="0.2.41";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(t){Kn(VM,MM,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=FA();if(t.firebase!==void 0){VE.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&VE.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const On=DM;LM();function sv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const Il={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ho={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function ib(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jM=FM,UM=ib,sb=new Zs("auth","Firebase",ib());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh=new Pf("@firebase/auth");function $M(t,...e){Nh.logLevel<=re.WARN&&Nh.warn(`Auth (${Xi}): ${t}`,...e)}function Fd(t,...e){Nh.logLevel<=re.ERROR&&Nh.error(`Auth (${Xi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t,...e){throw av(t,...e)}function ct(t,...e){return av(t,...e)}function ov(t,e,n){const r=Object.assign(Object.assign({},UM()),{[e]:n});return new Zs("auth","Firebase",r).create(e,{appName:t.name})}function gt(t){return ov(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function La(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&bt(t,"argument-error"),ov(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function av(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return sb.create(t,...e)}function z(t,e,...n){if(!t)throw av(e,...n)}function lr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Fd(e),new Error(e)}function Qn(t,e){t||lr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function lv(){return ME()==="http:"||ME()==="https:"}function ME(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lv()||$A()||"connection"in navigator)?navigator.onLine:!0}function zM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qn(n>e,"Short delay should be less than long delay!"),this.isMobile=cV()||ev()}get(){return BM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(t,e){Qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=new dc(3e4,6e4);function He(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Qe(t,e,n,r,i={}){return ab(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ma(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return hV()||(c.referrerPolicy="no-referrer"),ob.fetch()(lb(t,t.config.apiHost,n,a),c)})}async function ab(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},qM),e);try{const i=new KM(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ll(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ll(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ll(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ll(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw ov(t,d,c);bt(t,d)}}catch(i){if(i instanceof qt)throw i;bt(t,"network-request-failed",{message:String(i)})}}async function Qr(t,e,n,r,i={}){const s=await Qe(t,e,n,r,i);return"mfaPendingCredential"in s&&bt(t,"multi-factor-auth-required",{_serverResponse:s}),s}function lb(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?uv(t.config,i):`${t.config.apiScheme}://${i}`}function GM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class KM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ct(this.auth,"network-request-failed")),WM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ll(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ct(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t){return t!==void 0&&t.getResponse!==void 0}function FE(t){return t!==void 0&&t.enterprise!==void 0}class HM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return GM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QM(t){return(await Qe(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function YM(t,e){return Qe(t,"GET","/v2/recaptchaConfig",He(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JM(t,e){return Qe(t,"POST","/v1/accounts:delete",e)}async function XM(t,e){return Qe(t,"POST","/v1/accounts:update",e)}async function ub(t,e){return Qe(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZM(t,e=!1){const n=Z(t),r=await n.getIdToken(e),i=Af(r);z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Zl(jm(i.auth_time)),issuedAtTime:Zl(jm(i.iat)),expirationTime:Zl(jm(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function jm(t){return Number(t)*1e3}function Af(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Fd("JWT malformed, contained fewer than 3 sections"),null;try{const i=LA(n);return i?JSON.parse(i):(Fd("Failed to decode base64 JWT payload"),null)}catch(i){return Fd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function jE(t){const e=Af(t);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zr(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qt&&eL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function eL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zl(this.lastLoginAt),this.creationTime=Zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ou(t){var e;const n=t.auth,r=await t.getIdToken(),i=await zr(t,ub(n,{idToken:r}));z(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?cb(s.providerUserInfo):[],a=rL(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ay(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function nL(t){const e=Z(t);await Ou(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function cb(t){return t.map(e=>{var{providerId:n}=e,r=sv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iL(t,e){const n=await ab(t,{},async()=>{const r=Ma({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=lb(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ob.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sL(t,e){return Qe(t,"POST","/v2/accounts:revokeToken",He(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){z(e.length!==0,"internal-error");const n=jE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await iL(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ko;return r&&(z(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(z(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ko,this.toJSON())}_performRefresh(){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(t,e){z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Or{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=sv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ay(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await zr(this,this.stsTokenManager.getToken(this.auth,e));return z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ZM(this,e)}reload(){return nL(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Or(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ou(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qe(this.auth.app))return Promise.reject(gt(this.auth));const e=await this.getIdToken();return await zr(this,JM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,I=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:T,emailVerified:k,isAnonymous:V,providerData:j,stsTokenManager:S}=n;z(T&&S,e,"internal-error");const E=Ko.fromJSON(this.name,S);z(typeof T=="string",e,"internal-error"),ii(h,e.name),ii(p,e.name),z(typeof k=="boolean",e,"internal-error"),z(typeof V=="boolean",e,"internal-error"),ii(g,e.name),ii(w,e.name),ii(v,e.name),ii(A,e.name),ii(I,e.name),ii(y,e.name);const P=new Or({uid:T,auth:e,email:p,emailVerified:k,displayName:h,isAnonymous:V,photoURL:w,phoneNumber:g,tenantId:v,stsTokenManager:E,createdAt:I,lastLoginAt:y});return j&&Array.isArray(j)&&(P.providerData=j.map(b=>Object.assign({},b))),A&&(P._redirectEventId=A),P}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ko;i.updateFromServerResponse(n);const s=new Or({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ou(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];z(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?cb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ko;a.updateFromIdToken(r);const l=new Or({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ay(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE=new Map;function fn(t){Qn(t instanceof Function,"Expected a class definition");let e=UE.get(t);return e?(Qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,UE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}db.type="NONE";const pa=db;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(t,e,n){return`firebase:${t}:${e}:${n}`}class Ho{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Rs(this.userKey,i.apiKey,s),this.fullPersistenceKey=Rs("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Or._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ho(fn(pa),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||fn(pa);const o=Rs(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=Or._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ho(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ho(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gb(e))return"Blackberry";if(yb(e))return"Webos";if(fb(e))return"Safari";if((e.includes("chrome/")||pb(e))&&!e.includes("edge/"))return"Chrome";if(hc(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function hb(t=je()){return/firefox\//i.test(t)}function fb(t=je()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pb(t=je()){return/crios\//i.test(t)}function mb(t=je()){return/iemobile/i.test(t)}function hc(t=je()){return/android/i.test(t)}function gb(t=je()){return/blackberry/i.test(t)}function yb(t=je()){return/webos/i.test(t)}function fc(t=je()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function oL(t=je()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function aL(t=je()){var e;return fc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lL(){return BA()&&document.documentMode===10}function _b(t=je()){return fc(t)||hc(t)||yb(t)||gb(t)||/windows phone/i.test(t)||mb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(t,e=[]){let n;switch(t){case"Browser":n=$E(je());break;case"Worker":n=`${$E(je())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cL(t,e={}){return Qe(t,"GET","/v2/passwordPolicy",He(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=6;class hL{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:dL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new BE(this),this.idTokenSubscription=new BE(this),this.beforeStateQueue=new uL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ho.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ub(this,{idToken:e}),r=await Or._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(qe(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ou(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qe(this.app))return Promise.reject(gt(this));const n=e?Z(e):null;return n&&z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qe(this.app)?Promise.reject(gt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qe(this.app)?Promise.reject(gt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cL(this),n=new hL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fn(e)||this._popupRedirectResolver;z(n,this,"argument-error"),this.redirectPersistenceManager=await Ho.create(this,[fn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(z(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&$M(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function We(t){return Z(t)}class BE{constructor(e){this.auth=e,this.observer=null,this.addObserver=qA(n=>this.observer=n)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pL(t){pc=t}function cv(t){return pc.loadJS(t)}function mL(){return pc.recaptchaV2Script}function gL(){return pc.recaptchaEnterpriseScript}function yL(){return pc.gapiScript}function wb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const _L="recaptcha-enterprise",vL="NO_RECAPTCHA";class wL{constructor(e){this.type=_L,this.auth=We(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{YM(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new HM(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;FE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(vL)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&FE(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=gL();l.length!==0&&(l+=a),cv(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function zE(t,e,n,r=!1){const i=new wL(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Du(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await zE(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await zE(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}function IL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function EL(t,e,n){const r=We(t);z(r._canInitEmulator,r,"emulator-config-failed"),z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=Ib(e),{host:o,port:a}=TL(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||SL()}function Ib(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TL(t){const e=Ib(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:qE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:qE(o)}}}function qE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function SL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return lr("not implemented")}_getIdTokenResponse(e){return lr("not implemented")}_linkToIdToken(e,n){return lr("not implemented")}_getReauthenticationResolver(e){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eb(t,e){return Qe(t,"POST","/v1/accounts:resetPassword",He(t,e))}async function PL(t,e){return Qe(t,"POST","/v1/accounts:update",e)}async function AL(t,e){return Qe(t,"POST","/v1/accounts:signUp",e)}async function bL(t,e){return Qe(t,"POST","/v1/accounts:update",He(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RL(t,e){return Qr(t,"POST","/v1/accounts:signInWithPassword",He(t,e))}async function bf(t,e){return Qe(t,"POST","/v1/accounts:sendOobCode",He(t,e))}async function CL(t,e){return bf(t,e)}async function kL(t,e){return bf(t,e)}async function xL(t,e){return bf(t,e)}async function NL(t,e){return bf(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OL(t,e){return Qr(t,"POST","/v1/accounts:signInWithEmailLink",He(t,e))}async function DL(t,e){return Qr(t,"POST","/v1/accounts:signInWithEmailLink",He(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends Fa{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Vu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Vu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Du(e,n,"signInWithPassword",RL);case"emailLink":return OL(e,{email:this._email,oobCode:this._password});default:bt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Du(e,r,"signUpPassword",AL);case"emailLink":return DL(e,{idToken:n,email:this._email,oobCode:this._password});default:bt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lr(t,e){return Qr(t,"POST","/v1/accounts:signInWithIdp",He(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL="http://localhost";class vr extends Fa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new vr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):bt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=sv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new vr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Lr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Lr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Lr(e,n)}buildRequest(){const e={requestUri:VL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ma(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ML(t,e){return Qe(t,"POST","/v1/accounts:sendVerificationCode",He(t,e))}async function LL(t,e){return Qr(t,"POST","/v1/accounts:signInWithPhoneNumber",He(t,e))}async function FL(t,e){const n=await Qr(t,"POST","/v1/accounts:signInWithPhoneNumber",He(t,e));if(n.temporaryProof)throw Ll(t,"account-exists-with-different-credential",n);return n}const jL={USER_NOT_FOUND:"user-not-found"};async function UL(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Qr(t,"POST","/v1/accounts:signInWithPhoneNumber",He(t,n),jL)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends Fa{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Cs({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Cs({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return LL(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return FL(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return UL(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Cs({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BL(t){const e=jo(Ml(t)).link,n=e?jo(Ml(e)).deep_link_id:null,r=jo(Ml(t)).deep_link_id;return(r?jo(Ml(r)).link:null)||r||n||e||t}class Rf{constructor(e){var n,r,i,s,o,a;const l=jo(Ml(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=$L((i=l.mode)!==null&&i!==void 0?i:null);z(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=BL(e);try{return new Rf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(){this.providerId=Zi.PROVIDER_ID}static credential(e,n){return Vu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Rf.parseLink(n);return z(r,"argument-error"),Vu._fromEmailAndCode(e,r.code,r.tenantId)}}Zi.PROVIDER_ID="password";Zi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja extends Yr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Qo extends ja{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return z("providerId"in n&&"signInMethod"in n,"argument-error"),vr._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return z(e.idToken||e.accessToken,"argument-error"),vr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Qo.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Qo.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new Qo(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends ja{constructor(){super("facebook.com")}static credential(e){return vr._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";ir.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends ja{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return vr._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return sr.credential(n,r)}catch{return null}}}sr.GOOGLE_SIGN_IN_METHOD="google.com";sr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends ja{constructor(){super("github.com")}static credential(e){return vr._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.GITHUB_SIGN_IN_METHOD="github.com";or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL="http://localhost";class ma extends Fa{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Lr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Lr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Lr(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new ma(r,s)}static _create(e,n){return new ma(e,n)}buildRequest(){return{requestUri:zL,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL="saml.";class Oh extends Yr{constructor(e){z(e.startsWith(qL),"argument-error"),super(e)}static credentialFromResult(e){return Oh.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Oh.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=ma.fromJSON(e);return z(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return ma._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends ja{constructor(){super("twitter.com")}static credential(e,n){return vr._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ar.credential(n,r)}catch{return null}}}ar.TWITTER_SIGN_IN_METHOD="twitter.com";ar.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tb(t,e){return Qr(t,"POST","/v1/accounts:signUp",He(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Or._fromIdTokenResponse(e,r,i),o=WE(r);return new Dn({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=WE(r);return new Dn({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function WE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WL(t){var e;if(qe(t.app))return Promise.reject(gt(t));const n=We(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Dn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Tb(n,{returnSecureToken:!0}),i=await Dn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh extends qt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Dh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Dh(e,n,r,i)}}function Sb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Dh._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GL(t,e){const n=Z(t);await Cf(!0,n,e);const{providerUserInfo:r}=await XM(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=Pb(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function dv(t,e,n=!1){const r=await zr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Dn._forOperation(t,"link",r)}async function Cf(t,e,n){await Ou(e);const r=Pb(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";z(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ab(t,e,n=!1){const{auth:r}=t;if(qe(r.app))return Promise.reject(gt(r));const i="reauthenticate";try{const s=await zr(t,Sb(r,i,e,t),n);z(s.idToken,r,"internal-error");const o=Af(s.idToken);z(o,r,"internal-error");const{sub:a}=o;return z(t.uid===a,r,"user-mismatch"),Dn._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&bt(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bb(t,e,n=!1){if(qe(t.app))return Promise.reject(gt(t));const r="signIn",i=await Sb(t,r,e),s=await Dn._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function kf(t,e){return bb(We(t),e)}async function Rb(t,e){const n=Z(t);return await Cf(!1,n,e.providerId),dv(n,e)}async function Cb(t,e){return Ab(Z(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KL(t,e){return Qr(t,"POST","/v1/accounts:signInWithCustomToken",He(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HL(t,e){if(qe(t.app))return Promise.reject(gt(t));const n=We(t),r=await KL(n,{token:e,returnSecureToken:!0}),i=await Dn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?hv._fromServerResponse(e,n):"totpInfo"in n?fv._fromServerResponse(e,n):bt(e,"internal-error")}}class hv extends mc{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new hv(n)}}class fv extends mc{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new fv(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t,e,n){var r;z(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),z(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(z(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(z(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pv(t){const e=We(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function QL(t,e,n){const r=We(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&xf(r,i,n),await Du(r,i,"getOobCode",kL)}async function YL(t,e,n){await Eb(Z(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&pv(t),r})}async function JL(t,e){await bL(Z(t),{oobCode:e})}async function kb(t,e){const n=Z(t),r=await Eb(n,{oobCode:e}),i=r.requestType;switch(z(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":z(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":z(r.mfaInfo,n,"internal-error");default:z(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=mc._fromServerResponse(We(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function XL(t,e){const{data:n}=await kb(Z(t),e);return n.email}async function ZL(t,e,n){if(qe(t.app))return Promise.reject(gt(t));const r=We(t),o=await Du(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Tb).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&pv(t),l}),a=await Dn._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function eF(t,e,n){return qe(t.app)?Promise.reject(gt(t)):kf(Z(t),Zi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&pv(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tF(t,e,n){const r=We(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){z(a.handleCodeInApp,r,"argument-error"),a&&xf(r,o,a)}s(i,n),await Du(r,i,"getOobCode",xL)}function nF(t,e){const n=Rf.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function rF(t,e,n){if(qe(t.app))return Promise.reject(gt(t));const r=Z(t),i=Zi.credentialWithLink(e,n||Nu());return z(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),kf(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iF(t,e){return Qe(t,"POST","/v1/accounts:createAuthUri",He(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sF(t,e){const n=lv()?Nu():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await iF(Z(t),r);return i||[]}async function oF(t,e){const n=Z(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&xf(n.auth,i,e);const{email:s}=await CL(n.auth,i);s!==t.email&&await t.reload()}async function aF(t,e,n){const r=Z(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&xf(r.auth,s,n);const{email:o}=await NL(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lF(t,e){return Qe(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uF(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Z(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await zr(r,lF(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function cF(t,e){const n=Z(t);return qe(n.auth.app)?Promise.reject(gt(n.auth)):xb(n,e,null)}function dF(t,e){return xb(Z(t),null,e)}async function xb(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await zr(t,PL(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=Af(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Yo(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new fF(s,i);case"github.com":return new pF(s,i);case"google.com":return new mF(s,i);case"twitter.com":return new gF(s,i,t.screenName||null);case"custom":case"anonymous":return new Yo(s,null);default:return new Yo(s,r,i)}}class Yo{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class Nb extends Yo{constructor(e,n,r,i){super(e,n,r),this.username=i}}class fF extends Yo{constructor(e,n){super(e,"facebook.com",n)}}class pF extends Nb{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class mF extends Yo{constructor(e,n){super(e,"google.com",n)}}class gF extends Nb{constructor(e,n,r){super(e,"twitter.com",n,r)}}function yF(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:hF(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Ts("enroll",e,n)}static _fromMfaPendingCredential(e){return new Ts("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Ts._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Ts._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=We(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>mc._fromServerResponse(r,a));z(i.mfaPendingCredential,r,"internal-error");const o=Ts._fromMfaPendingCredential(i.mfaPendingCredential);return new mv(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const d=await Dn._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return z(n.user,r,"internal-error"),Dn._forOperation(n.user,n.operationType,c);default:bt(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function _F(t,e){var n;const r=Z(t),i=e;return z(e.customData.operationType,r,"argument-error"),z((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),mv._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vF(t,e){return Qe(t,"POST","/v2/accounts/mfaEnrollment:start",He(t,e))}function wF(t,e){return Qe(t,"POST","/v2/accounts/mfaEnrollment:finalize",He(t,e))}function IF(t,e){return Qe(t,"POST","/v2/accounts/mfaEnrollment:withdraw",He(t,e))}class gv{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>mc._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new gv(e)}async getSession(){return Ts._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await zr(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await zr(this.user,IF(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Um=new WeakMap;function EF(t){const e=Z(t);return Um.has(e)||Um.set(e,gv._fromUser(e)),Um.get(e)}const Vh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vh,"1"),this.storage.removeItem(Vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=1e3,SF=10;class Db extends Ob{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_b(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);lL()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,SF):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},TF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Db.type="LOCAL";const yv=Db;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb extends Ob{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Vb.type="SESSION";const Ms=Vb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Nf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await PF(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=gc("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(){return window}function bF(t){it().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(){return typeof it().WorkerGlobalScope<"u"&&typeof it().importScripts=="function"}async function RF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kF(){return _v()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="firebaseLocalStorageDb",xF=1,Mh="firebaseLocalStorage",Lb="fbase_key";class yc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Of(t,e){return t.transaction([Mh],e?"readwrite":"readonly").objectStore(Mh)}function NF(){const t=indexedDB.deleteDatabase(Mb);return new yc(t).toPromise()}function ly(){const t=indexedDB.open(Mb,xF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Mh,{keyPath:Lb})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Mh)?e(r):(r.close(),await NF(),e(await ly()))})})}async function GE(t,e,n){const r=Of(t,!0).put({[Lb]:e,value:n});return new yc(r).toPromise()}async function OF(t,e){const n=Of(t,!1).get(e),r=await new yc(n).toPromise();return r===void 0?null:r.value}function KE(t,e){const n=Of(t,!0).delete(e);return new yc(n).toPromise()}const DF=800,VF=3;class Fb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ly(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>VF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _v()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nf._getInstance(kF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await RF(),!this.activeServiceWorker)return;this.sender=new AF(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ly();return await GE(e,Vh,"1"),await KE(e,Vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>GE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>OF(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>KE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Of(i,!1).getAll();return new yc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Fb.type="LOCAL";const Mu=Fb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MF(t,e){return Qe(t,"POST","/v2/accounts/mfaSignIn:start",He(t,e))}function LF(t,e){return Qe(t,"POST","/v2/accounts/mfaSignIn:finalize",He(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF=500,jF=6e4,yd=1e12;class UF{constructor(e){this.auth=e,this.counter=yd,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new $F(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||yd;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||yd;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||yd;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class $F{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;z(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=BF(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},jF)},FF))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function BF(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m=wb("rcb"),zF=new dc(3e4,6e4);class qF{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=it().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return z(WF(n),e,"argument-error"),this.shouldResolveImmediately(n)&&LE(it().grecaptcha)?Promise.resolve(it().grecaptcha):new Promise((r,i)=>{const s=it().setTimeout(()=>{i(ct(e,"network-request-failed"))},zF.get());it()[$m]=()=>{it().clearTimeout(s),delete it()[$m];const a=it().grecaptcha;if(!a||!LE(a)){i(ct(e,"internal-error"));return}const l=a.render;a.render=(c,d)=>{const h=l(c,d);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${mL()}?${Ma({onload:$m,render:"explicit",hl:n})}`;cv(o).catch(()=>{clearTimeout(s),i(ct(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=it().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function WF(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class GF{async load(e){return new UF(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="recaptcha",KF={theme:"light",type:"image"};let HF=class{constructor(e,n,r=Object.assign({},KF)){this.parameters=r,this.type=jb,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=We(e),this.isInvisible=this.parameters.size==="invisible",z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;z(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new GF:new qF,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){z(!this.parameters.sitekey,this.auth,"argument-error"),z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=it()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){z(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){z(lv()&&!_v(),this.auth,"internal-error"),await QF(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await QM(this.auth);z(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function QF(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Cs._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function YF(t,e,n){if(qe(t.app))return Promise.reject(gt(t));const r=We(t),i=await Df(r,e,Z(n));return new vv(i,s=>kf(r,s))}async function JF(t,e,n){const r=Z(t);await Cf(!1,r,"phone");const i=await Df(r.auth,e,Z(n));return new vv(i,s=>Rb(r,s))}async function XF(t,e,n){const r=Z(t);if(qe(r.auth.app))return Promise.reject(gt(r.auth));const i=await Df(r.auth,e,Z(n));return new vv(i,s=>Cb(r,s))}async function Df(t,e,n){var r;const i=await n.verify();try{z(typeof i=="string",t,"argument-error"),z(n.type===jb,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return z(o.type==="enroll",t,"internal-error"),(await vF(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{z(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return z(a,t,"missing-multi-factor-info"),(await MF(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await ML(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function ZF(t,e){const n=Z(t);if(qe(n.auth.app))return Promise.reject(gt(n.auth));await dv(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ls=class jd{constructor(e){this.providerId=jd.PROVIDER_ID,this.auth=We(e)}verifyPhoneNumber(e,n){return Df(this.auth,e,Z(n))}static credential(e,n){return Cs._fromVerification(e,n)}static credentialFromResult(e){const n=e;return jd.credentialFromTaggedObject(n)}static credentialFromError(e){return jd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Cs._fromTokenResponse(n,r):null}};Ls.PROVIDER_ID="phone";Ls.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t,e){return e?fn(e):(z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv extends Fa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Lr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Lr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function e4(t){return bb(t.auth,new wv(t),t.bypassAuthState)}function t4(t){const{auth:e,user:n}=t;return z(n,e,"internal-error"),Ab(n,new wv(t),t.bypassAuthState)}async function n4(t){const{auth:e,user:n}=t;return z(n,e,"internal-error"),dv(n,new wv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return e4;case"linkViaPopup":case"linkViaRedirect":return n4;case"reauthViaPopup":case"reauthViaRedirect":return t4;default:bt(this.auth,"internal-error")}}resolve(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=new dc(2e3,1e4);async function i4(t,e,n){if(qe(t.app))return Promise.reject(ct(t,"operation-not-supported-in-this-environment"));const r=We(t);La(t,e,Yr);const i=eo(r,n);return new Dr(r,"signInViaPopup",e,i).executeNotNull()}async function s4(t,e,n){const r=Z(t);if(qe(r.auth.app))return Promise.reject(ct(r.auth,"operation-not-supported-in-this-environment"));La(r.auth,e,Yr);const i=eo(r.auth,n);return new Dr(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function o4(t,e,n){const r=Z(t);La(r.auth,e,Yr);const i=eo(r.auth,n);return new Dr(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Dr extends Ub{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Dr.currentPopupAction&&Dr.currentPopupAction.cancel(),Dr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return z(e,this.auth,"internal-error"),e}async onExecution(){Qn(this.filter.length===1,"Popup operations only handle one event");const e=gc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ct(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ct(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Dr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ct(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,r4.get())};e()}}Dr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4="pendingRedirect",eu=new Map;class l4 extends Ub{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=eu.get(this.auth._key());if(!e){try{const r=await u4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}eu.set(this.auth._key(),e)}return this.bypassAuthState||eu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function u4(t,e){const n=Bb(e),r=$b(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Iv(t,e){return $b(t)._set(Bb(e),"true")}function c4(){eu.clear()}function Ev(t,e){eu.set(t._key(),e)}function $b(t){return fn(t._redirectPersistence)}function Bb(t){return Rs(a4,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(t,e,n){return h4(t,e,n)}async function h4(t,e,n){if(qe(t.app))return Promise.reject(gt(t));const r=We(t);La(t,e,Yr),await r._initializationPromise;const i=eo(r,n);return await Iv(i,r),i._openRedirect(r,e,"signInViaRedirect")}function f4(t,e,n){return p4(t,e,n)}async function p4(t,e,n){const r=Z(t);if(La(r.auth,e,Yr),qe(r.auth.app))return Promise.reject(gt(r.auth));await r.auth._initializationPromise;const i=eo(r.auth,n);await Iv(i,r.auth);const s=await zb(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function m4(t,e,n){return g4(t,e,n)}async function g4(t,e,n){const r=Z(t);La(r.auth,e,Yr),await r.auth._initializationPromise;const i=eo(r.auth,n);await Cf(!1,r,e.providerId),await Iv(i,r.auth);const s=await zb(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function y4(t,e){return await We(t)._initializationPromise,Vf(t,e,!1)}async function Vf(t,e,n=!1){if(qe(t.app))return Promise.reject(gt(t));const r=We(t),i=eo(r,e),o=await new l4(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function zb(t){const e=gc(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=10*60*1e3;class qb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!v4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Wb(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ct(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_4&&this.cachedEventUids.clear(),this.cachedEventUids.has(HE(e))}saveEventToCache(e){this.cachedEventUids.add(HE(e)),this.lastProcessedEventTime=Date.now()}}function HE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Wb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function v4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gb(t,e={}){return Qe(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,I4=/^https?/;async function E4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Gb(t);for(const n of e)try{if(T4(n))return}catch{}bt(t,"unauthorized-domain")}function T4(t){const e=Nu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!I4.test(n))return!1;if(w4.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=new dc(3e4,6e4);function QE(){const t=it().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function P4(t){return new Promise((e,n)=>{var r,i,s;function o(){QE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QE(),n(ct(t,"network-request-failed"))},timeout:S4.get()})}if(!((i=(r=it().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=it().gapi)===null||s===void 0)&&s.load)o();else{const a=wb("iframefcb");return it()[a]=()=>{gapi.load?o():n(ct(t,"network-request-failed"))},cv(`${yL()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Ud=null,e})}let Ud=null;function A4(t){return Ud=Ud||P4(t),Ud}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=new dc(5e3,15e3),R4="__/auth/iframe",C4="emulator/auth/iframe",k4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},x4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function N4(t){const e=t.config;z(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?uv(e,C4):`https://${t.config.authDomain}/${R4}`,r={apiKey:e.apiKey,appName:t.name,v:Xi},i=x4.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ma(r).slice(1)}`}async function O4(t){const e=await A4(t),n=it().gapi;return z(n,t,"internal-error"),e.open({where:document.body,url:N4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:k4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ct(t,"network-request-failed"),a=it().setTimeout(()=>{s(o)},b4.get());function l(){it().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},V4=500,M4=600,L4="_blank",F4="http://localhost";class YE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function j4(t,e,n,r=V4,i=M4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},D4),{width:r.toString(),height:i.toString(),top:s,left:o}),c=je().toLowerCase();n&&(a=pb(c)?L4:n),hb(c)&&(e=e||F4,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[g,w])=>`${p}${g}=${w},`,"");if(aL(c)&&a!=="_self")return U4(e||"",a),new YE(null);const h=window.open(e||"",a,d);z(h,t,"popup-blocked");try{h.focus()}catch{}return new YE(h)}function U4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4="__/auth/handler",B4="emulator/auth/handler",z4=encodeURIComponent("fac");async function uy(t,e,n,r,i,s){z(t.config.authDomain,t,"auth-domain-config-required"),z(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Xi,eventId:i};if(e instanceof Yr){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",yV(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))o[d]=h}if(e instanceof ja){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${z4}=${encodeURIComponent(l)}`:"";return`${q4(t)}?${Ma(a).slice(1)}${c}`}function q4({config:t}){return t.emulator?uv(t,B4):`https://${t.authDomain}/${$4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="webStorageSupport";class W4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ms,this._completeRedirectFn=Vf,this._overrideRedirectResult=Ev}async _openPopup(e,n,r,i){var s;Qn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await uy(e,n,r,Nu(),i);return j4(e,o,gc())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await uy(e,n,r,Nu(),i);return bF(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Qn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await O4(e),r=new qb(e);return n.register("authEvent",i=>(z(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bm,{type:Bm},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Bm];o!==void 0&&n(!!o),bt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=E4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _b()||fb()||fc()}}const G4=W4;class K4{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return lr("unexpected MultiFactorSessionType")}}}class Tv extends K4{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Tv(e)}_finalizeEnroll(e,n,r){return wF(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return LF(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Kb{constructor(){}static assertion(e){return Tv._fromCredential(e)}}Kb.FACTOR_ID="phone";var JE="@firebase/auth",XE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Y4(t){Li(new _r("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;z(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vb(t)},c=new fL(r,i,s,l);return IL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Li(new _r("auth-internal",e=>{const n=We(e.getProvider("auth").getImmediate());return(r=>new H4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kn(JE,XE,Q4(t)),Kn(JE,XE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=5*60;aV("authIdTokenMaxAge");function X4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}pL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ct("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",X4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Y4("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=2e3;async function e5(t,e,n){var r;const{BuildInfo:i}=Fs();Qn(e.sessionId,"AuthEvent did not contain a session ID");const s=await s5(e.sessionId),o={};return fc()?o.ibi=i.packageName:hc()?o.apn=i.packageName:bt(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,uy(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function t5(t){const{BuildInfo:e}=Fs(),n={};fc()?n.iosBundleId=e.packageName:hc()?n.androidPackageName=e.packageName:bt(t,"operation-not-supported-in-this-environment"),await Gb(t,n)}function n5(t){const{cordova:e}=Fs();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,oL()?"_blank":"_system","location=yes"),n(i)})})}async function r5(t,e,n){const{cordova:r}=Fs();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var h;s();const p=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof p=="function"&&p(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(ct(t,"redirect-cancelled-by-user"))},Z4))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),hc()&&document.addEventListener("visibilitychange",d,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",d,!1),a&&window.clearTimeout(a)}})}finally{i()}}function i5(t){var e,n,r,i,s,o,a,l,c,d;const h=Fs();z(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),z(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),z(typeof((s=(i=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z(typeof((l=(a=(o=h==null?void 0:h.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z(typeof((d=(c=h==null?void 0:h.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||d===void 0?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function s5(t){const e=o5(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function o5(t){if(Qn(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5=20;class l5 extends qb{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function u5(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:h5(),postBody:null,tenantId:t.tenantId,error:ct(t,"no-auth-event")}}function c5(t,e){return cy()._set(dy(t),e)}async function ZE(t){const e=await cy()._get(dy(t));return e&&await cy()._remove(dy(t)),e}function d5(t,e){var n,r;const i=p5(e);if(i.includes("/__/auth/callback")){const s=$d(i),o=s.firebaseError?f5(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?ct(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function h5(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<a5;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function cy(){return fn(yv)}function dy(t){return Rs("authEvent",t.config.apiKey,t.name)}function f5(t){try{return JSON.parse(t)}catch{return null}}function p5(t){const e=$d(t),n=e.link?decodeURIComponent(e.link):void 0,r=$d(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return $d(i).link||i||r||n||t}function $d(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return jo(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=500;class g5{constructor(){this._redirectPersistence=Ms,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Vf,this._overrideRedirectResult=Ev}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new l5(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){bt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){i5(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),c4(),await this._originValidation(e);const o=u5(e,r,i);await c5(e,o);const a=await e5(e,o,n),l=await n5(a);return r5(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=t5(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=Fs(),o=setTimeout(async()=>{await ZE(e),n.onEvent(eT())},m5),a=async d=>{clearTimeout(o);const h=await ZE(e);let p=null;h&&(d!=null&&d.url)&&(p=d5(h,d.url)),n.onEvent(p||eT())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,c=`${s.packageName.toLowerCase()}://`;Fs().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(c)&&a({url:d}),typeof l=="function")try{l(d)}catch(h){console.error(h)}}}}const y5=g5;function eT(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ct("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(t,e){We(t)._logFramework(e)}var v5="@firebase/auth-compat",w5="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5=1e3;function tu(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function E5(){return tu()==="http:"||tu()==="https:"}function Hb(t=je()){return!!((tu()==="file:"||tu()==="ionic:"||tu()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function T5(){return ev()||Z_()}function S5(){return BA()&&(document==null?void 0:document.documentMode)===11}function P5(t=je()){return/Edge\/\d+/.test(t)}function A5(t=je()){return S5()||P5(t)}function Qb(){try{const t=self.localStorage,e=gc();if(t)return t.setItem(e,"1"),t.removeItem(e),A5()?Ru():!0}catch{return Sv()&&Ru()}return!1}function Sv(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function zm(){return(E5()||$A()||Hb())&&!T5()&&Qb()&&!Sv()}function Yb(){return Hb()&&typeof document<"u"}async function b5(){return Yb()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},I5);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function R5(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn={LOCAL:"local",NONE:"none",SESSION:"session"},El=z,Jb="persistence";function C5(t,e){if(El(Object.values(cn).includes(e),t,"invalid-persistence-type"),ev()){El(e!==cn.SESSION,t,"unsupported-persistence-type");return}if(Z_()){El(e===cn.NONE,t,"unsupported-persistence-type");return}if(Sv()){El(e===cn.NONE||e===cn.LOCAL&&Ru(),t,"unsupported-persistence-type");return}El(e===cn.NONE||Qb(),t,"unsupported-persistence-type")}async function hy(t){await t._initializationPromise;const e=Xb(),n=Rs(Jb,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function k5(t,e){const n=Xb();if(!n)return[];const r=Rs(Jb,t,e);switch(n.getItem(r)){case cn.NONE:return[pa];case cn.LOCAL:return[Mu,Ms];case cn.SESSION:return[Ms];default:return[]}}function Xb(){var t;try{return((t=R5())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=z;class vi{constructor(){this.browserResolver=fn(G4),this.cordovaResolver=fn(y5),this.underlyingResolver=null,this._redirectPersistence=Ms,this._completeRedirectFn=Vf,this._overrideRedirectResult=Ev}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Yb()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return x5(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await b5();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(t){return t.unwrap()}function N5(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(t){return eR(t)}function D5(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new V5(t,_F(t,e))}else if(r){const i=eR(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function eR(t){const{_tokenResponse:e}=t instanceof qt?t.customData:t;if(!e)return null;if(!(t instanceof qt)&&"temporaryProof"in e&&"phoneNumber"in e)return Ls.credentialFromResult(t);const n=e.providerId;if(!n||n===Il.PASSWORD)return null;let r;switch(n){case Il.GOOGLE:r=sr;break;case Il.FACEBOOK:r=ir;break;case Il.GITHUB:r=or;break;case Il.TWITTER:r=ar;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?ma._create(n,a):vr._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new Qo(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof qt?r.credentialFromError(t):r.credentialFromResult(t)}function Yt(t,e){return e.catch(n=>{throw n instanceof qt&&D5(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:O5(n),additionalUserInfo:yF(n),user:Mf.getOrCreate(i)}})}async function fy(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Yt(t,n.confirm(r))}}class V5{constructor(e,n){this.resolver=n,this.auth=N5(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Yt(Zb(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mf=class Fl{constructor(e){this._delegate=e,this.multiFactor=EF(e)}static getOrCreate(e){return Fl.USER_MAP.has(e)||Fl.USER_MAP.set(e,new Fl(e)),Fl.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Yt(this.auth,Rb(this._delegate,e))}async linkWithPhoneNumber(e,n){return fy(this.auth,JF(this._delegate,e,n))}async linkWithPopup(e){return Yt(this.auth,o4(this._delegate,e,vi))}async linkWithRedirect(e){return await hy(We(this.auth)),m4(this._delegate,e,vi)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Yt(this.auth,Cb(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return fy(this.auth,XF(this._delegate,e,n))}reauthenticateWithPopup(e){return Yt(this.auth,s4(this._delegate,e,vi))}async reauthenticateWithRedirect(e){return await hy(We(this.auth)),f4(this._delegate,e,vi)}sendEmailVerification(e){return oF(this._delegate,e)}async unlink(e){return await GL(this._delegate,e),this}updateEmail(e){return cF(this._delegate,e)}updatePassword(e){return dF(this._delegate,e)}updatePhoneNumber(e){return ZF(this._delegate,e)}updateProfile(e){return uF(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return aF(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Mf.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=z;class py{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Tl(r,"invalid-api-key",{appName:e.name}),Tl(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?vi:void 0;this._delegate=n.initialize({options:{persistence:M5(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(jM),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Mf.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){EL(this._delegate,e,n)}applyActionCode(e){return JL(this._delegate,e)}checkActionCode(e){return kb(this._delegate,e)}confirmPasswordReset(e,n){return YL(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Yt(this._delegate,ZL(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return sF(this._delegate,e)}isSignInWithEmailLink(e){return nF(this._delegate,e)}async getRedirectResult(){Tl(zm(),this._delegate,"operation-not-supported-in-this-environment");const e=await y4(this._delegate,vi);return e?Yt(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){_5(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=tT(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=tT(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return tF(this._delegate,e,n)}sendPasswordResetEmail(e,n){return QL(this._delegate,e,n||void 0)}async setPersistence(e){C5(this._delegate,e);let n;switch(e){case cn.SESSION:n=Ms;break;case cn.LOCAL:n=await fn(Mu)._isAvailable()?Mu:yv;break;case cn.NONE:n=pa;break;default:return bt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Yt(this._delegate,WL(this._delegate))}signInWithCredential(e){return Yt(this._delegate,kf(this._delegate,e))}signInWithCustomToken(e){return Yt(this._delegate,HL(this._delegate,e))}signInWithEmailAndPassword(e,n){return Yt(this._delegate,eF(this._delegate,e,n))}signInWithEmailLink(e,n){return Yt(this._delegate,rF(this._delegate,e,n))}signInWithPhoneNumber(e,n){return fy(this._delegate,YF(this._delegate,e,n))}async signInWithPopup(e){return Tl(zm(),this._delegate,"operation-not-supported-in-this-environment"),Yt(this._delegate,i4(this._delegate,e,vi))}async signInWithRedirect(e){return Tl(zm(),this._delegate,"operation-not-supported-in-this-environment"),await hy(this._delegate),d4(this._delegate,e,vi)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return XL(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}py.Persistence=cn;function tT(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&Mf.getOrCreate(o)),error:e,complete:n}}function M5(t,e){const n=k5(t,e);if(typeof self<"u"&&!n.includes(Mu)&&n.push(Mu),typeof window<"u")for(const r of[yv,Ms])n.includes(r)||n.push(r);return n.includes(pa)||n.push(pa),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.providerId="phone",this._delegate=new Ls(Zb(On.auth()))}static credential(e,n){return Ls.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Pv.PHONE_SIGN_IN_METHOD=Ls.PHONE_SIGN_IN_METHOD;Pv.PROVIDER_ID=Ls.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5=z;class F5{constructor(e,n,r=On.app()){var i;L5((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new HF(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5="auth-compat";function U5(t){t.INTERNAL.registerComponent(new _r(j5,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new py(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ho.EMAIL_SIGNIN,PASSWORD_RESET:ho.PASSWORD_RESET,RECOVER_EMAIL:ho.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ho.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ho.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ho.VERIFY_EMAIL}},EmailAuthProvider:Zi,FacebookAuthProvider:ir,GithubAuthProvider:or,GoogleAuthProvider:sr,OAuthProvider:Qo,SAMLAuthProvider:Oh,PhoneAuthProvider:Pv,PhoneMultiFactorGenerator:Kb,RecaptchaVerifier:F5,TwitterAuthProvider:ar,Auth:py,AuthCredential:Fa,Error:qt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(v5,w5)}U5(On);var $5="firebase",B5="10.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On.registerVersion($5,B5,"app-compat");var nT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ks,tR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,E){function P(){}P.prototype=E.prototype,S.D=E.prototype,S.prototype=new P,S.prototype.constructor=S,S.C=function(b,C,x){for(var R=Array(arguments.length-2),at=2;at<arguments.length;at++)R[at-2]=arguments[at];return E.prototype[C].apply(b,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,E,P){P||(P=0);var b=Array(16);if(typeof E=="string")for(var C=0;16>C;++C)b[C]=E.charCodeAt(P++)|E.charCodeAt(P++)<<8|E.charCodeAt(P++)<<16|E.charCodeAt(P++)<<24;else for(C=0;16>C;++C)b[C]=E[P++]|E[P++]<<8|E[P++]<<16|E[P++]<<24;E=S.g[0],P=S.g[1],C=S.g[2];var x=S.g[3],R=E+(x^P&(C^x))+b[0]+3614090360&4294967295;E=P+(R<<7&4294967295|R>>>25),R=x+(C^E&(P^C))+b[1]+3905402710&4294967295,x=E+(R<<12&4294967295|R>>>20),R=C+(P^x&(E^P))+b[2]+606105819&4294967295,C=x+(R<<17&4294967295|R>>>15),R=P+(E^C&(x^E))+b[3]+3250441966&4294967295,P=C+(R<<22&4294967295|R>>>10),R=E+(x^P&(C^x))+b[4]+4118548399&4294967295,E=P+(R<<7&4294967295|R>>>25),R=x+(C^E&(P^C))+b[5]+1200080426&4294967295,x=E+(R<<12&4294967295|R>>>20),R=C+(P^x&(E^P))+b[6]+2821735955&4294967295,C=x+(R<<17&4294967295|R>>>15),R=P+(E^C&(x^E))+b[7]+4249261313&4294967295,P=C+(R<<22&4294967295|R>>>10),R=E+(x^P&(C^x))+b[8]+1770035416&4294967295,E=P+(R<<7&4294967295|R>>>25),R=x+(C^E&(P^C))+b[9]+2336552879&4294967295,x=E+(R<<12&4294967295|R>>>20),R=C+(P^x&(E^P))+b[10]+4294925233&4294967295,C=x+(R<<17&4294967295|R>>>15),R=P+(E^C&(x^E))+b[11]+2304563134&4294967295,P=C+(R<<22&4294967295|R>>>10),R=E+(x^P&(C^x))+b[12]+1804603682&4294967295,E=P+(R<<7&4294967295|R>>>25),R=x+(C^E&(P^C))+b[13]+4254626195&4294967295,x=E+(R<<12&4294967295|R>>>20),R=C+(P^x&(E^P))+b[14]+2792965006&4294967295,C=x+(R<<17&4294967295|R>>>15),R=P+(E^C&(x^E))+b[15]+1236535329&4294967295,P=C+(R<<22&4294967295|R>>>10),R=E+(C^x&(P^C))+b[1]+4129170786&4294967295,E=P+(R<<5&4294967295|R>>>27),R=x+(P^C&(E^P))+b[6]+3225465664&4294967295,x=E+(R<<9&4294967295|R>>>23),R=C+(E^P&(x^E))+b[11]+643717713&4294967295,C=x+(R<<14&4294967295|R>>>18),R=P+(x^E&(C^x))+b[0]+3921069994&4294967295,P=C+(R<<20&4294967295|R>>>12),R=E+(C^x&(P^C))+b[5]+3593408605&4294967295,E=P+(R<<5&4294967295|R>>>27),R=x+(P^C&(E^P))+b[10]+38016083&4294967295,x=E+(R<<9&4294967295|R>>>23),R=C+(E^P&(x^E))+b[15]+3634488961&4294967295,C=x+(R<<14&4294967295|R>>>18),R=P+(x^E&(C^x))+b[4]+3889429448&4294967295,P=C+(R<<20&4294967295|R>>>12),R=E+(C^x&(P^C))+b[9]+568446438&4294967295,E=P+(R<<5&4294967295|R>>>27),R=x+(P^C&(E^P))+b[14]+3275163606&4294967295,x=E+(R<<9&4294967295|R>>>23),R=C+(E^P&(x^E))+b[3]+4107603335&4294967295,C=x+(R<<14&4294967295|R>>>18),R=P+(x^E&(C^x))+b[8]+1163531501&4294967295,P=C+(R<<20&4294967295|R>>>12),R=E+(C^x&(P^C))+b[13]+2850285829&4294967295,E=P+(R<<5&4294967295|R>>>27),R=x+(P^C&(E^P))+b[2]+4243563512&4294967295,x=E+(R<<9&4294967295|R>>>23),R=C+(E^P&(x^E))+b[7]+1735328473&4294967295,C=x+(R<<14&4294967295|R>>>18),R=P+(x^E&(C^x))+b[12]+2368359562&4294967295,P=C+(R<<20&4294967295|R>>>12),R=E+(P^C^x)+b[5]+4294588738&4294967295,E=P+(R<<4&4294967295|R>>>28),R=x+(E^P^C)+b[8]+2272392833&4294967295,x=E+(R<<11&4294967295|R>>>21),R=C+(x^E^P)+b[11]+1839030562&4294967295,C=x+(R<<16&4294967295|R>>>16),R=P+(C^x^E)+b[14]+4259657740&4294967295,P=C+(R<<23&4294967295|R>>>9),R=E+(P^C^x)+b[1]+2763975236&4294967295,E=P+(R<<4&4294967295|R>>>28),R=x+(E^P^C)+b[4]+1272893353&4294967295,x=E+(R<<11&4294967295|R>>>21),R=C+(x^E^P)+b[7]+4139469664&4294967295,C=x+(R<<16&4294967295|R>>>16),R=P+(C^x^E)+b[10]+3200236656&4294967295,P=C+(R<<23&4294967295|R>>>9),R=E+(P^C^x)+b[13]+681279174&4294967295,E=P+(R<<4&4294967295|R>>>28),R=x+(E^P^C)+b[0]+3936430074&4294967295,x=E+(R<<11&4294967295|R>>>21),R=C+(x^E^P)+b[3]+3572445317&4294967295,C=x+(R<<16&4294967295|R>>>16),R=P+(C^x^E)+b[6]+76029189&4294967295,P=C+(R<<23&4294967295|R>>>9),R=E+(P^C^x)+b[9]+3654602809&4294967295,E=P+(R<<4&4294967295|R>>>28),R=x+(E^P^C)+b[12]+3873151461&4294967295,x=E+(R<<11&4294967295|R>>>21),R=C+(x^E^P)+b[15]+530742520&4294967295,C=x+(R<<16&4294967295|R>>>16),R=P+(C^x^E)+b[2]+3299628645&4294967295,P=C+(R<<23&4294967295|R>>>9),R=E+(C^(P|~x))+b[0]+4096336452&4294967295,E=P+(R<<6&4294967295|R>>>26),R=x+(P^(E|~C))+b[7]+1126891415&4294967295,x=E+(R<<10&4294967295|R>>>22),R=C+(E^(x|~P))+b[14]+2878612391&4294967295,C=x+(R<<15&4294967295|R>>>17),R=P+(x^(C|~E))+b[5]+4237533241&4294967295,P=C+(R<<21&4294967295|R>>>11),R=E+(C^(P|~x))+b[12]+1700485571&4294967295,E=P+(R<<6&4294967295|R>>>26),R=x+(P^(E|~C))+b[3]+2399980690&4294967295,x=E+(R<<10&4294967295|R>>>22),R=C+(E^(x|~P))+b[10]+4293915773&4294967295,C=x+(R<<15&4294967295|R>>>17),R=P+(x^(C|~E))+b[1]+2240044497&4294967295,P=C+(R<<21&4294967295|R>>>11),R=E+(C^(P|~x))+b[8]+1873313359&4294967295,E=P+(R<<6&4294967295|R>>>26),R=x+(P^(E|~C))+b[15]+4264355552&4294967295,x=E+(R<<10&4294967295|R>>>22),R=C+(E^(x|~P))+b[6]+2734768916&4294967295,C=x+(R<<15&4294967295|R>>>17),R=P+(x^(C|~E))+b[13]+1309151649&4294967295,P=C+(R<<21&4294967295|R>>>11),R=E+(C^(P|~x))+b[4]+4149444226&4294967295,E=P+(R<<6&4294967295|R>>>26),R=x+(P^(E|~C))+b[11]+3174756917&4294967295,x=E+(R<<10&4294967295|R>>>22),R=C+(E^(x|~P))+b[2]+718787259&4294967295,C=x+(R<<15&4294967295|R>>>17),R=P+(x^(C|~E))+b[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(C+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+C&4294967295,S.g[3]=S.g[3]+x&4294967295}r.prototype.u=function(S,E){E===void 0&&(E=S.length);for(var P=E-this.blockSize,b=this.B,C=this.h,x=0;x<E;){if(C==0)for(;x<=P;)i(this,S,x),x+=this.blockSize;if(typeof S=="string"){for(;x<E;)if(b[C++]=S.charCodeAt(x++),C==this.blockSize){i(this,b),C=0;break}}else for(;x<E;)if(b[C++]=S[x++],C==this.blockSize){i(this,b),C=0;break}}this.h=C,this.o+=E},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;var P=8*this.o;for(E=S.length-8;E<S.length;++E)S[E]=P&255,P/=256;for(this.u(S),S=Array(16),E=P=0;4>E;++E)for(var b=0;32>b;b+=8)S[P++]=this.g[E]>>>b&255;return S};function s(S,E){var P=a;return Object.prototype.hasOwnProperty.call(P,S)?P[S]:P[S]=E(S)}function o(S,E){this.h=E;for(var P=[],b=!0,C=S.length-1;0<=C;C--){var x=S[C]|0;b&&x==E||(P[C]=x,b=!1)}this.g=P}var a={};function l(S){return-128<=S&&128>S?s(S,function(E){return new o([E|0],0>E?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(0>S)return A(c(-S));for(var E=[],P=1,b=0;S>=P;b++)E[b]=S/P|0,P*=4294967296;return new o(E,0)}function d(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return A(d(S.substring(1),E));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=c(Math.pow(E,8)),b=h,C=0;C<S.length;C+=8){var x=Math.min(8,S.length-C),R=parseInt(S.substring(C,C+x),E);8>x?(x=c(Math.pow(E,x)),b=b.j(x).add(c(R))):(b=b.j(P),b=b.add(c(R)))}return b}var h=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-A(this).m();for(var S=0,E=1,P=0;P<this.g.length;P++){var b=this.i(P);S+=(0<=b?b:4294967296+b)*E,E*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(v(this))return"-"+A(this).toString(S);for(var E=c(Math.pow(S,6)),P=this,b="";;){var C=k(P,E).g;P=I(P,C.j(E));var x=((0<P.g.length?P.g[0]:P.h)>>>0).toString(S);if(P=C,w(P))return x+b;for(;6>x.length;)x="0"+x;b=x+b}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(var E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function v(S){return S.h==-1}t.l=function(S){return S=I(this,S),v(S)?-1:w(S)?0:1};function A(S){for(var E=S.g.length,P=[],b=0;b<E;b++)P[b]=~S.g[b];return new o(P,~S.h).add(p)}t.abs=function(){return v(this)?A(this):this},t.add=function(S){for(var E=Math.max(this.g.length,S.g.length),P=[],b=0,C=0;C<=E;C++){var x=b+(this.i(C)&65535)+(S.i(C)&65535),R=(x>>>16)+(this.i(C)>>>16)+(S.i(C)>>>16);b=R>>>16,x&=65535,R&=65535,P[C]=R<<16|x}return new o(P,P[P.length-1]&-2147483648?-1:0)};function I(S,E){return S.add(A(E))}t.j=function(S){if(w(this)||w(S))return h;if(v(this))return v(S)?A(this).j(A(S)):A(A(this).j(S));if(v(S))return A(this.j(A(S)));if(0>this.l(g)&&0>S.l(g))return c(this.m()*S.m());for(var E=this.g.length+S.g.length,P=[],b=0;b<2*E;b++)P[b]=0;for(b=0;b<this.g.length;b++)for(var C=0;C<S.g.length;C++){var x=this.i(b)>>>16,R=this.i(b)&65535,at=S.i(C)>>>16,Fn=S.i(C)&65535;P[2*b+2*C]+=R*Fn,y(P,2*b+2*C),P[2*b+2*C+1]+=x*Fn,y(P,2*b+2*C+1),P[2*b+2*C+1]+=R*at,y(P,2*b+2*C+1),P[2*b+2*C+2]+=x*at,y(P,2*b+2*C+2)}for(b=0;b<E;b++)P[b]=P[2*b+1]<<16|P[2*b];for(b=E;b<2*E;b++)P[b]=0;return new o(P,0)};function y(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function T(S,E){this.g=S,this.h=E}function k(S,E){if(w(E))throw Error("division by zero");if(w(S))return new T(h,h);if(v(S))return E=k(A(S),E),new T(A(E.g),A(E.h));if(v(E))return E=k(S,A(E)),new T(A(E.g),E.h);if(30<S.g.length){if(v(S)||v(E))throw Error("slowDivide_ only works with positive integers.");for(var P=p,b=E;0>=b.l(S);)P=V(P),b=V(b);var C=j(P,1),x=j(b,1);for(b=j(b,2),P=j(P,2);!w(b);){var R=x.add(b);0>=R.l(S)&&(C=C.add(P),x=R),b=j(b,1),P=j(P,1)}return E=I(S,C.j(E)),new T(C,E)}for(C=h;0<=S.l(E);){for(P=Math.max(1,Math.floor(S.m()/E.m())),b=Math.ceil(Math.log(P)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),x=c(P),R=x.j(E);v(R)||0<R.l(S);)P-=b,x=c(P),R=x.j(E);w(x)&&(x=p),C=C.add(x),S=I(S,R)}return new T(C,S)}t.A=function(S){return k(this,S).h},t.and=function(S){for(var E=Math.max(this.g.length,S.g.length),P=[],b=0;b<E;b++)P[b]=this.i(b)&S.i(b);return new o(P,this.h&S.h)},t.or=function(S){for(var E=Math.max(this.g.length,S.g.length),P=[],b=0;b<E;b++)P[b]=this.i(b)|S.i(b);return new o(P,this.h|S.h)},t.xor=function(S){for(var E=Math.max(this.g.length,S.g.length),P=[],b=0;b<E;b++)P[b]=this.i(b)^S.i(b);return new o(P,this.h^S.h)};function V(S){for(var E=S.g.length+1,P=[],b=0;b<E;b++)P[b]=S.i(b)<<1|S.i(b-1)>>>31;return new o(P,S.h)}function j(S,E){var P=E>>5;E%=32;for(var b=S.g.length-P,C=[],x=0;x<b;x++)C[x]=0<E?S.i(x+P)>>>E|S.i(x+P+1)<<32-E:S.i(x+P);return new o(C,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,ks=o}).apply(typeof nT<"u"?nT:typeof self<"u"?self:typeof window<"u"?window:{});var _d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nR,rR,jl,iR,Bd,my,sR,oR,aR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof _d=="object"&&_d];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var _=0;_<u.length-1;_++){var N=u[_];if(!(N in m))break e;m=m[N]}u=u[u.length-1],_=m[u],f=f(_),f!=_&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,_=!1,N={next:function(){if(!_&&m<u.length){var F=m++;return{value:f(F,u[F]),done:!1}}return _=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function d(u,f,m){return u.call.apply(u.bind,arguments)}function h(u,f,m){if(!u)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,_),u.apply(f,N)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function g(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),u.apply(this,_)}}function w(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(_,N,F){for(var q=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)q[Ie-2]=arguments[Ie];return f.prototype[N].apply(_,q)}}function v(u){const f=u.length;if(0<f){const m=Array(f);for(let _=0;_<f;_++)m[_]=u[_];return m}return[]}function A(u,f){for(let m=1;m<arguments.length;m++){const _=arguments[m];if(l(_)){const N=u.length||0,F=_.length||0;u.length=N+F;for(let q=0;q<F;q++)u[N+q]=_[q]}else u.push(_)}}class I{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function y(u){return/^[\s\xa0]*$/.test(u)}function T(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function k(u){return k[" "](u),u}k[" "]=function(){};var V=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function j(u,f,m){for(const _ in u)f.call(m,u[_],_,u)}function S(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function E(u){const f={};for(const m in u)f[m]=u[m];return f}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,f){let m,_;for(let N=1;N<arguments.length;N++){_=arguments[N];for(m in _)u[m]=_[m];for(let F=0;F<P.length;F++)m=P[F],Object.prototype.hasOwnProperty.call(_,m)&&(u[m]=_[m])}}function C(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function x(u){a.setTimeout(()=>{throw u},0)}function R(){var u=K;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class at{constructor(){this.h=this.g=null}add(f,m){const _=Fn.get();_.set(f,m),this.h?this.h.next=_:this.g=_,this.h=_}}var Fn=new I(()=>new Jn,u=>u.reset());class Jn{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let En,H=!1,K=new at,ee=()=>{const u=a.Promise.resolve(void 0);En=()=>{u.then(ve)}};var ve=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(m){x(m)}var f=Fn;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}H=!1};function we(){this.s=this.s,this.C=this.C}we.prototype.s=!1,we.prototype.ma=function(){this.s||(this.s=!0,this.N())},we.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ye(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}Ye.prototype.h=function(){this.defaultPrevented=!0};var Sr=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function Pr(u,f){if(Ye.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,_=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(V){e:{try{k(f.nodeName);var N=!0;break e}catch{}N=!1}N||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ar[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Pr.aa.h.call(this)}}w(Pr,Ye);var Ar={2:"touch",3:"pen",4:"mouse"};Pr.prototype.h=function(){Pr.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Xn="closure_listenable_"+(1e6*Math.random()|0),Jx=0;function Xx(u,f,m,_,N){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!_,this.ha=N,this.key=++Jx,this.da=this.fa=!1}function Lc(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Fc(u){this.src=u,this.g={},this.h=0}Fc.prototype.add=function(u,f,m,_,N){var F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);var q=Fp(u,f,_,N);return-1<q?(f=u[q],m||(f.fa=!1)):(f=new Xx(f,this.src,F,!!_,N),f.fa=m,u.push(f)),f};function Lp(u,f){var m=f.type;if(m in u.g){var _=u.g[m],N=Array.prototype.indexOf.call(_,f,void 0),F;(F=0<=N)&&Array.prototype.splice.call(_,N,1),F&&(Lc(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Fp(u,f,m,_){for(var N=0;N<u.length;++N){var F=u[N];if(!F.da&&F.listener==f&&F.capture==!!m&&F.ha==_)return N}return-1}var jp="closure_lm_"+(1e6*Math.random()|0),Up={};function uw(u,f,m,_,N){if(_&&_.once)return dw(u,f,m,_,N);if(Array.isArray(f)){for(var F=0;F<f.length;F++)uw(u,f[F],m,_,N);return null}return m=qp(m),u&&u[Xn]?u.K(f,m,c(_)?!!_.capture:!!_,N):cw(u,f,m,!1,_,N)}function cw(u,f,m,_,N,F){if(!f)throw Error("Invalid event type");var q=c(N)?!!N.capture:!!N,Ie=Bp(u);if(Ie||(u[jp]=Ie=new Fc(u)),m=Ie.add(f,m,_,q,F),m.proxy)return m;if(_=Zx(),m.proxy=_,_.src=u,_.listener=m,u.addEventListener)Sr||(N=q),N===void 0&&(N=!1),u.addEventListener(f.toString(),_,N);else if(u.attachEvent)u.attachEvent(fw(f.toString()),_);else if(u.addListener&&u.removeListener)u.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Zx(){function u(m){return f.call(u.src,u.listener,m)}const f=eN;return u}function dw(u,f,m,_,N){if(Array.isArray(f)){for(var F=0;F<f.length;F++)dw(u,f[F],m,_,N);return null}return m=qp(m),u&&u[Xn]?u.L(f,m,c(_)?!!_.capture:!!_,N):cw(u,f,m,!0,_,N)}function hw(u,f,m,_,N){if(Array.isArray(f))for(var F=0;F<f.length;F++)hw(u,f[F],m,_,N);else _=c(_)?!!_.capture:!!_,m=qp(m),u&&u[Xn]?(u=u.i,f=String(f).toString(),f in u.g&&(F=u.g[f],m=Fp(F,m,_,N),-1<m&&(Lc(F[m]),Array.prototype.splice.call(F,m,1),F.length==0&&(delete u.g[f],u.h--)))):u&&(u=Bp(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Fp(f,m,_,N)),(m=-1<u?f[u]:null)&&$p(m))}function $p(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Xn])Lp(f.i,u);else{var m=u.type,_=u.proxy;f.removeEventListener?f.removeEventListener(m,_,u.capture):f.detachEvent?f.detachEvent(fw(m),_):f.addListener&&f.removeListener&&f.removeListener(_),(m=Bp(f))?(Lp(m,u),m.h==0&&(m.src=null,f[jp]=null)):Lc(u)}}}function fw(u){return u in Up?Up[u]:Up[u]="on"+u}function eN(u,f){if(u.da)u=!0;else{f=new Pr(f,this);var m=u.listener,_=u.ha||u.src;u.fa&&$p(u),u=m.call(_,f)}return u}function Bp(u){return u=u[jp],u instanceof Fc?u:null}var zp="__closure_events_fn_"+(1e9*Math.random()>>>0);function qp(u){return typeof u=="function"?u:(u[zp]||(u[zp]=function(f){return u.handleEvent(f)}),u[zp])}function Rt(){we.call(this),this.i=new Fc(this),this.M=this,this.F=null}w(Rt,we),Rt.prototype[Xn]=!0,Rt.prototype.removeEventListener=function(u,f,m,_){hw(this,u,f,m,_)};function Ft(u,f){var m,_=u.F;if(_)for(m=[];_;_=_.F)m.push(_);if(u=u.M,_=f.type||f,typeof f=="string")f=new Ye(f,u);else if(f instanceof Ye)f.target=f.target||u;else{var N=f;f=new Ye(_,u),b(f,N)}if(N=!0,m)for(var F=m.length-1;0<=F;F--){var q=f.g=m[F];N=jc(q,_,!0,f)&&N}if(q=f.g=u,N=jc(q,_,!0,f)&&N,N=jc(q,_,!1,f)&&N,m)for(F=0;F<m.length;F++)q=f.g=m[F],N=jc(q,_,!1,f)&&N}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],_=0;_<m.length;_++)Lc(m[_]);delete u.g[f],u.h--}}this.F=null},Rt.prototype.K=function(u,f,m,_){return this.i.add(String(u),f,!1,m,_)},Rt.prototype.L=function(u,f,m,_){return this.i.add(String(u),f,!0,m,_)};function jc(u,f,m,_){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var N=!0,F=0;F<f.length;++F){var q=f[F];if(q&&!q.da&&q.capture==m){var Ie=q.listener,wt=q.ha||q.src;q.fa&&Lp(u.i,q),N=Ie.call(wt,_)!==!1&&N}}return N&&!_.defaultPrevented}function pw(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function mw(u){u.g=pw(()=>{u.g=null,u.i&&(u.i=!1,mw(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class tN extends we{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:mw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Za(u){we.call(this),this.h=u,this.g={}}w(Za,we);var gw=[];function yw(u){j(u.g,function(f,m){this.g.hasOwnProperty(m)&&$p(f)},u),u.g={}}Za.prototype.N=function(){Za.aa.N.call(this),yw(this)},Za.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wp=a.JSON.stringify,nN=a.JSON.parse,rN=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Gp(){}Gp.prototype.h=null;function _w(u){return u.h||(u.h=u.i())}function vw(){}var el={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kp(){Ye.call(this,"d")}w(Kp,Ye);function Hp(){Ye.call(this,"c")}w(Hp,Ye);var ss={},ww=null;function Uc(){return ww=ww||new Rt}ss.La="serverreachability";function Iw(u){Ye.call(this,ss.La,u)}w(Iw,Ye);function tl(u){const f=Uc();Ft(f,new Iw(f))}ss.STAT_EVENT="statevent";function Ew(u,f){Ye.call(this,ss.STAT_EVENT,u),this.stat=f}w(Ew,Ye);function jt(u){const f=Uc();Ft(f,new Ew(f,u))}ss.Ma="timingevent";function Tw(u,f){Ye.call(this,ss.Ma,u),this.size=f}w(Tw,Ye);function nl(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function rl(){this.g=!0}rl.prototype.xa=function(){this.g=!1};function iN(u,f,m,_,N,F){u.info(function(){if(u.g)if(F)for(var q="",Ie=F.split("&"),wt=0;wt<Ie.length;wt++){var de=Ie[wt].split("=");if(1<de.length){var Ct=de[0];de=de[1];var kt=Ct.split("_");q=2<=kt.length&&kt[1]=="type"?q+(Ct+"="+de+"&"):q+(Ct+"=redacted&")}}else q=null;else q=F;return"XMLHTTP REQ ("+_+") [attempt "+N+"]: "+f+`
`+m+`
`+q})}function sN(u,f,m,_,N,F,q){u.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+N+"]: "+f+`
`+m+`
`+F+" "+q})}function oo(u,f,m,_){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+aN(u,m)+(_?" "+_:"")})}function oN(u,f){u.info(function(){return"TIMEOUT: "+f})}rl.prototype.info=function(){};function aN(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var _=m[u];if(!(2>_.length)){var N=_[1];if(Array.isArray(N)&&!(1>N.length)){var F=N[0];if(F!="noop"&&F!="stop"&&F!="close")for(var q=1;q<N.length;q++)N[q]=""}}}}return Wp(m)}catch{return f}}var $c={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qp;function Bc(){}w(Bc,Gp),Bc.prototype.g=function(){return new XMLHttpRequest},Bc.prototype.i=function(){return{}},Qp=new Bc;function ei(u,f,m,_){this.j=u,this.i=f,this.l=m,this.R=_||1,this.U=new Za(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pw}function Pw(){this.i=null,this.g="",this.h=!1}var Aw={},Yp={};function Jp(u,f,m){u.L=1,u.v=Gc(br(f)),u.m=m,u.P=!0,bw(u,null)}function bw(u,f){u.F=Date.now(),zc(u),u.A=br(u.v);var m=u.A,_=u.R;Array.isArray(_)||(_=[String(_)]),$w(m.i,"t",_),u.C=0,m=u.j.J,u.h=new Pw,u.g=sI(u.j,m?f:null,!u.m),0<u.O&&(u.M=new tN(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,_=u.ca;var N="readystatechange";Array.isArray(N)||(N&&(gw[0]=N.toString()),N=gw);for(var F=0;F<N.length;F++){var q=uw(m,N[F],_||f.handleEvent,!1,f.h||f);if(!q)break;f.g[q.key]=q}f=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),tl(),iN(u.i,u.u,u.A,u.l,u.R,u.m)}ei.prototype.ca=function(u){u=u.target;const f=this.M;f&&Rr(u)==3?f.j():this.Y(u)},ei.prototype.Y=function(u){try{if(u==this.g)e:{const kt=Rr(this.g);var f=this.g.Ba();const uo=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||Hw(this.g)))){this.J||kt!=4||f==7||(f==8||0>=uo?tl(3):tl(2)),Xp(this);var m=this.g.Z();this.X=m;t:if(Rw(this)){var _=Hw(this.g);u="";var N=_.length,F=Rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){os(this),il(this);var q="";break t}this.h.i=new a.TextDecoder}for(f=0;f<N;f++)this.h.h=!0,u+=this.h.i.decode(_[f],{stream:!(F&&f==N-1)});_.length=0,this.h.g+=u,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=m==200,sN(this.i,this.u,this.A,this.l,this.R,kt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,wt=this.g;if((Ie=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Ie)){var de=Ie;break t}}de=null}if(m=de)oo(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zp(this,m);else{this.o=!1,this.s=3,jt(12),os(this),il(this);break e}}if(this.P){m=!0;let jn;for(;!this.J&&this.C<q.length;)if(jn=lN(this,q),jn==Yp){kt==4&&(this.s=4,jt(14),m=!1),oo(this.i,this.l,null,"[Incomplete Response]");break}else if(jn==Aw){this.s=4,jt(15),oo(this.i,this.l,q,"[Invalid Chunk]"),m=!1;break}else oo(this.i,this.l,jn,null),Zp(this,jn);if(Rw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||q.length!=0||this.h.h||(this.s=1,jt(16),m=!1),this.o=this.o&&m,!m)oo(this.i,this.l,q,"[Invalid Chunked Response]"),os(this),il(this);else if(0<q.length&&!this.W){this.W=!0;var Ct=this.j;Ct.g==this&&Ct.ba&&!Ct.M&&(Ct.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),sm(Ct),Ct.M=!0,jt(11))}}else oo(this.i,this.l,q,null),Zp(this,q);kt==4&&os(this),this.o&&!this.J&&(kt==4?tI(this.j,this):(this.o=!1,zc(this)))}else PN(this.g),m==400&&0<q.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),os(this),il(this)}}}catch{}finally{}};function Rw(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function lN(u,f){var m=u.C,_=f.indexOf(`
`,m);return _==-1?Yp:(m=Number(f.substring(m,_)),isNaN(m)?Aw:(_+=1,_+m>f.length?Yp:(f=f.slice(_,_+m),u.C=_+m,f)))}ei.prototype.cancel=function(){this.J=!0,os(this)};function zc(u){u.S=Date.now()+u.I,Cw(u,u.I)}function Cw(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=nl(p(u.ba,u),f)}function Xp(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ei.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(oN(this.i,this.A),this.L!=2&&(tl(),jt(17)),os(this),this.s=2,il(this)):Cw(this,this.S-u)};function il(u){u.j.G==0||u.J||tI(u.j,u)}function os(u){Xp(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,yw(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Zp(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||em(m.h,u))){if(!u.K&&em(m.h,u)&&m.G==3){try{var _=m.Da.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var N=_;if(N[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Jc(m),Qc(m);else break e;im(m),jt(18)}}else m.za=N[1],0<m.za-m.T&&37500>N[2]&&m.F&&m.v==0&&!m.C&&(m.C=nl(p(m.Za,m),6e3));if(1>=Nw(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ls(m,11)}else if((u.K||m.g==u)&&Jc(m),!y(f))for(N=m.Da.g.parse(f),f=0;f<N.length;f++){let de=N[f];if(m.T=de[0],de=de[1],m.G==2)if(de[0]=="c"){m.K=de[1],m.ia=de[2];const Ct=de[3];Ct!=null&&(m.la=Ct,m.j.info("VER="+m.la));const kt=de[4];kt!=null&&(m.Aa=kt,m.j.info("SVER="+m.Aa));const uo=de[5];uo!=null&&typeof uo=="number"&&0<uo&&(_=1.5*uo,m.L=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;const jn=u.g;if(jn){const Zc=jn.g?jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zc){var F=_.h;F.g||Zc.indexOf("spdy")==-1&&Zc.indexOf("quic")==-1&&Zc.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(tm(F,F.h),F.h=null))}if(_.D){const om=jn.g?jn.g.getResponseHeader("X-HTTP-Session-Id"):null;om&&(_.ya=om,Se(_.I,_.D,om))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),_=m;var q=u;if(_.qa=iI(_,_.J?_.ia:null,_.W),q.K){Ow(_.h,q);var Ie=q,wt=_.L;wt&&(Ie.I=wt),Ie.B&&(Xp(Ie),zc(Ie)),_.g=q}else Zw(_);0<m.i.length&&Yc(m)}else de[0]!="stop"&&de[0]!="close"||ls(m,7);else m.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?ls(m,7):rm(m):de[0]!="noop"&&m.l&&m.l.ta(de),m.v=0)}}tl(4)}catch{}}var uN=class{constructor(u,f){this.g=u,this.map=f}};function kw(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xw(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Nw(u){return u.h?1:u.g?u.g.size:0}function em(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function tm(u,f){u.g?u.g.add(f):u.h=f}function Ow(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}kw.prototype.cancel=function(){if(this.i=Dw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Dw(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return v(u.i)}function cN(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,_=0;_<m;_++)f.push(u[_]);return f}f=[],m=0;for(_ in u)f[m++]=u[_];return f}function dN(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const _ in u)f[m++]=_;return f}}}function Vw(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=dN(u),_=cN(u),N=_.length,F=0;F<N;F++)f.call(void 0,_[F],m&&m[F],u)}var Mw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hN(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var _=u[m].indexOf("="),N=null;if(0<=_){var F=u[m].substring(0,_);N=u[m].substring(_+1)}else F=u[m];f(F,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function as(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof as){this.h=u.h,qc(this,u.j),this.o=u.o,this.g=u.g,Wc(this,u.s),this.l=u.l;var f=u.i,m=new al;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Lw(this,m),this.m=u.m}else u&&(f=String(u).match(Mw))?(this.h=!1,qc(this,f[1]||"",!0),this.o=sl(f[2]||""),this.g=sl(f[3]||"",!0),Wc(this,f[4]),this.l=sl(f[5]||"",!0),Lw(this,f[6]||"",!0),this.m=sl(f[7]||"")):(this.h=!1,this.i=new al(null,this.h))}as.prototype.toString=function(){var u=[],f=this.j;f&&u.push(ol(f,Fw,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(ol(f,Fw,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(ol(m,m.charAt(0)=="/"?mN:pN,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",ol(m,yN)),u.join("")};function br(u){return new as(u)}function qc(u,f,m){u.j=m?sl(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Wc(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Lw(u,f,m){f instanceof al?(u.i=f,_N(u.i,u.h)):(m||(f=ol(f,gN)),u.i=new al(f,u.h))}function Se(u,f,m){u.i.set(f,m)}function Gc(u){return Se(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function sl(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ol(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,fN),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function fN(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Fw=/[#\/\?@]/g,pN=/[#\?:]/g,mN=/[#\?]/g,gN=/[#\?@]/g,yN=/#/g;function al(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function ti(u){u.g||(u.g=new Map,u.h=0,u.i&&hN(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=al.prototype,t.add=function(u,f){ti(this),this.i=null,u=ao(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function jw(u,f){ti(u),f=ao(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Uw(u,f){return ti(u),f=ao(u,f),u.g.has(f)}t.forEach=function(u,f){ti(this),this.g.forEach(function(m,_){m.forEach(function(N){u.call(f,N,_,this)},this)},this)},t.na=function(){ti(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let _=0;_<f.length;_++){const N=u[_];for(let F=0;F<N.length;F++)m.push(f[_])}return m},t.V=function(u){ti(this);let f=[];if(typeof u=="string")Uw(this,u)&&(f=f.concat(this.g.get(ao(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},t.set=function(u,f){return ti(this),this.i=null,u=ao(this,u),Uw(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function $w(u,f,m){jw(u,f),0<m.length&&(u.i=null,u.g.set(ao(u,f),v(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var _=f[m];const F=encodeURIComponent(String(_)),q=this.V(_);for(_=0;_<q.length;_++){var N=F;q[_]!==""&&(N+="="+encodeURIComponent(String(q[_]))),u.push(N)}}return this.i=u.join("&")};function ao(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function _N(u,f){f&&!u.j&&(ti(u),u.i=null,u.g.forEach(function(m,_){var N=_.toLowerCase();_!=N&&(jw(this,_),$w(this,N,m))},u)),u.j=f}function vN(u,f){const m=new rl;if(a.Image){const _=new Image;_.onload=g(ni,m,"TestLoadImage: loaded",!0,f,_),_.onerror=g(ni,m,"TestLoadImage: error",!1,f,_),_.onabort=g(ni,m,"TestLoadImage: abort",!1,f,_),_.ontimeout=g(ni,m,"TestLoadImage: timeout",!1,f,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=u}else f(!1)}function wN(u,f){const m=new rl,_=new AbortController,N=setTimeout(()=>{_.abort(),ni(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:_.signal}).then(F=>{clearTimeout(N),F.ok?ni(m,"TestPingServer: ok",!0,f):ni(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(N),ni(m,"TestPingServer: error",!1,f)})}function ni(u,f,m,_,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),_(m)}catch{}}function IN(){this.g=new rN}function EN(u,f,m){const _=m||"";try{Vw(u,function(N,F){let q=N;c(N)&&(q=Wp(N)),f.push(_+F+"="+encodeURIComponent(q))})}catch(N){throw f.push(_+"type="+encodeURIComponent("_badmap")),N}}function ll(u){this.l=u.Ub||null,this.j=u.eb||!1}w(ll,Gp),ll.prototype.g=function(){return new Kc(this.l,this.j)},ll.prototype.i=function(u){return function(){return u}}({});function Kc(u,f){Rt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Kc,Rt),t=Kc.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,cl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ul(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,cl(this)),this.g&&(this.readyState=3,cl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bw(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bw(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?ul(this):cl(this),this.readyState==3&&Bw(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,ul(this))},t.Qa=function(u){this.g&&(this.response=u,ul(this))},t.ga=function(){this.g&&ul(this)};function ul(u){u.readyState=4,u.l=null,u.j=null,u.v=null,cl(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function cl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Kc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function zw(u){let f="";return j(u,function(m,_){f+=_,f+=":",f+=m,f+=`\r
`}),f}function nm(u,f,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=zw(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Se(u,f,m))}function Ue(u){Rt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Ue,Rt);var TN=/^https?$/i,SN=["POST","PUT"];t=Ue.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qp.g(),this.v=this.o?_w(this.o):_w(Qp),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(F){qw(this,F);return}if(u=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var N in _)m.set(N,_[N]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const F of _.keys())m.set(F,_.get(F));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(F=>F.toLowerCase()=="content-type"),N=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(SN,f,void 0))||_||N||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,q]of m)this.g.setRequestHeader(F,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Kw(this),this.u=!0,this.g.send(u),this.u=!1}catch(F){qw(this,F)}};function qw(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Ww(u),Hc(u)}function Ww(u){u.A||(u.A=!0,Ft(u,"complete"),Ft(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ft(this,"complete"),Ft(this,"abort"),Hc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hc(this,!0)),Ue.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Gw(this):this.bb())},t.bb=function(){Gw(this)};function Gw(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Rr(u)!=4||u.Z()!=2)){if(u.u&&Rr(u)==4)pw(u.Ea,0,u);else if(Ft(u,"readystatechange"),Rr(u)==4){u.h=!1;try{const q=u.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var _;if(_=q===0){var N=String(u.D).match(Mw)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),_=!TN.test(N?N.toLowerCase():"")}m=_}if(m)Ft(u,"complete"),Ft(u,"success");else{u.m=6;try{var F=2<Rr(u)?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.Z()+"]",Ww(u)}}finally{Hc(u)}}}}function Hc(u,f){if(u.g){Kw(u);const m=u.g,_=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Ft(u,"ready");try{m.onreadystatechange=_}catch{}}}function Kw(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Rr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Rr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),nN(f)}};function Hw(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function PN(u){const f={};u=(u.g&&2<=Rr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<u.length;_++){if(y(u[_]))continue;var m=C(u[_]);const N=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const F=f[N]||[];f[N]=F,F.push(m)}S(f,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function dl(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function Qw(u){this.Aa=0,this.i=[],this.j=new rl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=dl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=dl("baseRetryDelayMs",5e3,u),this.cb=dl("retryDelaySeedMs",1e4,u),this.Wa=dl("forwardChannelMaxRetries",2,u),this.wa=dl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new kw(u&&u.concurrentRequestLimit),this.Da=new IN,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Qw.prototype,t.la=8,t.G=1,t.connect=function(u,f,m,_){jt(0),this.W=u,this.H=f||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.I=iI(this,null,this.W),Yc(this)};function rm(u){if(Yw(u),u.G==3){var f=u.U++,m=br(u.I);if(Se(m,"SID",u.K),Se(m,"RID",f),Se(m,"TYPE","terminate"),hl(u,m),f=new ei(u,u.j,f),f.L=2,f.v=Gc(br(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=sI(f.j,null),f.g.ea(f.v)),f.F=Date.now(),zc(f)}rI(u)}function Qc(u){u.g&&(sm(u),u.g.cancel(),u.g=null)}function Yw(u){Qc(u),u.u&&(a.clearTimeout(u.u),u.u=null),Jc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Yc(u){if(!xw(u.h)&&!u.s){u.s=!0;var f=u.Ga;En||ee(),H||(En(),H=!0),K.add(f,u),u.B=0}}function AN(u,f){return Nw(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=nl(p(u.Ga,u,f),nI(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const N=new ei(this,this.j,u);let F=this.o;if(this.S&&(F?(F=E(F),b(F,this.S)):F=this.S),this.m!==null||this.O||(N.H=F,F=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Xw(this,N,f),m=br(this.I),Se(m,"RID",u),Se(m,"CVER",22),this.D&&Se(m,"X-HTTP-Session-Id",this.D),hl(this,m),F&&(this.O?f="headers="+encodeURIComponent(String(zw(F)))+"&"+f:this.m&&nm(m,this.m,F)),tm(this.h,N),this.Ua&&Se(m,"TYPE","init"),this.P?(Se(m,"$req",f),Se(m,"SID","null"),N.T=!0,Jp(N,m,null)):Jp(N,m,f),this.G=2}}else this.G==3&&(u?Jw(this,u):this.i.length==0||xw(this.h)||Jw(this))};function Jw(u,f){var m;f?m=f.l:m=u.U++;const _=br(u.I);Se(_,"SID",u.K),Se(_,"RID",m),Se(_,"AID",u.T),hl(u,_),u.m&&u.o&&nm(_,u.m,u.o),m=new ei(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Xw(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),tm(u.h,m),Jp(m,_,f)}function hl(u,f){u.H&&j(u.H,function(m,_){Se(f,_,m)}),u.l&&Vw({},function(m,_){Se(f,_,m)})}function Xw(u,f,m){m=Math.min(u.i.length,m);var _=u.l?p(u.l.Na,u.l,u):null;e:{var N=u.i;let F=-1;for(;;){const q=["count="+m];F==-1?0<m?(F=N[0].g,q.push("ofs="+F)):F=0:q.push("ofs="+F);let Ie=!0;for(let wt=0;wt<m;wt++){let de=N[wt].g;const Ct=N[wt].map;if(de-=F,0>de)F=Math.max(0,N[wt].g-100),Ie=!1;else try{EN(Ct,q,"req"+de+"_")}catch{_&&_(Ct)}}if(Ie){_=q.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,_}function Zw(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;En||ee(),H||(En(),H=!0),K.add(f,u),u.v=0}}function im(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=nl(p(u.Fa,u),nI(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,eI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=nl(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),Qc(this),eI(this))};function sm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function eI(u){u.g=new ei(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=br(u.qa);Se(f,"RID","rpc"),Se(f,"SID",u.K),Se(f,"AID",u.T),Se(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Se(f,"TO",u.ja),Se(f,"TYPE","xmlhttp"),hl(u,f),u.m&&u.o&&nm(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Gc(br(f)),m.m=null,m.P=!0,bw(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Qc(this),im(this),jt(19))};function Jc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function tI(u,f){var m=null;if(u.g==f){Jc(u),sm(u),u.g=null;var _=2}else if(em(u.h,f))m=f.D,Ow(u.h,f),_=1;else return;if(u.G!=0){if(f.o)if(_==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var N=u.B;_=Uc(),Ft(_,new Tw(_,m)),Yc(u)}else Zw(u);else if(N=f.s,N==3||N==0&&0<f.X||!(_==1&&AN(u,f)||_==2&&im(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),N){case 1:ls(u,5);break;case 4:ls(u,10);break;case 3:ls(u,6);break;default:ls(u,2)}}}function nI(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function ls(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),_=u.Xa;const N=!_;_=new as(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||qc(_,"https"),Gc(_),N?vN(_.toString(),m):wN(_.toString(),m)}else jt(2);u.G=0,u.l&&u.l.sa(f),rI(u),Yw(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function rI(u){if(u.G=0,u.ka=[],u.l){const f=Dw(u.h);(f.length!=0||u.i.length!=0)&&(A(u.ka,f),A(u.ka,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.ra()}}function iI(u,f,m){var _=m instanceof as?br(m):new as(m);if(_.g!="")f&&(_.g=f+"."+_.g),Wc(_,_.s);else{var N=a.location;_=N.protocol,f=f?f+"."+N.hostname:N.hostname,N=+N.port;var F=new as(null);_&&qc(F,_),f&&(F.g=f),N&&Wc(F,N),m&&(F.l=m),_=F}return m=u.D,f=u.ya,m&&f&&Se(_,m,f),Se(_,"VER",u.la),hl(u,_),_}function sI(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Ue(new ll({eb:m})):new Ue(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function oI(){}t=oI.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Xc(){}Xc.prototype.g=function(u,f){return new ln(u,f)};function ln(u,f){Rt.call(this),this.g=new Qw(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!y(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!y(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new lo(this)}w(ln,Rt),ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){rm(this.g)},ln.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Wp(u),u=m);f.i.push(new uN(f.Ya++,u)),f.G==3&&Yc(f)},ln.prototype.N=function(){this.g.l=null,delete this.j,rm(this.g),delete this.g,ln.aa.N.call(this)};function aI(u){Kp.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}w(aI,Kp);function lI(){Hp.call(this),this.status=1}w(lI,Hp);function lo(u){this.g=u}w(lo,oI),lo.prototype.ua=function(){Ft(this.g,"a")},lo.prototype.ta=function(u){Ft(this.g,new aI(u))},lo.prototype.sa=function(u){Ft(this.g,new lI)},lo.prototype.ra=function(){Ft(this.g,"b")},Xc.prototype.createWebChannel=Xc.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,aR=function(){return new Xc},oR=function(){return Uc()},sR=ss,my={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$c.NO_ERROR=0,$c.TIMEOUT=8,$c.HTTP_ERROR=6,Bd=$c,Sw.COMPLETE="complete",iR=Sw,vw.EventType=el,el.OPEN="a",el.CLOSE="b",el.ERROR="c",el.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,jl=vw,rR=ll,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,nR=Ue}).apply(typeof _d<"u"?_d:typeof self<"u"?self:typeof window<"u"?window:{});const rT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ua="10.13.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new Pf("@firebase/firestore");function Eo(){return Fi.logLevel}function z5(t){Fi.setLogLevel(t)}function $(t,...e){if(Fi.logLevel<=re.DEBUG){const n=e.map(Av);Fi.debug(`Firestore (${Ua}): ${t}`,...n)}}function Xe(t,...e){if(Fi.logLevel<=re.ERROR){const n=e.map(Av);Fi.error(`Firestore (${Ua}): ${t}`,...n)}}function Yn(t,...e){if(Fi.logLevel<=re.WARN){const n=e.map(Av);Fi.warn(`Firestore (${Ua}): ${t}`,...n)}}function Av(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t="Unexpected state"){const e=`FIRESTORE (${Ua}) INTERNAL ASSERTION FAILED: `+t;throw Xe(e),new Error(e)}function J(t,e){t||Q()}function q5(t,e){t||Q()}function G(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class U extends qt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class W5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pt.UNAUTHENTICATED))}shutdown(){}}class G5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class K5{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new yt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new yt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new yt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(J(typeof r.accessToken=="string"),new lR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return J(e===null||typeof e=="string"),new pt(e)}}class H5{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Q5{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new H5(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Y5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class J5{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(J(typeof n.token=="string"),this.R=n.token,new Y5(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=X5(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function te(t,e){return t<e?-1:t>e?1:0}function ga(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function cR(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new U(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new U(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new U(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new De(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?te(this.nanoseconds,e.nanoseconds):te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.timestamp=e}static fromTimestamp(e){return new X(e)}static min(){return new X(new De(0,0))}static max(){return new X(new De(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(),r===void 0?r=e.length-n:r>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Lu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Lu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class se extends Lu{construct(e,n,r){return new se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new U(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new se(n)}static emptyPath(){return new se([])}}const Z5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ne extends Lu{construct(e,n,r){return new Ne(e,n,r)}static isValidIdentifier(e){return Z5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ne.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ne(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new U(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new U(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new U(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new U(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ne(n)}static emptyPath(){return new Ne([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(se.fromString(e))}static fromName(e){return new W(se.fromString(e).popFirst(5))}static empty(){return new W(se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new se(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function gy(t){return t.fields.find(e=>e.kind===2)}function fs(t){return t.fields.filter(e=>e.kind!==2)}Lh.UNKNOWN_ID=-1;class zd{constructor(e,n){this.fieldPath=e,this.kind=n}}class Fu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Fu(0,yn.min())}}function dR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new De(n+1,0):new De(n,r));return new yn(i,W.empty(),e)}function hR(t){return new yn(t.readTime,t.key,-1)}class yn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new yn(X.min(),W.empty(),-1)}static max(){return new yn(X.max(),W.empty(),-1)}}function bv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function es(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==fR)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new D((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof D?n:D.resolve(n)}catch(n){return D.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):D.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):D.reject(n)}static resolve(e){return new D((n,r)=>{n(e)})}static reject(e){return new D((n,r)=>{r(e)})}static waitFor(e){return new D((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=D.resolve(!1);for(const r of e)n=n.next(i=>i?D.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new D((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new D((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new yt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new nu(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Rv(r.target.error);this.V.reject(new nu(e,i))}}static open(e,n,r,i){try{return new Lf(n,e.transaction(i,r))}catch(s){throw new nu(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||($("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new t3(n)}}class fr{constructor(e,n,r){this.name=e,this.version=n,this.p=r,fr.S(je())===12.2&&Xe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $("SimpleDb","Removing database:",e),ms(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ru())return!1;if(fr.v())return!0;const e=je(),n=fr.S(e),r=0<n&&n<10,i=mR(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||($("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new nu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new U(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new U(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new nu(e,o))},i.onupgradeneeded=s=>{$("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{$("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Lf.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),D.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if($("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function mR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class e3{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ms(this.B.delete())}}class nu extends U{constructor(e,n){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ts(t){return t.name==="IndexedDbTransactionError"}class t3{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?($("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):($("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ms(r)}add(e){return $("SimpleDb","ADD",this.store.name,e,e),ms(this.store.add(e))}get(e){return ms(this.store.get(e)).next(n=>(n===void 0&&(n=null),$("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return $("SimpleDb","DELETE",this.store.name,e),ms(this.store.delete(e))}count(){return $("SimpleDb","COUNT",this.store.name),ms(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new D((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new D((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){$("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new D((r,i)=>{n.onerror=s=>{const o=Rv(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new D((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new e3(a),c=n(a.primaryKey,a.value,l);if(c instanceof D){const d=c.catch(h=>(l.done(),D.reject(h)));r.push(d)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>D.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ms(t){return new D((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Rv(r.target.error);n(i)}})}let iT=!1;function Rv(t){const e=fr.S(je());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new U("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iT||(iT=!0,setTimeout(()=>{throw r},0)),r}}return t}class n3{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){$("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{$("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){ts(n)?$("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await es(n)}await this.X(6e4)})}}class r3{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return D.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return $("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>($("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=hR(s);bv(o,r)>0&&(r=o)}),new yn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}en.oe=-1;function _c(t){return t==null}function ju(t){return t===0&&1/t==-1/0}function gR(t){return typeof t=="number"&&Number.isInteger(t)&&!ju(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=sT(e)),e=i3(t.get(n),e);return sT(e)}function i3(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function sT(t){return t+""}function ur(t){const e=t.length;if(J(e>=2),e===2)return J(t.charAt(0)===""&&t.charAt(1)===""),se.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&Q(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Q()}s=o+2}return new se(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t,e){return[t,Wt(e)]}function yR(t,e,n){return[t,Wt(e),n]}const s3={},o3=["prefixPath","collectionGroup","readTime","documentId"],a3=["prefixPath","collectionGroup","documentId"],l3=["collectionGroup","readTime","prefixPath","documentId"],u3=["canonicalId","targetId"],c3=["targetId","path"],d3=["path","targetId"],h3=["collectionId","parent"],f3=["indexId","uid"],p3=["uid","sequenceNumber"],m3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],g3=["indexId","uid","orderedDocumentKey"],y3=["userId","collectionPath","documentId"],_3=["userId","collectionPath","largestBatchId"],v3=["userId","collectionGroup","largestBatchId"],_R=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],w3=[..._R,"documentOverlays"],vR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],wR=vR,Cv=[...wR,"indexConfiguration","indexState","indexEntries"],I3=Cv,E3=[...Cv,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy extends pR{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function dt(t,e){const n=G(t);return fr.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function to(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function IR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e,n){this.comparator=e,this.root=n||Et.EMPTY}insert(e,n){return new Te(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Et.BLACK,null,null))}remove(e){return new Te(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vd(this.root,e,this.comparator,!1)}getReverseIterator(){return new vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vd(this.root,e,this.comparator,!0)}}class vd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Et{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Et.RED,this.left=i??Et.EMPTY,this.right=s??Et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Et(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Et.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();const e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}}Et.EMPTY=null,Et.RED=!0,Et.BLACK=!1;Et.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.comparator=e,this.data=new Te(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lT(this.data.getIterator())}getIteratorFrom(e){return new lT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof _e)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _e(this.comparator);return n.data=e,n}}class lT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.fields=e,e.sort(Ne.comparator)}static empty(){return new tn([])}unionWith(e){let n=new _e(Ne.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new tn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ga(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ER("Invalid base64 string: "+s):s}}(e);return new Ge(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ge(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ge.EMPTY_BYTE_STRING=new Ge("");const S3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qr(t){if(J(!!t),typeof t=="string"){let e=0;const n=S3.exec(t);if(J(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(t.seconds),nanos:ke(t.nanos)}}function ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ji(t){return typeof t=="string"?Ge.fromBase64String(t):Ge.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function kv(t){const e=t.mapValue.fields.__previous_value__;return Ff(e)?kv(e):e}function Uu(t){const e=qr(t.mapValue.fields.__local_write_time__.timestampValue);return new De(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ui{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ui("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ui&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Wd={nullValue:"NULL_VALUE"};function js(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ff(t)?4:TR(t)?9007199254740991:jf(t)?10:11:Q()}function wr(t,e){if(t===e)return!0;const n=js(t);if(n!==js(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Uu(t).isEqual(Uu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=qr(i.timestampValue),a=qr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ji(i.bytesValue).isEqual(ji(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ke(i.geoPointValue.latitude)===ke(s.geoPointValue.latitude)&&ke(i.geoPointValue.longitude)===ke(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ke(i.integerValue)===ke(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ke(i.doubleValue),a=ke(s.doubleValue);return o===a?ju(o)===ju(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ga(t.arrayValue.values||[],e.arrayValue.values||[],wr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(aT(o)!==aT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!wr(o[l],a[l])))return!1;return!0}(t,e);default:return Q()}}function $u(t,e){return(t.values||[]).find(n=>wr(n,e))!==void 0}function $i(t,e){if(t===e)return 0;const n=js(t),r=js(e);if(n!==r)return te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return te(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ke(s.integerValue||s.doubleValue),l=ke(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return uT(t.timestampValue,e.timestampValue);case 4:return uT(Uu(t),Uu(e));case 5:return te(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ji(s),l=ji(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=te(a[c],l[c]);if(d!==0)return d}return te(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=te(ke(s.latitude),ke(o.latitude));return a!==0?a:te(ke(s.longitude),ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return cT(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,d;const h=s.fields||{},p=o.fields||{},g=(a=h.value)===null||a===void 0?void 0:a.arrayValue,w=(l=p.value)===null||l===void 0?void 0:l.arrayValue,v=te(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return v!==0?v:cT(g,w)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===wi.mapValue&&o===wi.mapValue)return 0;if(s===wi.mapValue)return 1;if(o===wi.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=te(l[h],d[h]);if(p!==0)return p;const g=$i(a[l[h]],c[d[h]]);if(g!==0)return g}return te(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Q()}}function uT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return te(t,e);const n=qr(t),r=qr(e),i=te(n.seconds,r.seconds);return i!==0?i:te(n.nanos,r.nanos)}function cT(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=$i(n[i],r[i]);if(s)return s}return te(n.length,r.length)}function ya(t){return _y(t)}function _y(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=qr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ji(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=_y(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${_y(n.fields[o])}`;return i+"}"}(t.mapValue):Q()}function Us(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function vy(t){return!!t&&"integerValue"in t}function Bu(t){return!!t&&"arrayValue"in t}function dT(t){return!!t&&"nullValue"in t}function hT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gd(t){return!!t&&"mapValue"in t}function jf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ru(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return to(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ru(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ru(t.arrayValue.values[n]);return e}return Object.assign({},t)}function TR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const SR={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function A3(t){return"nullValue"in t?Wd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Us(Ui.empty(),W.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?jf(t)?SR:{mapValue:{}}:Q()}function b3(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Us(Ui.empty(),W.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?SR:"mapValue"in t?jf(t)?{mapValue:{}}:wi:Q()}function fT(t,e){const n=$i(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function pT(t,e){const n=$i(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.value=e}static empty(){return new St({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ru(n)}setAll(e){let n=Ne.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ru(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Gd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Gd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){to(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new St(ru(this.value))}}function PR(t){const e=[];return to(t.fields,(n,r)=>{const i=new Ne([n]);if(Gd(r)){const s=PR(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new tn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ae(e,0,X.min(),X.min(),X.min(),St.empty(),0)}static newFoundDocument(e,n,r,i){return new Ae(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new Ae(e,2,n,X.min(),X.min(),St.empty(),0)}static newUnknownDocument(e,n){return new Ae(e,3,n,X.min(),X.min(),St.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ae&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ae(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n){this.position=e,this.inclusive=n}}function mT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=$i(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function gT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n="asc"){this.field=e,this.dir=n}}function R3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{}class oe extends AR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new C3(e,n,r):n==="array-contains"?new N3(e,r):n==="in"?new NR(e,r):n==="not-in"?new O3(e,r):n==="array-contains-any"?new D3(e,r):new oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new k3(e,r):new x3(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison($i(n,this.value)):n!==null&&js(this.value)===js(n)&&this.matchesComparison($i(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pe extends AR{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new pe(e,n)}matches(e){return _a(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function _a(t){return t.op==="and"}function wy(t){return t.op==="or"}function xv(t){return bR(t)&&_a(t)}function bR(t){for(const e of t.filters)if(e instanceof pe)return!1;return!0}function Iy(t){if(t instanceof oe)return t.field.canonicalString()+t.op.toString()+ya(t.value);if(xv(t))return t.filters.map(e=>Iy(e)).join(",");{const e=t.filters.map(n=>Iy(n)).join(",");return`${t.op}(${e})`}}function RR(t,e){return t instanceof oe?function(r,i){return i instanceof oe&&r.op===i.op&&r.field.isEqual(i.field)&&wr(r.value,i.value)}(t,e):t instanceof pe?function(r,i){return i instanceof pe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&RR(o,i.filters[a]),!0):!1}(t,e):void Q()}function CR(t,e){const n=t.filters.concat(e);return pe.create(n,t.op)}function kR(t){return t instanceof oe?function(n){return`${n.field.canonicalString()} ${n.op} ${ya(n.value)}`}(t):t instanceof pe?function(n){return n.op.toString()+" {"+n.getFilters().map(kR).join(" ,")+"}"}(t):"Filter"}class C3 extends oe{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class k3 extends oe{constructor(e,n){super(e,"in",n),this.keys=xR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class x3 extends oe{constructor(e,n){super(e,"not-in",n),this.keys=xR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function xR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class N3 extends oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bu(n)&&$u(n.arrayValue,this.value)}}class NR extends oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$u(this.value.arrayValue,n)}}class O3 extends oe{constructor(e,n){super(e,"not-in",n)}matches(e){if($u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!$u(this.value.arrayValue,n)}}class D3 extends oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$u(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Ey(t,e=null,n=[],r=[],i=null,s=null,o=null){return new V3(t,e,n,r,i,s,o)}function $s(t){const e=G(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Iy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),_c(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ya(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ya(r)).join(",")),e.ue=n}return e.ue}function vc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!R3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!RR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gT(t.startAt,e.startAt)&&gT(t.endAt,e.endAt)}function Fh(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function jh(t,e){return t.filters.filter(n=>n instanceof oe&&n.field.isEqual(e))}function yT(t,e,n){let r=Wd,i=!0;for(const s of jh(t,e)){let o=Wd,a=!0;switch(s.op){case"<":case"<=":o=A3(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Wd}fT({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];fT({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function _T(t,e,n){let r=wi,i=!0;for(const s of jh(t,e)){let o=wi,a=!0;switch(s.op){case">=":case">":o=b3(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=wi}pT({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];pT({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function OR(t,e,n,r,i,s,o,a){return new Jr(t,e,n,r,i,s,o,a)}function $a(t){return new Jr(t)}function vT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Nv(t){return t.collectionGroup!==null}function Jo(t){const e=G(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new _e(Ne.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new zu(s,r))}),n.has(Ne.keyField().canonicalString())||e.ce.push(new zu(Ne.keyField(),r))}return e.ce}function Gt(t){const e=G(t);return e.le||(e.le=M3(e,Jo(t))),e.le}function M3(t,e){if(t.limitType==="F")return Ey(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new zu(i.field,s)});const n=t.endAt?new Bi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bi(t.startAt.position,t.startAt.inclusive):null;return Ey(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ty(t,e){const n=t.filters.concat([e]);return new Jr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Uh(t,e,n){return new Jr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wc(t,e){return vc(Gt(t),Gt(e))&&t.limitType===e.limitType}function DR(t){return`${$s(Gt(t))}|lt:${t.limitType}`}function To(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>kR(i)).join(", ")}]`),_c(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ya(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ya(i)).join(",")),`Target(${r})`}(Gt(t))}; limitType=${t.limitType})`}function Ic(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):W.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Jo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=mT(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Jo(r),i)||r.endAt&&!function(o,a,l){const c=mT(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Jo(r),i))}(t,e)}function VR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function MR(t){return(e,n)=>{let r=!1;for(const i of Jo(t)){const s=L3(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function L3(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?$i(l,c):Q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){to(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return IR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3=new Te(W.comparator);function nn(){return F3}const LR=new Te(W.comparator);function Ul(...t){let e=LR;for(const n of t)e=e.insert(n.key,n);return e}function FR(t){let e=LR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function cr(){return iu()}function jR(){return iu()}function iu(){return new ns(t=>t.toString(),(t,e)=>t.isEqual(e))}const j3=new Te(W.comparator),U3=new _e(W.comparator);function ne(...t){let e=U3;for(const n of t)e=e.add(n);return e}const $3=new _e(te);function Ov(){return $3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ju(e)?"-0":e}}function UR(t){return{integerValue:""+t}}function $R(t,e){return gR(e)?UR(e):Dv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(){this._=void 0}}function B3(t,e,n){return t instanceof va?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ff(s)&&(s=kv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Bs?zR(t,e):t instanceof zs?qR(t,e):function(i,s){const o=BR(i,s),a=wT(o)+wT(i.Pe);return vy(o)&&vy(i.Pe)?UR(a):Dv(i.serializer,a)}(t,e)}function z3(t,e,n){return t instanceof Bs?zR(t,e):t instanceof zs?qR(t,e):n}function BR(t,e){return t instanceof wa?function(r){return vy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class va extends Uf{}class Bs extends Uf{constructor(e){super(),this.elements=e}}function zR(t,e){const n=WR(e);for(const r of t.elements)n.some(i=>wr(i,r))||n.push(r);return{arrayValue:{values:n}}}class zs extends Uf{constructor(e){super(),this.elements=e}}function qR(t,e){let n=WR(e);for(const r of t.elements)n=n.filter(i=>!wr(i,r));return{arrayValue:{values:n}}}class wa extends Uf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function wT(t){return ke(t.integerValue||t.doubleValue)}function WR(t){return Bu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n){this.field=e,this.transform=n}}function q3(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Bs&&i instanceof Bs||r instanceof zs&&i instanceof zs?ga(r.elements,i.elements,wr):r instanceof wa&&i instanceof wa?wr(r.Pe,i.Pe):r instanceof va&&i instanceof va}(t.transform,e.transform)}class W3{constructor(e,n){this.version=e,this.transformResults=n}}class Oe{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Oe}static exists(e){return new Oe(void 0,e)}static updateTime(e){return new Oe(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $f{}function GR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new za(t.key,Oe.none()):new Ba(t.key,t.data,Oe.none());{const n=t.data,r=St.empty();let i=new _e(Ne.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Xr(t.key,r,new tn(i.toArray()),Oe.none())}}function G3(t,e,n){t instanceof Ba?function(i,s,o){const a=i.value.clone(),l=ET(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Xr?function(i,s,o){if(!Kd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=ET(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(KR(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function su(t,e,n,r){return t instanceof Ba?function(s,o,a,l){if(!Kd(s.precondition,o))return a;const c=s.value.clone(),d=TT(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xr?function(s,o,a,l){if(!Kd(s.precondition,o))return a;const c=TT(s.fieldTransforms,l,o),d=o.data;return d.setAll(KR(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Kd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function K3(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=BR(r.transform,i||null);s!=null&&(n===null&&(n=St.empty()),n.set(r.field,s))}return n||null}function IT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ga(r,i,(s,o)=>q3(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ba extends $f{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xr extends $f{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function KR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ET(t,e,n){const r=new Map;J(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,z3(o,a,n[i]))}return r}function TT(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,B3(s,o,e))}return r}class za extends $f{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vv extends $f{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&G3(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=su(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=su(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=jR();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=GR(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&ga(this.mutations,e.mutations,(n,r)=>IT(n,r))&&ga(this.baseMutations,e.baseMutations,(n,r)=>IT(n,r))}}class Lv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){J(e.mutations.length===r.length);let i=function(){return j3}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Lv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt,le;function HR(t){switch(t){default:return Q();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function QR(t){if(t===void 0)return Xe("GRPC error has no .code"),L.UNKNOWN;switch(t){case rt.OK:return L.OK;case rt.CANCELLED:return L.CANCELLED;case rt.UNKNOWN:return L.UNKNOWN;case rt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case rt.INTERNAL:return L.INTERNAL;case rt.UNAVAILABLE:return L.UNAVAILABLE;case rt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case rt.NOT_FOUND:return L.NOT_FOUND;case rt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case rt.ABORTED:return L.ABORTED;case rt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case rt.DATA_LOSS:return L.DATA_LOSS;default:return Q()}}(le=rt||(rt={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3=new ks([4294967295,4294967295],0);function ST(t){const e=YR().encode(t),n=new tR;return n.update(e),new Uint8Array(n.digest())}function PT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ks([n,r],0),new ks([i,s],0)]}class jv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $l(`Invalid padding: ${n}`);if(r<0)throw new $l(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $l(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $l(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ks.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ks.fromNumber(r)));return i.compare(Q3)===1&&(i=new ks([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ST(e),[r,i]=PT(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new jv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=ST(e),[r,i]=PT(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class $l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Sc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Tc(X.min(),i,new Te(te),nn(),ne())}}class Sc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Sc(r,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class JR{constructor(e,n){this.targetId=e,this.me=n}}class XR{constructor(e,n,r=Ge.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class AT{constructor(){this.fe=0,this.ge=RT(),this.pe=Ge.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ne(),n=ne(),r=ne();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q()}}),new Sc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=RT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,J(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Y3{constructor(e){this.Le=e,this.Be=new Map,this.ke=nn(),this.qe=bT(),this.Qe=new Te(te)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Fh(s))if(r===0){const o=new W(s.path);this.Ue(n,o,Ae.newNoDocument(o,X.min()))}else J(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ji(r).toUint8Array()}catch(l){if(l instanceof ER)return Yn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new jv(o,i,s)}catch(l){return Yn(l instanceof $l?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Fh(a.target)){const l=new W(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ae.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ne();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Tc(e,n,this.Qe,this.ke,r);return this.ke=nn(),this.qe=bT(),this.Qe=new Te(te),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new AT,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new _e(te),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new AT),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function bT(){return new Te(W.comparator)}function RT(){return new Te(W.comparator)}const J3=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),X3=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Z3=(()=>({and:"AND",or:"OR"}))();class ej{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Sy(t,e){return t.useProto3Json||_c(e)?e:{value:e}}function Ia(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function tj(t,e){return Ia(t,e.toTimestamp())}function et(t){return J(!!t),X.fromTimestamp(function(n){const r=qr(n);return new De(r.seconds,r.nanos)}(t))}function Uv(t,e){return Py(t,e).canonicalString()}function Py(t,e){const n=function(i){return new se(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function eC(t){const e=se.fromString(t);return J(cC(e)),e}function qu(t,e){return Uv(t.databaseId,e.path)}function pr(t,e){const n=eC(e);if(n.get(1)!==t.databaseId.projectId)throw new U(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new U(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(rC(n))}function tC(t,e){return Uv(t.databaseId,e)}function nC(t){const e=eC(t);return e.length===4?se.emptyPath():rC(e)}function Ay(t){return new se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rC(t){return J(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function CT(t,e,n){return{name:qu(t,e),fields:n.value.mapValue.fields}}function iC(t,e,n){const r=pr(t,e.name),i=et(e.updateTime),s=e.createTime?et(e.createTime):X.min(),o=new St({mapValue:{fields:e.fields}}),a=Ae.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function nj(t,e){return"found"in e?function(r,i){J(!!i.found),i.found.name,i.found.updateTime;const s=pr(r,i.found.name),o=et(i.found.updateTime),a=i.found.createTime?et(i.found.createTime):X.min(),l=new St({mapValue:{fields:i.found.fields}});return Ae.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){J(!!i.missing),J(!!i.readTime);const s=pr(r,i.missing),o=et(i.readTime);return Ae.newNoDocument(s,o)}(t,e):Q()}function rj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(J(d===void 0||typeof d=="string"),Ge.fromBase64String(d||"")):(J(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ge.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?L.UNKNOWN:QR(c.code);return new U(d,c.message||"")}(o);n=new XR(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=pr(t,r.document.name),s=et(r.document.updateTime),o=r.document.createTime?et(r.document.createTime):X.min(),a=new St({mapValue:{fields:r.document.fields}}),l=Ae.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Hd(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=pr(t,r.document),s=r.readTime?et(r.readTime):X.min(),o=Ae.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Hd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=pr(t,r.document),s=r.removedTargetIds||[];n=new Hd([],s,i,null)}else{if(!("filter"in e))return Q();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new H3(i,s),a=r.targetId;n=new JR(a,o)}}return n}function Wu(t,e){let n;if(e instanceof Ba)n={update:CT(t,e.key,e.value)};else if(e instanceof za)n={delete:qu(t,e.key)};else if(e instanceof Xr)n={update:CT(t,e.key,e.data),updateMask:uj(e.fieldMask)};else{if(!(e instanceof Vv))return Q();n={verify:qu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof va)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Bs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof zs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof wa)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:tj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q()}(t,e.precondition)),n}function by(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Oe.updateTime(et(s.updateTime)):s.exists!==void 0?Oe.exists(s.exists):Oe.none()}(e.currentDocument):Oe.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)J(a.setToServerValue==="REQUEST_TIME"),l=new va;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new Bs(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new zs(d)}else"increment"in a?l=new wa(o,a.increment):Q();const c=Ne.fromServerFormat(a.fieldPath);return new Ec(c,l)}(t,i)):[];if(e.update){e.update.name;const i=pr(t,e.update.name),s=new St({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new tn(c.map(d=>Ne.fromServerFormat(d)))}(e.updateMask);return new Xr(i,s,o,n,r)}return new Ba(i,s,n,r)}if(e.delete){const i=pr(t,e.delete);return new za(i,n)}if(e.verify){const i=pr(t,e.verify);return new Vv(i,n)}return Q()}function ij(t,e){return t&&t.length>0?(J(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?et(i.updateTime):et(s);return o.isEqual(X.min())&&(o=et(s)),new W3(o,i.transformResults||[])}(n,e))):[]}function sC(t,e){return{documents:[tC(t,e.path)]}}function oC(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=tC(t,i);const s=function(c){if(c.length!==0)return uC(pe.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:So(p.field),direction:oj(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Sy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function aC(t){let e=nC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){J(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const p=lC(h);return p instanceof pe&&xv(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(w){return new zu(Po(w.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,_c(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,g=h.values||[];return new Bi(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,g=h.values||[];return new Bi(g,p)}(n.endAt)),OR(e,i,o,s,a,"F",l,c)}function sj(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Po(n.unaryFilter.field);return oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Po(n.unaryFilter.field);return oe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Po(n.unaryFilter.field);return oe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Po(n.unaryFilter.field);return oe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return oe.create(Po(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return pe.create(n.compositeFilter.filters.map(r=>lC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function oj(t){return J3[t]}function aj(t){return X3[t]}function lj(t){return Z3[t]}function So(t){return{fieldPath:t.canonicalString()}}function Po(t){return Ne.fromServerFormat(t.fieldPath)}function uC(t){return t instanceof oe?function(n){if(n.op==="=="){if(hT(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NAN"}};if(dT(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hT(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NOT_NAN"}};if(dT(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(n.field),op:aj(n.op),value:n.value}}}(t):t instanceof pe?function(n){const r=n.getFilters().map(i=>uC(i));return r.length===1?r[0]:{compositeFilter:{op:lj(n.op),filters:r}}}(t):Q()}function uj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function cC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n,r,i,s=X.min(),o=X.min(),a=Ge.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.ct=e}}function cj(t,e){let n;if(e.document)n=iC(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=W.fromSegments(e.noDocument.path),i=Ws(e.noDocument.readTime);n=Ae.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Q();{const r=W.fromSegments(e.unknownDocument.path),i=Ws(e.unknownDocument.version);n=Ae.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new De(i[0],i[1]);return X.fromTimestamp(s)}(e.readTime)),n}function kT(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:$h(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:qu(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Ia(s,o.version.toTimestamp()),createTime:Ia(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:qs(e.version)};else{if(!e.isUnknownDocument())return Q();r.unknownDocument={path:n.path.toArray(),version:qs(e.version)}}return r}function $h(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function qs(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ws(t){const e=new De(t.seconds,t.nanoseconds);return X.fromTimestamp(e)}function gs(t,e){const n=(e.baseMutations||[]).map(s=>by(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>by(t.ct,s)),i=De.fromMillis(e.localWriteTimeMs);return new Mv(e.batchId,i,n,r)}function Bl(t){const e=Ws(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ws(t.lastLimboFreeSnapshotVersion):X.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return J(s.documents.length===1),Gt($a(nC(s.documents[0])))}(t.query):function(s){return Gt(aC(s))}(t.query),new Vr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ge.fromBase64String(t.resumeToken))}function hC(t,e){const n=qs(e.snapshotVersion),r=qs(e.lastLimboFreeSnapshotVersion);let i;i=Fh(e.target)?sC(t.ct,e.target):oC(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$s(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function $v(t){const e=aC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Uh(e,e.limit,"L"):e}function qm(t,e){return new Fv(e.largestBatchId,by(t.ct,e.overlayMutation))}function xT(t,e){const n=e.path.lastSegment();return[t,Wt(e.path.popLast()),n]}function NT(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:qs(r.readTime),documentKey:Wt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{getBundleMetadata(e,n){return OT(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Ws(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return OT(e).put(function(i){return{bundleId:i.id,createTime:qs(et(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return DT(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:$v(s.bundledQuery),readTime:Ws(s.readTime)}}(r)})}saveNamedQuery(e,n){return DT(e).put(function(i){return{name:i.name,readTime:qs(et(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function OT(t){return dt(t,"bundles")}function DT(t){return dt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Bf(e,r)}getOverlay(e,n){return Sl(e).get(xT(this.userId,n)).next(r=>r?qm(this.serializer,r):null)}getOverlays(e,n){const r=cr();return D.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new Fv(n,o);i.push(this.ht(e,a))}),D.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Wt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Sl(e).j("collectionPathOverlayIndex",a))}),D.waitFor(s)}getOverlaysForCollection(e,n,r){const i=cr(),s=Wt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Sl(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=qm(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=cr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Sl(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,d)=>{const h=qm(this.serializer,c);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}ht(e,n){return Sl(e).put(function(i,s,o){const[a,l,c]=xT(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Wu(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function Sl(t){return dt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{Pt(e){return dt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Ge.fromUint8Array(r):Ge.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(ke(e.integerValue));else if("doubleValue"in e){const r=ke(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),ju(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=qr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(ji(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?TR(e)?this.dt(n,Number.MAX_SAFE_INTEGER):jf(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Q()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const s=e.fields||{};this.dt(n,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(ke(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),W.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}ys.vt=new ys;function fj(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function VT(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=fj(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class pj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=VT(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=VT(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class mj{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class gj{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Pl{constructor(){this.jt=new pj,this.Ht=new mj(this.jt),this.Jt=new gj(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new _s(this.indexId,this.documentKey,this.arrayValue,r)}}function si(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=MT(t.arrayValue,e.arrayValue),n!==0?n:(n=MT(t.directionalValue,e.directionalValue),n!==0?n:W.comparator(t.documentKey,e.documentKey)))}function MT(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e){this.Xt=new _e((n,r)=>Ne.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(J(e.collectionGroup===this.collectionId),this.nn)return!1;const n=gy(e);if(n!==void 0&&!this.sn(n))return!1;const r=fs(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new _e(Ne.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new zd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new zd(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new zd(r.field,r.dir==="asc"?0:1)));return new Lh(Lh.UNKNOWN_ID,this.collectionId,n,Fu.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(t){var e,n;if(J(t instanceof oe||t instanceof pe),t instanceof oe){if(t instanceof NR){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>oe.create(t.field,"==",s)))||[];return pe.create(i,"or")}return t}const r=t.filters.map(i=>fC(i));return pe.create(r,t.op)}function yj(t){if(t.getFilters().length===0)return[];const e=ky(fC(t));return J(pC(e)),Ry(e)||Cy(e)?[e]:e.getFilters()}function Ry(t){return t instanceof oe}function Cy(t){return t instanceof pe&&xv(t)}function pC(t){return Ry(t)||Cy(t)||function(n){if(n instanceof pe&&wy(n)){for(const r of n.getFilters())if(!Ry(r)&&!Cy(r))return!1;return!0}return!1}(t)}function ky(t){if(J(t instanceof oe||t instanceof pe),t instanceof oe)return t;if(t.filters.length===1)return ky(t.filters[0]);const e=t.filters.map(r=>ky(r));let n=pe.create(e,t.op);return n=Bh(n),pC(n)?n:(J(n instanceof pe),J(_a(n)),J(n.filters.length>1),n.filters.reduce((r,i)=>Bv(r,i)))}function Bv(t,e){let n;return J(t instanceof oe||t instanceof pe),J(e instanceof oe||e instanceof pe),n=t instanceof oe?e instanceof oe?function(i,s){return pe.create([i,s],"and")}(t,e):FT(t,e):e instanceof oe?FT(e,t):function(i,s){if(J(i.filters.length>0&&s.filters.length>0),_a(i)&&_a(s))return CR(i,s.getFilters());const o=wy(i)?i:s,a=wy(i)?s:i,l=o.filters.map(c=>Bv(c,a));return pe.create(l,"or")}(t,e),Bh(n)}function FT(t,e){if(_a(e))return CR(e,t.getFilters());{const n=e.filters.map(r=>Bv(t,r));return pe.create(n,"or")}}function Bh(t){if(J(t instanceof oe||t instanceof pe),t instanceof oe)return t;const e=t.getFilters();if(e.length===1)return Bh(e[0]);if(bR(t))return t;const n=e.map(i=>Bh(i)),r=[];return n.forEach(i=>{i instanceof oe?r.push(i):i instanceof pe&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:pe.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(){this.un=new zv}addToCollectionParentIndex(e,n){return this.un.add(n),D.resolve()}getCollectionParents(e,n){return D.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return D.resolve()}deleteFieldIndex(e,n){return D.resolve()}deleteAllFieldIndexes(e){return D.resolve()}createTargetIndexes(e,n){return D.resolve()}getDocumentsMatchingTarget(e,n){return D.resolve(null)}getIndexType(e,n){return D.resolve(0)}getFieldIndexes(e,n){return D.resolve([])}getNextCollectionGroupToUpdate(e){return D.resolve(null)}getMinOffset(e,n){return D.resolve(yn.min())}getMinOffsetFromCollectionGroup(e,n){return D.resolve(yn.min())}updateCollectionGroup(e,n,r){return D.resolve()}updateIndexEntries(e,n){return D.resolve()}}class zv{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new _e(se.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _e(se.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=new Uint8Array(0);class vj{constructor(e,n){this.databaseId=n,this.cn=new zv,this.ln=new ns(r=>$s(r),(r,i)=>vc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:Wt(i)};return jT(e).put(s)}return D.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[cR(n),""],!1,!0);return jT(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(ur(o.parent))}return r})}addFieldIndex(e,n){const r=Al(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=mo(e);return s.next(a=>{o.put(NT(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Al(e),i=mo(e),s=po(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Al(e),r=po(e),i=mo(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return D.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new LT(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=po(e);let i=!0;const s=new Map;return D.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ne();const a=[];return D.forEach(s,(l,c)=>{$("IndexedDbIndexManager",`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(k=>`${k.fieldPath}:${k.kind}`).join(",")}`}(l)} to execute ${$s(n)}`);const d=function(T,k){const V=gy(k);if(V===void 0)return null;for(const j of jh(T,V.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null}(c,l),h=function(T,k){const V=new Map;for(const j of fs(k))for(const S of jh(T,j.fieldPath))switch(S.op){case"==":case"in":V.set(j.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return V.set(j.fieldPath.canonicalString(),S.value),Array.from(V.values())}return null}(c,l),p=function(T,k){const V=[];let j=!0;for(const S of fs(k)){const E=S.kind===0?yT(T,S.fieldPath,T.startAt):_T(T,S.fieldPath,T.startAt);V.push(E.value),j&&(j=E.inclusive)}return new Bi(V,j)}(c,l),g=function(T,k){const V=[];let j=!0;for(const S of fs(k)){const E=S.kind===0?_T(T,S.fieldPath,T.endAt):yT(T,S.fieldPath,T.endAt);V.push(E.value),j&&(j=E.inclusive)}return new Bi(V,j)}(c,l),w=this.In(l,c,p),v=this.In(l,c,g),A=this.Tn(l,c,h),I=this.En(l.indexId,d,w,p.inclusive,v,g.inclusive,A);return D.forEach(I,y=>r.G(y,n.limit).next(T=>{T.forEach(k=>{const V=W.fromSegments(k.documentKey);o.has(V)||(o=o.add(V),a.push(V))})}))}).next(()=>a)}return D.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=yj(pe.create(e.filters,"and")).map(r=>Ey(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const p=n?this.dn(n[h/c]):wd,g=this.An(e,p,r[h%c],i),w=this.Rn(e,p,s[h%c],o),v=a.map(A=>this.An(e,p,A,!0));d.push(...this.createRange(g,w,v))}return d}An(e,n,r,i){const s=new _s(e,W.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){const s=new _s(e,W.empty(),n,r);return i?s.Zt():s}Pn(e,n){const r=new LT(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.hn(n);return D.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new _e(Ne.comparator),d=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:c=c.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){const r=new Pl;for(const i of fs(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);ys.vt.It(s,o)}return r.zt()}dn(e){const n=new Pl;return ys.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Pl;return ys.vt.It(Us(this.databaseId,n),r.Yt(function(s){const o=fs(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new Pl);let s=0;for(const o of fs(e)){const a=r[s++];for(const l of i)if(this.fn(n,o.fieldPath)&&Bu(a))i=this.gn(i,o,a);else{const c=l.Yt(o.kind);ys.vt.It(a,c)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Pl;l.seed(a.zt()),ys.vt.It(o,l.Yt(n.kind)),s.push(l)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof oe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Al(e),i=mo(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return D.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const p=h?new Fu(h.sequenceNumber,new yn(Ws(h.readTime),new W(ur(h.documentKey)),h.largestBatchId)):Fu.empty(),g=d.fields.map(([w,v])=>new zd(Ne.fromServerFormat(w),v));return new Lh(d.indexId,d.collectionGroup,g,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:te(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Al(e),s=mo(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>D.forEach(a,l=>s.put(NT(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return D.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?D.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),D.forEach(a,l=>this.wn(e,i,l).next(c=>{const d=this.Sn(s,l);return c.isEqual(d)?D.resolve():this.bn(e,s,l,c,d)}))))})}Dn(e,n,r,i){return po(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return po(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=po(e);let s=new _e(si);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{s=s.add(new _s(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,n){let r=new _e(si);const i=this.Vn(n,e);if(i==null)return r;const s=gy(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Bu(o))for(const a of o.arrayValue.values||[])r=r.add(new _s(n.indexId,e.key,this.dn(a),i))}else r=r.add(new _s(n.indexId,e.key,wd,i));return r}bn(e,n,r,i,s){$("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,p){const g=l.getIterator(),w=c.getIterator();let v=fo(g),A=fo(w);for(;v||A;){let I=!1,y=!1;if(v&&A){const T=d(v,A);T<0?y=!0:T>0&&(I=!0)}else v!=null?y=!0:I=!0;I?(h(A),A=fo(w)):y?(p(v),v=fo(g)):(v=fo(g),A=fo(w))}}(i,s,si,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),D.waitFor(o)}yn(e){let n=1;return mo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>si(o,a)).filter((o,a,l)=>!a||si(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=si(o,e),l=si(o,n);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,wd,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,wd,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,n){return si(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(UT)}getMinOffset(e,n){return D.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||Q())).next(UT)}}function jT(t){return dt(t,"collectionParents")}function po(t){return dt(t,"indexEntries")}function Al(t){return dt(t,"indexConfiguration")}function mo(t){return dt(t,"indexState")}function UT(t){J(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;bv(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new yn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Jt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(d,h,p)=>(a++,p.delete()));s.push(l.next(()=>{J(a===1)}));const c=[];for(const d of n.mutations){const h=yR(e,d.key.path,n.batchId);s.push(i.delete(h)),c.push(d.key)}return D.waitFor(s).next(()=>c)}function zh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Q();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(41943040,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);class zf{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){J(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new zf(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return oi(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Ao(e),o=oi(e);return o.add({}).next(a=>{J(typeof a=="number");const l=new Mv(a,n,r,i),c=function(g,w,v){const A=v.baseMutations.map(y=>Wu(g.ct,y)),I=v.mutations.map(y=>Wu(g.ct,y));return{userId:w,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:A,mutations:I}}(this.serializer,this.userId,l),d=[];let h=new _e((p,g)=>te(p.canonicalString(),g.canonicalString()));for(const p of i){const g=yR(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(c)),d.push(s.put(g,s3))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),D.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return oi(e).get(n).next(r=>r?(J(r.userId===this.userId),gs(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?D.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return oi(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(J(a.batchId>=r),s=gs(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return oi(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return oi(e).U("userMutationsIndex",n).next(r=>r.map(i=>gs(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=qd(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Ao(e).J({range:i},(o,a,l)=>{const[c,d,h]=o,p=ur(d);if(c===this.userId&&n.path.isEqual(p))return oi(e).get(h).next(g=>{if(!g)throw Q();J(g.userId===this.userId),s.push(gs(this.serializer,g))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _e(te);const i=[];return n.forEach(s=>{const o=qd(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Ao(e).J({range:a},(c,d,h)=>{const[p,g,w]=c,v=ur(g);p===this.userId&&s.path.isEqual(v)?r=r.add(w):h.done()});i.push(l)}),D.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=qd(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new _e(te);return Ao(e).J({range:o},(l,c,d)=>{const[h,p,g]=l,w=ur(p);h===this.userId&&r.isPrefixOf(w)?w.length===i&&(a=a.add(g)):d.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(oi(e).get(s).next(o=>{if(o===null)throw Q();J(o.userId===this.userId),r.push(gs(this.serializer,o))}))}),D.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return mC(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),D.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return D.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Ao(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=ur(s[1]);i.push(l)}else a.done()}).next(()=>{J(i.length===0)})})}containsKey(e,n){return gC(e,this.userId,n)}Nn(e){return yC(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function gC(t,e,n){const r=qd(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Ao(t).J({range:s,H:!0},(a,l,c)=>{const[d,h,p]=a;d===e&&h===i&&(o=!0),c.done()}).next(()=>o)}function oi(t){return dt(t,"mutations")}function Ao(t){return dt(t,"documentMutations")}function yC(t){return dt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Gs(0)}static kn(){return new Gs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new Gs(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>X.fromTimestamp(new De(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>go(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(J(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return go(e).J((o,a)=>{const l=Bl(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>D.waitFor(s)).next(()=>i)}forEachTarget(e,n){return go(e).J((r,i)=>{const s=Bl(i);n(s)})}qn(e){return BT(e).get("targetGlobalKey").next(n=>(J(n!==null),n))}Qn(e,n){return BT(e).put("targetGlobalKey",n)}Kn(e,n){return go(e).put(hC(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=$s(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return go(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=Bl(a);vc(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=hi(e);return n.forEach(o=>{const a=Wt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),D.waitFor(i)}removeMatchingKeys(e,n,r){const i=hi(e);return D.forEach(n,s=>{const o=Wt(s.path);return D.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=hi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=hi(e);let s=ne();return i.J({range:r,H:!0},(o,a,l)=>{const c=ur(o[1]),d=new W(c);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=Wt(n.path),i=IDBKeyRange.bound([r],[cR(r)],!1,!0);let s=0;return hi(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,n){return go(e).get(n).next(r=>r?Bl(r):null)}}function go(t){return dt(t,"targets")}function BT(t){return dt(t,"targetGlobal")}function hi(t){return dt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT([t,e],[n,r]){const i=te(t,n);return i===0?te(e,r):i}class Ij{constructor(e){this.Un=e,this.buffer=new _e(zT),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();zT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Ej{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){$("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ts(n)?$("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await es(n)}await this.Hn(3e5)})}}class Tj{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return D.resolve(en.oe);const r=new Ij(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),D.resolve($T)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$T):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Eo()<=re.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),D.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function Sj(t,e){return new Tj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e,n){this.db=e,this.garbageCollector=Sj(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return Id(e,r)}removeReference(e,n,r){return Id(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Id(e,n)}nr(e,n){return function(i,s){let o=!1;return yC(i).Y(a=>gC(i,a,s).next(l=>(l&&(o=!0),D.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=n){const l=this.nr(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,X.min()),hi(e).delete(function(h){return[0,Wt(h.path)]}(o))))});i.push(l)}}).next(()=>D.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Id(e,n)}tr(e,n){const r=hi(e);let i,s=en.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==en.oe&&n(new W(ur(i)),s),s=c,i=l):s=en.oe}).next(()=>{s!==en.oe&&n(new W(ur(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Id(t,e){return hi(t).put(function(r,i){return{targetId:0,path:Wt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(){this.changes=new ns(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ae.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?D.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return us(e).put(r)}removeEntry(e,n,r){return us(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],$h(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Ae.newInvalidDocument(n);return us(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bl(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:Ae.newInvalidDocument(n)};return us(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bl(n))},(i,s)=>{r={document:this.ir(n,s),size:zh(s)}}).next(()=>r)}getEntries(e,n){let r=nn();return this._r(e,n,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=nn(),i=new Te(W.comparator);return this._r(e,n,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,zh(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return D.resolve();let i=new _e(GT);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(bl(i.first()),bl(i.last())),o=i.getIterator();let a=o.getNext();return us(e).J({index:"documentKeyIndex",range:s},(l,c,d)=>{const h=W.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&GT(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.$(bl(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),$h(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return us(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let d=nn();for(const h of c){const p=this.ir(W.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(Ic(n,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,n,r,i){let s=nn();const o=WT(n,r),a=WT(n,yn.max());return us(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.ir(W.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new bj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return qT(e).get("remoteDocumentGlobalKey").next(n=>(J(!!n),n))}rr(e,n){return qT(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=cj(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(X.min())))return r}return Ae.newInvalidDocument(e)}}function vC(t){return new Aj(t)}class bj extends _C{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new ns(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new _e((s,o)=>te(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=kT(this.cr.serializer,o);i=i.add(s.path.popLast());const c=zh(l);r+=c-a.size,n.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=kT(this.cr.serializer,o.convertToNoDocument(X.min()));n.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),D.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function qT(t){return dt(t,"remoteDocumentGlobal")}function us(t){return dt(t,"remoteDocumentsV14")}function bl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function WT(t,e){const n=e.documentKey.path.toArray();return[t,$h(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function GT(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=te(n[s],r[s]),i)return i;return i=te(n.length,r.length),i||(i=te(n[n.length-2],r[r.length-2]),i||te(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&su(r.mutation,i,tn.empty(),De.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const i=cr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ul();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=cr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=nn();const o=iu(),a=function(){return iu()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof Xr)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),su(d.mutation,c,d.mutation.getFieldMask(),De.now())):o.set(c.key,tn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new Rj(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=iu();let i=new Te((o,a)=>o-a),s=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||tn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(i.get(a.batchId)||ne()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=jR();d.forEach(p=>{if(!s.has(p)){const g=GR(n.get(p),r.get(p));g!==null&&h.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return D.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Nv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):D.resolve(cr());let a=-1,l=s;return o.next(c=>D.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?D.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ne())).next(d=>({batchId:a,changes:FR(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let i=Ul();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ul();return this.indexManager.getCollectionParents(e,s).next(a=>D.forEach(a,l=>{const c=function(h,p){return new Jr(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Ae.newInvalidDocument(d)))});let a=Ul();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&su(d.mutation,c,tn.empty(),De.now()),Ic(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return D.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:et(i.createTime)}}(n)),D.resolve()}getNamedQuery(e,n){return D.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:$v(i.bundledQuery),readTime:et(i.readTime)}}(n)),D.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(){this.overlays=new Te(W.comparator),this.Ir=new Map}getOverlay(e,n){return D.resolve(this.overlays.get(n))}getOverlays(e,n){const r=cr();return D.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),D.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),D.resolve()}getOverlaysForCollection(e,n,r){const i=cr(),s=n.length+1,o=new W(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return D.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Te((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=cr(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=cr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return D.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Fv(n,r));let s=this.Ir.get(n);s===void 0&&(s=ne(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(e){return D.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,D.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(){this.Tr=new _e(ht.Er),this.dr=new _e(ht.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ht(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ht(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new W(new se([])),r=new ht(n,e),i=new ht(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new W(new se([])),r=new ht(n,e),i=new ht(n,e+1);let s=ne();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ht(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ht{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return W.comparator(e.key,n.key)||te(e.wr,n.wr)}static Ar(e,n){return te(e.wr,n.wr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new _e(ht.Er)}checkEmpty(e){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Mv(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new ht(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return D.resolve(o)}lookupMutationBatch(e,n){return D.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return D.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ht(n,0),i=new ht(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),D.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _e(te);return n.forEach(i=>{const s=new ht(i,0),o=new ht(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),D.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;W.isDocumentKey(s)||(s=s.child(""));const o=new ht(new W(s),0);let a=new _e(te);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),D.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){J(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return D.forEach(n.mutations,i=>{const s=new ht(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ht(n,0),i=this.br.firstAfterOrEqual(r);return D.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,D.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e){this.Mr=e,this.docs=function(){return new Te(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return D.resolve(r?r.document.mutableCopy():Ae.newInvalidDocument(n))}getEntries(e,n){let r=nn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ae.newInvalidDocument(i))}),D.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=nn();const o=n.path,a=new W(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||bv(hR(d),r)<=0||(i.has(d.key)||Ic(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return D.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Q()}Or(e,n){return D.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Dj(this)}getSize(e){return D.resolve(this.size)}}class Dj extends _C{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),D.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e){this.persistence=e,this.Nr=new ns(n=>$s(n),vc),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new qv,this.targetCount=0,this.kr=Gs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),D.resolve()}getLastRemoteSnapshotVersion(e){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return D.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),D.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Gs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,D.resolve()}updateTargetData(e,n){return this.Kn(n),D.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,D.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),D.waitFor(s).next(()=>i)}getTargetCount(e){return D.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return D.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),D.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),D.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),D.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return D.resolve(r)}containsKey(e,n){return D.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new en(0),this.Kr=!1,this.Kr=!0,this.$r=new xj,this.referenceDelegate=e(this),this.Ur=new Vj(this),this.indexManager=new _j,this.remoteDocumentCache=function(i){return new Oj(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new dC(n),this.Gr=new Cj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Nj(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);const i=new Mj(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return D.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Mj extends pR{constructor(e){super(),this.currentSequenceNumber=e}}class qf{constructor(e){this.persistence=e,this.Jr=new qv,this.Yr=null}static Zr(e){return new qf(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),D.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),D.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),D.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.Xr,r=>{const i=W.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return D.or([()=>D.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.serializer=e}O(e,n,r,i){const s=new Lf("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oT,{unique:!0}),l.createObjectStore("documentMutations")}(e),KT(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=D.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),KT(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:X.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oT,{unique:!0});const h=c.store("mutations"),p=d.map(g=>h.put(g));return D.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:y3});c.createIndex("collectionPathOverlayIndex",_3,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",v3,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:o3});c.createIndex("documentKeyIndex",a3),c.createIndex("collectionGroupIndex",l3)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:f3}).createIndex("sequenceNumberIndex",p3,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:m3}).createIndex("documentKeyIndex",g3,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=zh(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>D.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>D.forEach(a,l=>{J(l.userId===s.userId);const c=gs(this.serializer,l);return mC(e,s.userId,c).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new se(o),c=function(h){return[0,Wt(h)]}(l);s.push(n.get(c).next(d=>d?D.resolve():(h=>n.put({targetId:0,path:Wt(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>D.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:h3});const r=n.store("collectionParents"),i=new zv,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Wt(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new se(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],c)=>{const d=ur(a);return s(d.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const s=Bl(i),o=hC(this.serializer,s);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(h){return h.document?new W(se.fromString(h.document.name).popFirst(5)):h.noDocument?W.fromSegments(h.noDocument.path):h.unknownDocument?W.fromSegments(h.unknownDocument.path):Q()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>D.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=vC(this.serializer),s=new IC(qf.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let d=(c=a.get(l.userId))!==null&&c!==void 0?c:ne();gs(this.serializer,l).keys().forEach(h=>d=d.add(h)),a.set(l.userId,d)}),D.forEach(a,(l,c)=>{const d=new pt(c),h=Bf.lt(this.serializer,d),p=s.getIndexManager(d),g=zf.lt(d,this.serializer,p,s.referenceDelegate);return new wC(i,g,h,p).recalculateAndSaveOverlaysForDocumentKeys(new yy(n,en.oe),l).next()})})}}function KT(t){t.createObjectStore("targetDocuments",{keyPath:c3}).createIndex("documentTargetsIndex",d3,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",u3,{unique:!0}),t.createObjectStore("targetGlobal")}const Wm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Wv{constructor(e,n,r,i,s,o,a,l,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!Wv.D())throw new U(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Pj(this,i),this.Ai=n+"main",this.serializer=new dC(l),this.Ri=new fr(this.Ai,this.hi,new Lj(this.serializer)),this.$r=new hj,this.Ur=new wj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=vC(this.serializer),this.Gr=new dj,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Xe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new U(L.FAILED_PRECONDITION,Wm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new en(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ed(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(ts(e))return $("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Rl(e).get("owner").next(n=>D.resolve(this.vi(n)))}Ci(e){return Ed(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=dt(n,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return D.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?D.resolve(!0):Rl(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new U(L.FAILED_PRECONDITION,Wm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ed(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&$("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new yy(e,en.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Ed(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return zf.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new vj(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Bf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){$("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===17?E3:l===16?I3:l===15?Cv:l===14?wR:l===13?vR:l===12?w3:l===11?_R:void Q()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,a=>(o=new yy(a,this.Qr?this.Qr.next():en.oe),n==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw Xe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new U(L.FAILED_PRECONDITION,fR);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Rl(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new U(L.FAILED_PRECONDITION,Wm)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rl(e).put("owner",n)}static D(){return fr.D()}bi(e){const n=Rl(e);return n.get("owner").next(r=>this.vi(r)?($("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):D.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Xe(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;zA()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return $("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xe("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Xe("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Rl(t){return dt(t,"owner")}function Ed(t){return dt(t,"clientMetadata")}function Gv(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ne(),i=ne();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Kv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return zA()?8:mR(je())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Fj;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Eo()<=re.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",To(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),D.resolve()):(Eo()<=re.DEBUG&&$("QueryEngine","Query:",To(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Eo()<=re.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",To(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gt(n))):D.resolve())}Yi(e,n){if(vT(n))return D.resolve(null);let r=Gt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Uh(n,null,"F"),r=Gt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ne(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Uh(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return vT(n)||i.isEqual(X.min())?D.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?D.resolve(null):(Eo()<=re.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),To(n)),this.rs(e,o,n,dR(i,-1)).next(a=>a))})}ts(e,n){let r=new _e(MR(e));return n.forEach((i,s)=>{Ic(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Eo()<=re.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",To(n)),this.Ji.getDocumentsMatchingQuery(e,n,yn.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Te(te),this._s=new ns(s=>$s(s),vc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function TC(t,e,n,r){return new jj(t,e,n,r)}async function SC(t,e){const n=G(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ne();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Uj(t,e){const n=G(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let g=D.resolve();return p.forEach(w=>{g=g.next(()=>d.getEntry(l,w)).next(v=>{const A=c.docVersions.get(w);J(A!==null),v.version.compareTo(A)<0&&(h.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),d.addEntry(v)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ne();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function PC(t){const e=G(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function $j(t,e){const n=G(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,h)=>{const p=i.get(h);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,h)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Ge.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(h,g),function(v,A,I){return v.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(p,g,d)&&a.push(n.Ur.updateTargetData(s,g))});let l=nn(),c=ne();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(AC(s,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(X.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return D.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function AC(t,e,n){let r=ne(),i=ne();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=nn();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(X.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):$("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function Bj(t,e){const n=G(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ea(t,e){const n=G(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,D.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Vr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ta(t,e,n){const r=G(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ts(o))throw o;$("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function qh(t,e,n){const r=G(t);let i=X.min(),s=ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=G(l),p=h._s.get(d);return p!==void 0?D.resolve(h.os.get(p)):h.Ur.getTargetData(c,d)}(r,o,Gt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:X.min(),n?s:ne())).next(a=>(CC(r,VR(e),a),{documents:a,Ts:s})))}function bC(t,e){const n=G(t),r=G(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function RC(t,e){const n=G(t),r=n.us.get(e)||X.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,dR(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(CC(n,e,i),i))}function CC(t,e,n){let r=t.us.get(e)||X.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}async function zj(t,e,n,r){const i=G(t);let s=ne(),o=nn();for(const c of n){const d=e.Es(c.metadata.name);c.document&&(s=s.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),o=o.insert(d,h)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),l=await Ea(i,function(d){return Gt($a(se.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>AC(c,a,o).next(d=>(a.apply(c),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Ur.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function qj(t,e,n=ne()){const r=await Ea(t,Gt($v(e.bundledQuery))),i=G(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=et(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(Ge.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,n,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}function HT(t,e){return`firestore_clients_${t}_${e}`}function QT(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Gm(t,e){return`firestore_targets_${t}_${e}`}class Wh{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new U(i.error.code,i.error.message))),o?new Wh(e,n,i.state,s):(Xe("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ou{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new U(r.error.code,r.error.message))),s?new ou(e,r.state,i):(Xe("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gh{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Ov();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=gR(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Gh(e,s):(Xe("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Hv{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Hv(n.clientId,n.onlineState):(Xe("SharedClientState",`Failed to parse online state: ${e}`),null)}}class xy{constructor(){this.activeTargetIds=Ov()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Km{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Te(te),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=HT(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new xy),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(HT(this.persistenceKey,r));if(i){const s=Gh.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Gm(this.persistenceKey,e));if(i){const s=ou.Rs(e,i);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Gm(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return $("SharedClientState","READ",e,n),n}setItem(e,n){$("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){$("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if($("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Xe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let o=en.oe;if(s!=null)try{const a=JSON.parse(s);J(typeof a=="number"),o=a}catch(a){Xe("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==en.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new Wh(this.currentUser,e,n,r),s=QT(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const n=QT(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const i=Gm(this.persistenceKey,e),s=new ou(e,n,r);this.setItem(i,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return Gh.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Wh.Rs(new pt(s),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return ou.Rs(i,n)}Ls(e){return Hv.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);$("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Ov();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class kC{constructor(){this.so=new xy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new xy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){$("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){$("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Td=null;function Hm(){return Td===null?Td=function(){return 268435456+Math.round(2147483648*Math.random())}():Td++,"0x"+Td.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class Hj extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Hm(),l=this.xo(n,r.toUriEncodedString());$("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(d=>($("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Yn("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ua}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=Gj[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Hm();return new Promise((o,a)=>{const l=new nR;l.setWithCredentials(!0),l.listenOnce(iR.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Bd.NO_ERROR:const d=l.getResponseJson();$(Ot,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Bd.TIMEOUT:$(Ot,`RPC '${e}' ${s} timed out`),a(new U(L.DEADLINE_EXCEEDED,"Request time out"));break;case Bd.HTTP_ERROR:const h=l.getStatus();if($(Ot,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const w=function(A){const I=A.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(I)>=0?I:L.UNKNOWN}(g.status);a(new U(w,g.message))}else a(new U(L.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new U(L.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{$(Ot,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);$(Ot,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Hm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=aR(),a=oR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new rR({})),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");$(Ot,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);let p=!1,g=!1;const w=new Kj({Io:A=>{g?$(Ot,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(p||($(Ot,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),$(Ot,`RPC '${e}' stream ${i} sending:`,A),h.send(A))},To:()=>h.close()}),v=(A,I,y)=>{A.listen(I,T=>{try{y(T)}catch(k){setTimeout(()=>{throw k},0)}})};return v(h,jl.EventType.OPEN,()=>{g||($(Ot,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),v(h,jl.EventType.CLOSE,()=>{g||(g=!0,$(Ot,`RPC '${e}' stream ${i} transport closed`),w.So())}),v(h,jl.EventType.ERROR,A=>{g||(g=!0,Yn(Ot,`RPC '${e}' stream ${i} transport errored:`,A),w.So(new U(L.UNAVAILABLE,"The operation could not be completed")))}),v(h,jl.EventType.MESSAGE,A=>{var I;if(!g){const y=A.data[0];J(!!y);const T=y,k=T.error||((I=T[0])===null||I===void 0?void 0:I.error);if(k){$(Ot,`RPC '${e}' stream ${i} received error:`,k);const V=k.status;let j=function(P){const b=rt[P];if(b!==void 0)return QR(b)}(V),S=k.message;j===void 0&&(j=L.INTERNAL,S="Unknown error status: "+V+" with message "+k.message),g=!0,w.So(new U(j,S)),h.close()}else $(Ot,`RPC '${e}' stream ${i} received:`,y),w.bo(y)}}),v(a,sR.STAT_EVENT,A=>{A.stat===my.PROXY?$(Ot,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===my.NOPROXY&&$(Ot,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(){return typeof window<"u"?window:null}function Qd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(t){return new ej(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Qv(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Xe(n.toString()),Xe("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new U(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return $("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():($("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Qj extends NC{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=rj(this.serializer,e),r=function(s){if(!("targetChange"in s))return X.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?et(o.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Ay(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Fh(l)?{documents:sC(s,l)}:{query:oC(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ZR(s,o.resumeToken);const c=Sy(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(X.min())>0){a.readTime=Ia(s,o.snapshotVersion.toTimestamp());const c=Sy(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=sj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Ay(this.serializer),n.removeTarget=e,this.a_(n)}}class Yj extends NC{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return J(!!e.streamToken),this.lastStreamToken=e.streamToken,J(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){J(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=ij(e.writeResults,e.commitTime),r=et(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Ay(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Wu(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new U(L.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Py(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U(L.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Py(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(L.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Xj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Xe(n),this.D_=!1):$("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{rs(this)&&($("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=G(l);c.L_.add(4),await qa(c),c.q_.set("Unknown"),c.L_.delete(4),await Ac(c)}(this))})}),this.q_=new Xj(r,i)}}async function Ac(t){if(rs(t))for(const e of t.B_)await e(!0)}async function qa(t){for(const e of t.B_)await e(!1)}function Wf(t,e){const n=G(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Xv(n)?Jv(n):Ga(n).r_()&&Yv(n,e))}function Sa(t,e){const n=G(t),r=Ga(n);n.N_.delete(e),r.r_()&&OC(n,e),n.N_.size===0&&(r.r_()?r.o_():rs(n)&&n.q_.set("Unknown"))}function Yv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ga(t).A_(e)}function OC(t,e){t.Q_.xe(e),Ga(t).R_(e)}function Jv(t){t.Q_=new Y3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ga(t).start(),t.q_.v_()}function Xv(t){return rs(t)&&!Ga(t).n_()&&t.N_.size>0}function rs(t){return G(t).L_.size===0}function DC(t){t.Q_=void 0}async function eU(t){t.q_.set("Online")}async function tU(t){t.N_.forEach((e,n)=>{Yv(t,e)})}async function nU(t,e){DC(t),Xv(t)?(t.q_.M_(e),Jv(t)):t.q_.set("Unknown")}async function rU(t,e,n){if(t.q_.set("Online"),e instanceof XR&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){$("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Kh(t,r)}else if(e instanceof Hd?t.Q_.Ke(e):e instanceof JR?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{const r=await PC(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(Ge.EMPTY_BYTE_STRING,d.snapshotVersion)),OC(s,l);const h=new Vr(d.target,l,c,d.sequenceNumber);Yv(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){$("RemoteStore","Failed to raise snapshot:",r),await Kh(t,r)}}async function Kh(t,e,n){if(!ts(e))throw e;t.L_.add(1),await qa(t),t.q_.set("Offline"),n||(n=()=>PC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ac(t)})}function VC(t,e){return e().catch(n=>Kh(t,n,e))}async function Wa(t){const e=G(t),n=zi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;iU(e);)try{const i=await Bj(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,sU(e,i)}catch(i){await Kh(e,i)}MC(e)&&LC(e)}function iU(t){return rs(t)&&t.O_.length<10}function sU(t,e){t.O_.push(e);const n=zi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function MC(t){return rs(t)&&!zi(t).n_()&&t.O_.length>0}function LC(t){zi(t).start()}async function oU(t){zi(t).p_()}async function aU(t){const e=zi(t);for(const n of t.O_)e.m_(n.mutations)}async function lU(t,e,n){const r=t.O_.shift(),i=Lv.from(r,e,n);await VC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Wa(t)}async function uU(t,e){e&&zi(t).V_&&await async function(r,i){if(function(o){return HR(o)&&o!==L.ABORTED}(i.code)){const s=r.O_.shift();zi(r).s_(),await VC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Wa(r)}}(t,e),MC(t)&&LC(t)}async function JT(t,e){const n=G(t);n.asyncQueue.verifyOperationInProgress(),$("RemoteStore","RemoteStore received new credentials");const r=rs(n);n.L_.add(3),await qa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ac(n)}async function Ny(t,e){const n=G(t);e?(n.L_.delete(2),await Ac(n)):e||(n.L_.add(2),await qa(n),n.q_.set("Unknown"))}function Ga(t){return t.K_||(t.K_=function(n,r,i){const s=G(n);return s.w_(),new Qj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:eU.bind(null,t),Ro:tU.bind(null,t),mo:nU.bind(null,t),d_:rU.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Xv(t)?Jv(t):t.q_.set("Unknown")):(await t.K_.stop(),DC(t))})),t.K_}function zi(t){return t.U_||(t.U_=function(n,r,i){const s=G(n);return s.w_(),new Yj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:oU.bind(null,t),mo:uU.bind(null,t),f_:aU.bind(null,t),g_:lU.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Wa(t)):(await t.U_.stop(),t.O_.length>0&&($("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new yt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Zv(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ka(t,e){if(Xe("AsyncQueue",`${e}: ${t}`),ts(t))return new U(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=Ul(),this.sortedSet=new Te(this.comparator)}static emptySet(e){return new Xo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Xo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(){this.W_=new Te(W.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Pa{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Pa(e,n,Xo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class dU{constructor(){this.queries=ZT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=G(n),s=i.queries;i.queries=ZT(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new U(L.ABORTED,"Firestore shutting down"))}}function ZT(){return new ns(t=>DR(t),wc)}async function e0(t,e){const n=G(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new cU,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Ka(o,`Initialization of query '${To(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&n0(n)}async function t0(t,e){const n=G(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function hU(t,e){const n=G(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&n0(n)}function fU(t,e,n){const r=G(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function n0(t){t.Y_.forEach(e=>{e.next()})}var Oy,e1;(e1=Oy||(Oy={})).ea="default",e1.Cache="cache";class r0{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Pa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Oy.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.serializer=e}Es(e){return pr(this.serializer,e)}ds(e){return e.metadata.exists?iC(this.serializer,e.document,!1):Ae.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return et(e)}}class mU{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=FC(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=se.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new t1(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||ne()).add(s);n.set(o,a)}}return n}async complete(){const e=await zj(this.localStore,new t1(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await qj(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function FC(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.key=e}}class UC{constructor(e){this.key=e}}class $C{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ne(),this.mutatedKeys=ne(),this.Aa=MR(e),this.Ra=new Xo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new XT,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const p=i.get(d),g=Ic(this.query,h)?h:null,w=!!p&&this.mutatedKeys.has(p.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let A=!1;p&&g?p.data.isEqual(g.data)?w!==v&&(r.track({type:3,doc:g}),A=!0):this.ga(p,g)||(r.track({type:2,doc:g}),A=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),A=!0):p&&!g&&(r.track({type:1,doc:p}),A=!0,(l||c)&&(a=!0)),A&&(g?(o=o.add(g),s=v?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(g,w){const v=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return v(g)-v(w)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Pa(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new XT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ne(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new UC(r))}),this.da.forEach(r=>{e.has(r)||n.push(new jC(r))}),n}ba(e){this.Ta=e.Ts,this.da=ne();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Pa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class gU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class yU{constructor(e){this.key=e,this.va=!1}}class _U{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ns(a=>DR(a),wc),this.Ma=new Map,this.xa=new Set,this.Oa=new Te(W.comparator),this.Na=new Map,this.La=new qv,this.Ba={},this.ka=new Map,this.qa=Gs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function vU(t,e,n=!0){const r=Gf(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await BC(r,e,n,!0),i}async function wU(t,e){const n=Gf(t);await BC(n,e,!0,!1)}async function BC(t,e,n,r){const i=await Ea(t.localStore,Gt(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await i0(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Wf(t.remoteStore,i),a}async function i0(t,e,n,r,i){t.Ka=(h,p,g)=>async function(v,A,I,y){let T=A.view.ma(I);T.ns&&(T=await qh(v.localStore,A.query,!1).then(({documents:S})=>A.view.ma(S,T)));const k=y&&y.targetChanges.get(A.targetId),V=y&&y.targetMismatches.get(A.targetId)!=null,j=A.view.applyChanges(T,v.isPrimaryClient,k,V);return Dy(v,A.targetId,j.wa),j.snapshot}(t,h,p,g);const s=await qh(t.localStore,e,!0),o=new $C(e,s.Ts),a=o.ma(s.documents),l=Sc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Dy(t,n,c.wa);const d=new gU(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function IU(t,e,n){const r=G(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!wc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ta(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Sa(r.remoteStore,i.targetId),Aa(r,i.targetId)}).catch(es)):(Aa(r,i.targetId),await Ta(r.localStore,i.targetId,!0))}async function EU(t,e){const n=G(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Sa(n.remoteStore,r.targetId))}async function TU(t,e,n){const r=l0(t);try{const i=await function(o,a){const l=G(o),c=De.now(),d=a.reduce((g,w)=>g.add(w.key),ne());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=nn(),v=ne();return l.cs.getEntries(g,d).next(A=>{w=A,w.forEach((I,y)=>{y.isValidDocument()||(v=v.add(I))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,w)).next(A=>{h=A;const I=[];for(const y of a){const T=K3(y,h.get(y.key).overlayedDocument);T!=null&&I.push(new Xr(y.key,T,PR(T.value.mapValue),Oe.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,I,a)}).next(A=>{p=A;const I=A.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(g,A.batchId,I)})}).then(()=>({batchId:p.batchId,changes:FR(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Te(te)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Zr(r,i.changes),await Wa(r.remoteStore)}catch(i){const s=Ka(i,"Failed to persist write");n.reject(s)}}async function zC(t,e){const n=G(t);try{const r=await $j(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(J(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?J(o.va):i.removedDocuments.size>0&&(J(o.va),o.va=!1))}),await Zr(n,r,e)}catch(r){await es(r)}}function n1(t,e,n){const r=G(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=G(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.j_)p.Z_(a)&&(c=!0)}),c&&n0(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SU(t,e,n){const r=G(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Te(W.comparator);o=o.insert(s,Ae.newNoDocument(s,X.min()));const a=ne().add(s),l=new Tc(X.min(),new Map,new Te(te),o,a);await zC(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),a0(r)}else await Ta(r.localStore,e,!1).then(()=>Aa(r,e,n)).catch(es)}async function PU(t,e){const n=G(t),r=e.batch.batchId;try{const i=await Uj(n.localStore,e);o0(n,r,null),s0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Zr(n,i)}catch(i){await es(i)}}async function AU(t,e,n){const r=G(t);try{const i=await function(o,a){const l=G(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(J(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);o0(r,e,n),s0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Zr(r,i)}catch(i){await es(i)}}async function bU(t,e){const n=G(t);rs(n.remoteStore)||$("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=G(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const i=n.ka.get(r)||[];i.push(e),n.ka.set(r,i)}catch(r){const i=Ka(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function s0(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function o0(t,e,n){const r=G(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Aa(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||qC(t,r)})}function qC(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Sa(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),a0(t))}function Dy(t,e,n){for(const r of n)r instanceof jC?(t.La.addReference(r.key,e),RU(t,r)):r instanceof UC?($("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||qC(t,r.key)):Q()}function RU(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||($("SyncEngine","New document in limbo: "+n),t.xa.add(r),a0(t))}function a0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new W(se.fromString(e)),r=t.qa.next();t.Na.set(r,new yU(n)),t.Oa=t.Oa.insert(n,r),Wf(t.remoteStore,new Vr(Gt($a(n.path)),r,"TargetPurposeLimboResolution",en.oe))}}async function Zr(t,e,n){const r=G(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=Kv.Wi(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const d=G(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>D.forEach(c,p=>D.forEach(p.$i,g=>d.persistence.referenceDelegate.addReference(h,p.targetId,g)).next(()=>D.forEach(p.Ui,g=>d.persistence.referenceDelegate.removeReference(h,p.targetId,g)))))}catch(h){if(!ts(h))throw h;$("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const g=d.os.get(p),w=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(p,v)}}}(r.localStore,s))}async function CU(t,e){const n=G(t);if(!n.currentUser.isEqual(e)){$("SyncEngine","User change. New user:",e.toKey());const r=await SC(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new U(L.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Zr(n,r.hs)}}function kU(t,e){const n=G(t),r=n.Na.get(e);if(r&&r.va)return ne().add(r.key);{let i=ne();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}async function xU(t,e){const n=G(t),r=await qh(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&Dy(n,e.targetId,i.wa),i}async function NU(t,e){const n=G(t);return RC(n.localStore,e).then(r=>Zr(n,r))}async function OU(t,e,n,r){const i=G(t),s=await function(a,l){const c=G(a),d=G(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,l).next(p=>p?c.localDocuments.getDocuments(h,p):D.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Wa(i.remoteStore):n==="acknowledged"||n==="rejected"?(o0(i,e,r||null),s0(i,e),function(a,l){G(G(a).mutationQueue).On(l)}(i.localStore,e)):Q(),await Zr(i,s)):$("SyncEngine","Cannot apply mutation batch with id: "+e)}async function DU(t,e){const n=G(t);if(Gf(n),l0(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await r1(n,r.toArray());n.Qa=!0,await Ny(n.remoteStore,!0);for(const s of i)Wf(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let i=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Aa(n,o),Ta(n.localStore,o,!0))),Sa(n.remoteStore,o)}),await i,await r1(n,r),function(o){const a=G(o);a.Na.forEach((l,c)=>{Sa(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new Te(W.comparator)}(n),n.Qa=!1,await Ny(n.remoteStore,!1)}}async function r1(t,e,n){const r=G(t),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await Ea(r.localStore,Gt(l[0]));for(const c of l){const d=r.Fa.get(c),h=await xU(r,d);h.snapshot&&s.push(h.snapshot)}}else{const c=await bC(r.localStore,o);a=await Ea(r.localStore,c),await i0(r,WC(c),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}function WC(t){return OR(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function VU(t){return function(n){return G(G(n).persistence).Qi()}(G(t).localStore)}async function MU(t,e,n,r){const i=G(t);if(i.Qa)return void $("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await RC(i.localStore,VR(s[0])),a=Tc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Ge.EMPTY_BYTE_STRING);await Zr(i,o,a);break}case"rejected":await Ta(i.localStore,e,!0),Aa(i,e,r);break;default:Q()}}async function LU(t,e,n){const r=Gf(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){$("SyncEngine","Adding an already active target "+i);continue}const s=await bC(r.localStore,i),o=await Ea(r.localStore,s);await i0(r,WC(s),o.targetId,!1,o.resumeToken),Wf(r.remoteStore,o)}for(const i of n)r.Ma.has(i)&&await Ta(r.localStore,i,!1).then(()=>{Sa(r.remoteStore,i),Aa(r,i)}).catch(es)}}function Gf(t){const e=G(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SU.bind(null,e),e.Ca.d_=hU.bind(null,e.eventManager),e.Ca.$a=fU.bind(null,e.eventManager),e}function l0(t){const e=G(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AU.bind(null,e),e}function FU(t,e,n){const r=G(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(g,w){const v=G(g),A=et(w.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",I=>v.Gr.getBundleMetadata(I,w.id)).then(I=>!!I&&I.createTime.compareTo(A)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(FC(l));const c=new mU(l,s.localStore,o.serializer);let d=await o.Ua();for(;d;){const p=await c.la(d);p&&a._updateProgress(p),d=await o.Ua()}const h=await c.complete();return await Zr(s,h.Ia,void 0),await function(g,w){const v=G(g);return v.persistence.runTransaction("Save bundle","readwrite",A=>v.Gr.saveBundleMetadata(A,w))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(l){return Yn("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class Vy{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Pc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return TC(this.persistence,new EC,e.initialUser,this.serializer)}createPersistence(e){return new IC(qf.Zr,this.serializer)}createSharedClientState(e){return new kC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class GC extends Vy{constructor(e,n,r){super(),this.Wa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Wa.initialize(this,e),await l0(this.Wa.syncEngine),await Wa(this.Wa.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return TC(this.persistence,new EC,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new Ej(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new r3(n,this.persistence);return new n3(e.asyncQueue,r)}createPersistence(e){const n=Gv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new Wv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,xC(),Qd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new kC}}class jU extends GC{constructor(e,n){super(e,n,!1),this.Wa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Wa.syncEngine;this.sharedClientState instanceof Km&&(this.sharedClientState.syncEngine={no:OU.bind(null,n),ro:MU.bind(null,n),io:LU.bind(null,n),Qi:VU.bind(null,n),eo:NU.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await DU(this.Wa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=xC();if(!Km.D(n))throw new U(L.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Gv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Km(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class u0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>n1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=CU.bind(null,this.syncEngine),await Ny(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dU}()}createDatastore(e){const n=Pc(e.databaseInfo.databaseId),r=function(s){return new Hj(s)}(e.databaseInfo);return function(s,o,a,l){return new Jj(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Zj(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>n1(this.syncEngine,n,0),function(){return YT.D()?new YT:new Wj}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,d){const h=new _U(i,s,o,a,l,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=G(i);$("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await qa(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Xe("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e,n){this.ja=e,this.serializer=n,this.metadata=new yt,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.ja.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.Ja()}async Ja(){const e=await this.Ya();if(e===null)return null;const n=this.Ha.decode(e),r=Number(n);isNaN(r)&&this.Za(`length string (${n}) is not valid number`);const i=await this.Xa(r);return new pU(JSON.parse(i),e.length+r)}eu(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Ya(){for(;this.eu()<0&&!await this.tu(););if(this.buffer.length===0)return null;const e=this.eu();e<0&&this.Za("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Xa(e){for(;this.buffer.length<e;)await this.tu()&&this.Za("Reached the end of bundle when more is expected.");const n=this.Ha.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}async tu(){const e=await this.ja.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new U(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=G(i),a={documents:s.map(h=>qu(o.serializer,h))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,se.emptyPath(),a,s.length),c=new Map;l.forEach(h=>{const p=nj(o.serializer,h);c.set(p.key.toString(),p)});const d=[];return s.forEach(h=>{const p=c.get(h.toString());J(!!p),d.push(p)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new za(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=W.fromPath(r);this.mutations.push(new Vv(i,this.precondition(i)))}),await async function(r,i){const s=G(r),o={writes:i.map(a=>Wu(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,se.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Q();n=X.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new U(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(X.min())?Oe.exists(!1):Oe.updateTime(n):Oe.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(X.min()))throw new U(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Oe.updateTime(n)}return Oe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.nu=r.maxAttempts,this.t_=new Qv(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(async()=>{const e=new $U(this.datastore),n=this.su(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ou(i)}))}).catch(r=>{this.ou(r)})})}su(e){try{const n=this.updateFunction(e);return!_c(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!HR(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=pt.UNAUTHENTICATED,this.clientId=uR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{$("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>($("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new U(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ka(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Yd(t,e){t.asyncQueue.verifyOperationInProgress(),$("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await SC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function My(t,e){t.asyncQueue.verifyOperationInProgress();const n=await c0(t);$("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>JT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>JT(e.remoteStore,i)),t._onlineComponents=e}function KC(t){return t.name==="FirebaseError"?t.code===L.FAILED_PRECONDITION||t.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function c0(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$("FirestoreClient","Using user provided OfflineComponentProvider");try{await Yd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!KC(n))throw n;Yn("Error using user provided cache. Falling back to memory cache: "+n),await Yd(t,new Vy)}}else $("FirestoreClient","Using default OfflineComponentProvider"),await Yd(t,new Vy);return t._offlineComponents}async function Hf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($("FirestoreClient","Using user provided OnlineComponentProvider"),await My(t,t._uninitializedComponentsProvider._online)):($("FirestoreClient","Using default OnlineComponentProvider"),await My(t,new u0))),t._onlineComponents}function HC(t){return c0(t).then(e=>e.persistence)}function d0(t){return c0(t).then(e=>e.localStore)}function QC(t){return Hf(t).then(e=>e.remoteStore)}function h0(t){return Hf(t).then(e=>e.syncEngine)}function qU(t){return Hf(t).then(e=>e.datastore)}async function ba(t){const e=await Hf(t),n=e.eventManager;return n.onListen=vU.bind(null,e.syncEngine),n.onUnlisten=IU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=wU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=EU.bind(null,e.syncEngine),n}function WU(t){return t.asyncQueue.enqueue(async()=>{const e=await HC(t),n=await QC(t);return e.setNetworkEnabled(!0),function(i){const s=G(i);return s.L_.delete(0),Ac(s)}(n)})}function GU(t){return t.asyncQueue.enqueue(async()=>{const e=await HC(t),n=await QC(t);return e.setNetworkEnabled(!1),async function(i){const s=G(i);s.L_.add(0),await qa(s),s.q_.set("Offline")}(n)})}function KU(t,e){const n=new yt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(c,d){const h=G(c);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new U(L.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Ka(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await d0(t),e,n)),n.promise}function YC(t,e,n={}){const r=new yt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new Kf({next:p=>{o.enqueueAndForget(()=>t0(s,h));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new U(L.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?c.reject(new U(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new r0($a(a.path),d,{includeMetadataChanges:!0,_a:!0});return e0(s,h)}(await ba(t),t.asyncQueue,e,n,r)),r.promise}function HU(t,e){const n=new yt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await qh(i,s,!0),l=new $C(s,a.Ts),c=l.ma(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=Ka(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await d0(t),e,n)),n.promise}function JC(t,e,n={}){const r=new yt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new Kf({next:p=>{o.enqueueAndForget(()=>t0(s,h)),p.fromCache&&l.source==="server"?c.reject(new U(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new r0(a,d,{includeMetadataChanges:!0,_a:!0});return e0(s,h)}(await ba(t),t.asyncQueue,e,n,r)),r.promise}function QU(t,e){const n=new Kf(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){G(i).Y_.add(s),s.next()}(await ba(t),n)),()=>{n.za(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){G(i).Y_.delete(s)}(await ba(t),n))}}function YU(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?YR().encode(o):o,function(d,h){return new UU(d,h)}(function(d,h){if(d instanceof Uint8Array)return i1(d,h);if(d instanceof ArrayBuffer)return i1(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,Pc(e));t.asyncQueue.enqueueAndForget(async()=>{FU(await h0(t),i,r)})}function JU(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=G(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(await d0(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(t,e,n){if(!n)throw new U(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ZC(t,e,n,r){if(e===!0&&r===!0)throw new U(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function o1(t){if(!W.isDocumentKey(t))throw new U(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function a1(t){if(W.isDocumentKey(t))throw new U(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Qf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function ce(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new U(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qf(t);throw new U(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ek(t,e){if(e<=0)throw new U(L.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new U(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new U(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new U(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new U(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new U(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new U(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new U(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new W5;switch(r.type){case"firstParty":return new Q5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=s1.get(n);r&&($("ComponentProvider","Removing Datastore"),s1.delete(n),r.terminate())}(this),Promise.resolve()}}function XU(t,e,n,r={}){var i;const s=(t=ce(t,bc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Yn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=pt.MOCK_USER;else{a=uV(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new U(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new pt(c)}t._authCredentials=new G5(new lR(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kt=class tk{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new tk(this.firestore,e,this._query)}},Le=class nk{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nk(this.firestore,e,this._key)}},Ni=class rk extends Kt{constructor(e,n,r){super(e,n,$a(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new W(e))}withConverter(e){return new rk(this.firestore,e,this._path)}};function ik(t,e,...n){if(t=Z(t),f0("collection","path",e),t instanceof bc){const r=se.fromString(e,...n);return a1(r),new Ni(t,null,r)}{if(!(t instanceof Le||t instanceof Ni))throw new U(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(se.fromString(e,...n));return a1(r),new Ni(t.firestore,null,r)}}function ZU(t,e){if(t=ce(t,bc),f0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new U(L.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Kt(t,null,function(r){return new Jr(se.emptyPath(),r)}(e))}function Hh(t,e,...n){if(t=Z(t),arguments.length===1&&(e=uR.newId()),f0("doc","path",e),t instanceof bc){const r=se.fromString(e,...n);return o1(r),new Le(t,null,new W(r))}{if(!(t instanceof Le||t instanceof Ni))throw new U(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(se.fromString(e,...n));return o1(r),new Le(t.firestore,t instanceof Ni?t.converter:null,new W(r))}}function sk(t,e){return t=Z(t),e=Z(e),(t instanceof Le||t instanceof Ni)&&(e instanceof Le||e instanceof Ni)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function ok(t,e){return t=Z(t),e=Z(e),t instanceof Kt&&e instanceof Kt&&t.firestore===e.firestore&&wc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Qv(this,"async_queue_retry"),this.Eu=()=>{const n=Qd();n&&$("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=Qd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=Qd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new yt;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!ts(e))throw e;$("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Xe("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const i=Zv.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&Q()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}function Ly(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class t${constructor(){this._progressObserver={},this._taskCompletionResolver=new yt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$=-1;let Ke=class extends bc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new e$}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||ak(this),this._firestoreClient.terminate()}};function _t(t){return t._firestoreClient||ak(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ak(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,d){return new P3(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,XC(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new zU(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function r$(t,e){uk(t=ce(t,Ke));const n=_t(t);if(n._uninitializedComponentsProvider)throw new U(L.FAILED_PRECONDITION,"SDK cache is already specified.");Yn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new u0;return lk(n,i,new GC(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function i$(t){uk(t=ce(t,Ke));const e=_t(t);if(e._uninitializedComponentsProvider)throw new U(L.FAILED_PRECONDITION,"SDK cache is already specified.");Yn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new u0;return lk(e,r,new jU(r,n.cacheSizeBytes))}function lk(t,e,n){const r=new yt;return t.asyncQueue.enqueue(async()=>{try{await Yd(t,n),await My(t,e),r.resolve()}catch(i){const s=i;if(!KC(s))throw s;Yn("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function s$(t){if(t._initialized&&!t._terminated)throw new U(L.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new yt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!fr.D())return Promise.resolve();const i=r+"main";await fr.delete(i)}(Gv(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function o$(t){return function(n){const r=new yt;return n.asyncQueue.enqueueAndForget(async()=>bU(await h0(n),r)),r.promise}(_t(t=ce(t,Ke)))}function a$(t){return WU(_t(t=ce(t,Ke)))}function l$(t){return GU(_t(t=ce(t,Ke)))}function u$(t,e){const n=_t(t=ce(t,Ke)),r=new t$;return YU(n,t._databaseId,e,r),r}function c$(t,e){return JU(_t(t=ce(t,Ke)),e).then(n=>n?new Kt(t,null,n.query):null)}function uk(t){if(t._initialized||t._terminated)throw new U(L.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ir(Ge.fromBase64String(e))}catch(n){throw new U(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ir(Ge.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new U(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ne(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let no=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new U(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new U(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return te(this._lat,e._lat)||te(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d$=/^__.*__$/;class h${constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ba(e,this.data,n,this.fieldTransforms)}}class ck{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function dk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}class Jf{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new Jf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Qh(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(dk(this.wu)&&d$.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class f${constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Pc(e)}Nu(e,n,r,i=!1){return new Jf({wu:e,methodName:n,Ou:r,path:Ne.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ro(t){const e=t._freezeSettings(),n=Pc(t._databaseId);return new f$(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Xf(t,e,n,r,i,s={}){const o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);I0("Data must be an object, but it was:",o,r);const a=pk(r,o);let l,c;if(s.merge)l=new tn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const p=Fy(e,h,n);if(!o.contains(p))throw new U(L.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);gk(d,p)||d.push(p)}l=new tn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new h$(new St(a),l,c)}class Rc extends no{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rc}}function hk(t,e,n){return new Jf({wu:3,Ou:e.settings.Ou,methodName:t._methodName,Du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class m0 extends no{_toFieldTransform(e){return new Ec(e.path,new va)}isEqual(e){return e instanceof m0}}class g0 extends no{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){const n=hk(this,e,!0),r=this.Lu.map(s=>io(s,n)),i=new Bs(r);return new Ec(e.path,i)}isEqual(e){return e instanceof g0&&Cu(this.Lu,e.Lu)}}class y0 extends no{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){const n=hk(this,e,!0),r=this.Lu.map(s=>io(s,n)),i=new zs(r);return new Ec(e.path,i)}isEqual(e){return e instanceof y0&&Cu(this.Lu,e.Lu)}}class _0 extends no{constructor(e,n){super(e),this.Bu=n}_toFieldTransform(e){const n=new wa(e.serializer,$R(e.serializer,this.Bu));return new Ec(e.path,n)}isEqual(e){return e instanceof _0&&this.Bu===e.Bu}}function v0(t,e,n,r){const i=t.Nu(1,e,n);I0("Data must be an object, but it was:",i,r);const s=[],o=St.empty();to(r,(l,c)=>{const d=E0(e,l,n);c=Z(c);const h=i.Cu(d);if(c instanceof Rc)s.push(d);else{const p=io(c,h);p!=null&&(s.push(d),o.set(d,p))}});const a=new tn(s);return new ck(o,a,i.fieldTransforms)}function w0(t,e,n,r,i,s){const o=t.Nu(1,e,n),a=[Fy(e,r,n)],l=[i];if(s.length%2!=0)throw new U(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Fy(e,s[p])),l.push(s[p+1]);const c=[],d=St.empty();for(let p=a.length-1;p>=0;--p)if(!gk(c,a[p])){const g=a[p];let w=l[p];w=Z(w);const v=o.Cu(g);if(w instanceof Rc)c.push(g);else{const A=io(w,v);A!=null&&(c.push(g),d.set(g,A))}}const h=new tn(c);return new ck(d,h,o.fieldTransforms)}function fk(t,e,n,r=!1){return io(n,t.Nu(r?4:3,e))}function io(t,e){if(mk(t=Z(t)))return I0("Unsupported field value:",e,t),pk(t,e);if(t instanceof no)return function(r,i){if(!dk(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=io(a,i.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Z(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $R(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=De.fromDate(r);return{timestampValue:Ia(i.serializer,s)}}if(r instanceof De){const s=new De(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ia(i.serializer,s)}}if(r instanceof Yf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ir)return{bytesValue:ZR(i.serializer,r._byteString)};if(r instanceof Le){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Uv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof p0)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return Dv(a.serializer,l)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Qf(r)}`)}(t,e)}function pk(t,e){const n={};return IR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):to(t,(r,i)=>{const s=io(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function mk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof De||t instanceof Yf||t instanceof Ir||t instanceof Le||t instanceof no||t instanceof p0)}function I0(t,e,n){if(!mk(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Qf(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function Fy(t,e,n){if((e=Z(e))instanceof qi)return e._internalPath;if(typeof e=="string")return E0(t,e);throw Qh("Field path arguments must be of type string or ",t,!1,void 0,n)}const p$=new RegExp("[~\\*/\\[\\]]");function E0(t,e,n){if(e.search(p$)>=0)throw Qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qi(...e.split("."))._internalPath}catch{throw Qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Qh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new U(L.INVALID_ARGUMENT,a+t+l)}function gk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new m$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Zf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class m$ extends Gu{data(){return super.data()}}function Zf(t,e){return typeof e=="string"?E0(t,e):e instanceof qi?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new U(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class T0{}class Cc extends T0{}function ai(t,e,...n){let r=[];e instanceof T0&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof S0).length,a=s.filter(l=>l instanceof ep).length;if(o>1||o>0&&a>0)throw new U(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class ep extends Cc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ep(e,n,r)}_apply(e){const n=this._parse(e);return vk(e._query,n),new Kt(e.firestore,e.converter,Ty(e._query,n))}_parse(e){const n=ro(e.firestore);return function(s,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new U(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){c1(h,d);const g=[];for(const w of h)g.push(u1(l,s,w));p={arrayValue:{values:g}}}else p=u1(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||c1(h,d),p=fk(a,o,h,d==="in"||d==="not-in");return oe.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function g$(t,e,n){const r=e,i=Zf("where",t);return ep._create(i,r,n)}class S0 extends T0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new S0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:pe.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)vk(o,l),o=Ty(o,l)}(e._query,n),new Kt(e.firestore,e.converter,Ty(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class P0 extends Cc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new P0(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new U(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new U(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zu(s,o)}(e._query,this._field,this._direction);return new Kt(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Jr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function y$(t,e="asc"){const n=e,r=Zf("orderBy",t);return P0._create(r,n)}class tp extends Cc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new tp(e,n,r)}_apply(e){return new Kt(e.firestore,e.converter,Uh(e._query,this._limit,this._limitType))}}function _$(t){return ek("limit",t),tp._create("limit",t,"F")}function v$(t){return ek("limitToLast",t),tp._create("limitToLast",t,"L")}class np extends Cc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new np(e,n,r)}_apply(e){const n=_k(e,this.type,this._docOrFields,this._inclusive);return new Kt(e.firestore,e.converter,function(i,s){return new Jr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function w$(...t){return np._create("startAt",t,!0)}function I$(...t){return np._create("startAfter",t,!1)}class rp extends Cc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new rp(e,n,r)}_apply(e){const n=_k(e,this.type,this._docOrFields,this._inclusive);return new Kt(e.firestore,e.converter,function(i,s){return new Jr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function E$(...t){return rp._create("endBefore",t,!1)}function T$(...t){return rp._create("endAt",t,!0)}function _k(t,e,n,r){if(n[0]=Z(n[0]),n[0]instanceof Gu)return function(s,o,a,l,c){if(!l)throw new U(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of Jo(s))if(h.field.isKeyField())d.push(Us(o,l.key));else{const p=l.data.field(h.field);if(Ff(p))throw new U(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const g=h.field.canonicalString();throw new U(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(p)}return new Bi(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=ro(t.firestore);return function(o,a,l,c,d,h){const p=o.explicitOrderBy;if(d.length>p.length)throw new U(L.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let w=0;w<d.length;w++){const v=d[w];if(p[w].field.isKeyField()){if(typeof v!="string")throw new U(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof v}`);if(!Nv(o)&&v.indexOf("/")!==-1)throw new U(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${v}' contains a slash.`);const A=o.path.child(se.fromString(v));if(!W.isDocumentKey(A))throw new U(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const I=new W(A);g.push(Us(a,I))}else{const A=fk(l,c,v);g.push(A)}}return new Bi(g,h)}(t._query,t.firestore._databaseId,i,e,n,r)}}function u1(t,e,n){if(typeof(n=Z(n))=="string"){if(n==="")throw new U(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nv(e)&&n.indexOf("/")!==-1)throw new U(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(se.fromString(n));if(!W.isDocumentKey(r))throw new U(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Us(t,new W(r))}if(n instanceof Le)return Us(t,n._key);throw new U(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qf(n)}.`)}function c1(t,e){if(!Array.isArray(t)||t.length===0)throw new U(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vk(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new U(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new U(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class A0{convertValue(e,n="none"){switch(js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return to(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ke(o.doubleValue));return new p0(s)}convertGeoPoint(e){return new Yf(ke(e.latitude),ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=kv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Uu(e));default:return null}}convertTimestamp(e){const n=qr(e);return new De(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=se.fromString(e);J(cC(r));const i=new Ui(r.get(1),r.get(3)),s=new W(r.popFirst(5));return i.isEqual(n)||Xe(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class S$ extends A0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ir(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Wr=class extends Gu{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new au(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Zf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},au=class extends Wr{data(e={}){return super.data(e)}},Wi=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ss(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new au(this._firestore,this._userDataWriter,r.key,r,new Ss(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new U(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new au(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ss(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new au(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ss(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:P$(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function P$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}function wk(t,e){return t instanceof Wr&&e instanceof Wr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Wi&&e instanceof Wi&&t._firestore===e._firestore&&ok(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A$(t){t=ce(t,Le);const e=ce(t.firestore,Ke);return YC(_t(e),t._key).then(n=>b0(e,t,n))}class so extends A0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ir(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,n)}}function b$(t){t=ce(t,Le);const e=ce(t.firestore,Ke),n=_t(e),r=new so(e);return KU(n,t._key).then(i=>new Wr(e,r,t._key,i,new Ss(i!==null&&i.hasLocalMutations,!0),t.converter))}function R$(t){t=ce(t,Le);const e=ce(t.firestore,Ke);return YC(_t(e),t._key,{source:"server"}).then(n=>b0(e,t,n))}function C$(t){t=ce(t,Kt);const e=ce(t.firestore,Ke),n=_t(e),r=new so(e);return yk(t._query),JC(n,t._query).then(i=>new Wi(e,r,t,i))}function k$(t){t=ce(t,Kt);const e=ce(t.firestore,Ke),n=_t(e),r=new so(e);return HU(n,t._query).then(i=>new Wi(e,r,t,i))}function x$(t){t=ce(t,Kt);const e=ce(t.firestore,Ke),n=_t(e),r=new so(e);return JC(n,t._query,{source:"server"}).then(i=>new Wi(e,r,t,i))}function d1(t,e,n){t=ce(t,Le);const r=ce(t.firestore,Ke),i=ip(t.converter,e,n);return kc(r,[Xf(ro(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Oe.none())])}function h1(t,e,n,...r){t=ce(t,Le);const i=ce(t.firestore,Ke),s=ro(i);let o;return o=typeof(e=Z(e))=="string"||e instanceof qi?w0(s,"updateDoc",t._key,e,n,r):v0(s,"updateDoc",t._key,e),kc(i,[o.toMutation(t._key,Oe.exists(!0))])}function N$(t){return kc(ce(t.firestore,Ke),[new za(t._key,Oe.none())])}function O$(t,e){const n=ce(t.firestore,Ke),r=Hh(t),i=ip(t.converter,e);return kc(n,[Xf(ro(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Oe.exists(!1))]).then(()=>r)}function Ik(t,...e){var n,r,i;t=Z(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Ly(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Ly(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,d;if(t instanceof Le)c=ce(t.firestore,Ke),d=$a(t._key.path),l={next:h=>{e[o]&&e[o](b0(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=ce(t,Kt);c=ce(h.firestore,Ke),d=h._query;const p=new so(c);l={next:g=>{e[o]&&e[o](new Wi(c,p,h,g))},error:e[o+1],complete:e[o+2]},yk(t._query)}return function(p,g,w,v){const A=new Kf(v),I=new r0(g,A,w);return p.asyncQueue.enqueueAndForget(async()=>e0(await ba(p),I)),()=>{A.za(),p.asyncQueue.enqueueAndForget(async()=>t0(await ba(p),I))}}(_t(c),d,a,l)}function D$(t,e){return QU(_t(t=ce(t,Ke)),Ly(e)?e:{next:e})}function kc(t,e){return function(r,i){const s=new yt;return r.asyncQueue.enqueueAndForget(async()=>TU(await h0(r),i,s)),s.promise}(_t(t),e)}function b0(t,e,n){const r=n.docs.get(e._key),i=new so(t);return new Wr(t,i,e._key,r,new Ss(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M$=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ro(e)}set(e,n,r){this._verifyNotCommitted();const i=fi(e,this._firestore),s=ip(i.converter,n,r),o=Xf(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Oe.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=fi(e,this._firestore);let o;return o=typeof(n=Z(n))=="string"||n instanceof qi?w0(this._dataReader,"WriteBatch.update",s._key,n,r,i):v0(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Oe.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=fi(e,this._firestore);return this._mutations=this._mutations.concat(new za(n._key,Oe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new U(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function fi(t,e){if((t=Z(t)).firestore!==e)throw new U(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L$=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=ro(n)}get(n){const r=fi(n,this._firestore),i=new S$(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return Q();const o=s[0];if(o.isFoundDocument())return new Gu(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Gu(this._firestore,i,r._key,null,r.converter);throw Q()})}set(n,r,i){const s=fi(n,this._firestore),o=ip(s.converter,r,i),a=Xf(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=fi(n,this._firestore);let a;return a=typeof(r=Z(r))=="string"||r instanceof qi?w0(this._dataReader,"Transaction.update",o._key,r,i,s):v0(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=fi(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=fi(e,this._firestore),r=new so(this._firestore);return super.get(e).then(i=>new Wr(this._firestore,r,n._key,i._document,new Ss(!1,!1),n.converter))}};function F$(t,e,n){t=ce(t,Ke);const r=Object.assign(Object.assign({},V$),n);return function(s){if(s.maxAttempts<1)throw new U(L.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new yt;return s.asyncQueue.enqueueAndForget(async()=>{const c=await qU(s);new BU(s.asyncQueue,c,a,o,l).ru()}),l.promise}(_t(t),i=>e(new L$(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j$(){return new Rc("deleteField")}function U$(){return new m0("serverTimestamp")}function $$(...t){return new g0("arrayUnion",t)}function B$(...t){return new y0("arrayRemove",t)}function z$(t){return new _0("increment",t)}(function(e,n=!0){(function(i){Ua=i})(Xi),Li(new _r("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ke(new K5(r.getProvider("auth-internal")),new J5(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new U(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ui(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Kn(rT,"4.7.2",e),Kn(rT,"4.7.2","esm2017")})();const q$="@firebase/firestore-compat",W$="0.3.37";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new U("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(){if(typeof Uint8Array>"u")throw new U("unimplemented","Uint8Arrays are not available in this environment.")}function p1(){if(!T3())throw new U("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Ku{constructor(e){this._delegate=e}static fromBase64String(e){return p1(),new Ku(Ir.fromBase64String(e))}static fromUint8Array(e){return f1(),new Ku(Ir.fromUint8Array(e))}toBase64(){return p1(),this._delegate.toBase64()}toUint8Array(){return f1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(t){return G$(t,["next","error","complete"])}function G$(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${enableIndexedDbPersistence(e,n){return r$(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return i$(e._delegate)}clearIndexedDbPersistence(e){return s$(e._delegate)}}class Ek{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ui||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Yn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){XU(this._delegate,e,n,r)}enableNetwork(){return a$(this._delegate)}disableNetwork(){return l$(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ZC("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return o$(this._delegate)}onSnapshotsInSync(e){return D$(this._delegate,e)}get app(){if(!this._appCompat)throw new U("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ra(this,ik(this._delegate,e))}catch(n){throw Bt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Rn(this,Hh(this._delegate,e))}catch(n){throw Bt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new $t(this,ZU(this._delegate,e))}catch(n){throw Bt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return F$(this._delegate,n=>e(new Tk(this,n)))}batch(){return _t(this._delegate),new Sk(new M$(this._delegate,e=>kc(this._delegate,e)))}loadBundle(e){return u$(this._delegate,e)}namedQuery(e){return c$(this._delegate,e).then(n=>n?new $t(this,n):null)}}class sp extends A0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ku(new Ir(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Rn.forKey(n,this.firestore,null)}}function H$(t){z5(t)}class Tk{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new sp(e)}get(e){const n=Ps(e);return this._delegate.get(n).then(r=>new Hu(this._firestore,new Wr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Ps(e);return r?(R0("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Ps(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Ps(e);return this._delegate.delete(n),this}}class Sk{constructor(e){this._delegate=e}set(e,n,r){const i=Ps(e);return r?(R0("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Ps(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Ps(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Ks{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new au(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Qu(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Ks.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new Ks(e,new sp(e),n),i.set(n,s)),s}}Ks.INSTANCES=new WeakMap;class Rn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new sp(e)}static forPath(e,n,r){if(e.length%2!==0)throw new U("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Rn(n,new Le(n._delegate,r,new W(e)))}static forKey(e,n,r){return new Rn(n,new Le(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ra(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ra(this.firestore,ik(this._delegate,e))}catch(n){throw Bt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Z(e),e instanceof Le?sk(this._delegate,e):!1}set(e,n){n=R0("DocumentReference.set",n);try{return n?d1(this._delegate,e,n):d1(this._delegate,e)}catch(r){throw Bt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?h1(this._delegate,e):h1(this._delegate,e,n,...r)}catch(i){throw Bt(i,"updateDoc()","DocumentReference.update()")}}delete(){return N$(this._delegate)}onSnapshot(...e){const n=Pk(e),r=Ak(e,i=>new Hu(this.firestore,new Wr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Ik(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=b$(this._delegate):(e==null?void 0:e.source)==="server"?n=R$(this._delegate):n=A$(this._delegate),n.then(r=>new Hu(this.firestore,new Wr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Rn(this.firestore,e?this._delegate.withConverter(Ks.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Bt(t,e,n){return t.message=t.message.replace(e,n),t}function Pk(t){for(const e of t)if(typeof e=="object"&&!jy(e))return e;return{}}function Ak(t,e){var n,r;let i;return jy(t[0])?i=t[0]:jy(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Hu{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Rn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return wk(this._delegate,e._delegate)}}class Qu extends Hu{data(e){const n=this._delegate.data(e);return this._delegate._converter||q5(n!==void 0),n}}class $t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new sp(e)}where(e,n,r){try{return new $t(this.firestore,ai(this._delegate,g$(e,n,r)))}catch(i){throw Bt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new $t(this.firestore,ai(this._delegate,y$(e,n)))}catch(r){throw Bt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new $t(this.firestore,ai(this._delegate,_$(e)))}catch(n){throw Bt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new $t(this.firestore,ai(this._delegate,v$(e)))}catch(n){throw Bt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new $t(this.firestore,ai(this._delegate,w$(...e)))}catch(n){throw Bt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new $t(this.firestore,ai(this._delegate,I$(...e)))}catch(n){throw Bt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new $t(this.firestore,ai(this._delegate,E$(...e)))}catch(n){throw Bt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new $t(this.firestore,ai(this._delegate,T$(...e)))}catch(n){throw Bt(n,"endAt()","Query.endAt()")}}isEqual(e){return ok(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=k$(this._delegate):(e==null?void 0:e.source)==="server"?n=x$(this._delegate):n=C$(this._delegate),n.then(r=>new Uy(this.firestore,new Wi(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=Pk(e),r=Ak(e,i=>new Uy(this.firestore,new Wi(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Ik(this._delegate,n,r)}withConverter(e){return new $t(this.firestore,e?this._delegate.withConverter(Ks.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Q${constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Qu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Uy{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new $t(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Qu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Q$(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Qu(this._firestore,r))})}isEqual(e){return wk(this._delegate,e._delegate)}}class Ra extends $t{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Rn(this.firestore,e):null}doc(e){try{return e===void 0?new Rn(this.firestore,Hh(this._delegate)):new Rn(this.firestore,Hh(this._delegate,e))}catch(n){throw Bt(n,"doc()","CollectionReference.doc()")}}add(e){return O$(this._delegate,e).then(n=>new Rn(this.firestore,n))}isEqual(e){return sk(this._delegate,e._delegate)}withConverter(e){return new Ra(this.firestore,e?this._delegate.withConverter(Ks.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ps(t){return ce(t,Le)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(...e){this._delegate=new qi(...e)}static documentId(){return new C0(Ne.keyField().canonicalString())}isEqual(e){return e=Z(e),e instanceof qi?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this._delegate=e}static serverTimestamp(){const e=U$();return e._methodName="FieldValue.serverTimestamp",new vs(e)}static delete(){const e=j$();return e._methodName="FieldValue.delete",new vs(e)}static arrayUnion(...e){const n=$$(...e);return n._methodName="FieldValue.arrayUnion",new vs(n)}static arrayRemove(...e){const n=B$(...e);return n._methodName="FieldValue.arrayRemove",new vs(n)}static increment(e){const n=z$(e);return n._methodName="FieldValue.increment",new vs(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y$={Firestore:Ek,GeoPoint:Yf,Timestamp:De,Blob:Ku,Transaction:Tk,WriteBatch:Sk,DocumentReference:Rn,DocumentSnapshot:Hu,Query:$t,QueryDocumentSnapshot:Qu,QuerySnapshot:Uy,CollectionReference:Ra,FieldPath:C0,FieldValue:vs,setLogLevel:H$,CACHE_SIZE_UNLIMITED:n$};function J$(t,e){t.INTERNAL.registerComponent(new _r("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Y$)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X$(t){J$(t,(e,n)=>new Ek(e,n,new K$)),t.registerVersion(q$,W$)}X$(On);const Z$={apiKey:"AIzaSyDClMTFgLYeHv60pNoMyk9tsaUG3qwuz8k",authDomain:"clonespotify-98166.firebaseapp.com",projectId:"clonespotify-98166",storageBucket:"clonespotify-98166.appspot.com",messagingSenderId:"950609807889",appId:"1:950609807889:web:01d8d65a78540206d4ffb0",measurementId:"G-52DFEMTQCQ"};On.initializeApp(Z$);const m1=On.auth(),e6=On.firestore(),bk=new On.auth.GoogleAuthProvider,Rk=new On.auth.FacebookAuthProvider;var Ck={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},g1=Ii.createContext&&Ii.createContext(Ck),t6=["attr","size","title"];function n6(t,e){if(t==null)return{};var n=r6(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function r6(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Yh(){return Yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yh.apply(this,arguments)}function y1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y1(Object(n),!0).forEach(function(r){i6(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function i6(t,e,n){return e=s6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s6(t){var e=o6(t,"string");return typeof e=="symbol"?e:e+""}function o6(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kk(t){return t&&t.map((e,n)=>Ii.createElement(e.tag,Jh({key:n},e.attr),kk(e.child)))}function Ha(t){return e=>Ii.createElement(a6,Yh({attr:Jh({},t.attr)},e),kk(t.child))}function a6(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=n6(t,t6),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Ii.createElement("svg",Yh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Jh(Jh({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Ii.createElement("title",null,s),t.children)};return g1!==void 0?Ii.createElement(g1.Consumer,null,n=>e(n)):e(Ck)}function xk(t){return Ha({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}function Nk(t){return Ha({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(t)}function l6(t){return Ha({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function u6(t){return Ha({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function c6(t){return Ha({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}const d6=()=>{const[t,e]=M.useState(""),[n,r]=M.useState(""),[i,s]=M.useState(!1),[o,a]=M.useState(""),l=Sf(),c=async(g,w)=>{try{return!!(await(await fetch("http://localhost:3000/users")).json()).find(y=>y.email===g&&y.password===w)}catch(v){return console.error("Error checking user in JSON:",v),!1}},d=async g=>{g.preventDefault(),s(!0),a("");try{await c(t,n)?(localStorage.setItem("userEmail",t),l("/main-page1")):a("Invalid email or password.")}catch(w){console.error("Error logging in:",w),a("Something went wrong. Please try again.")}finally{s(!1)}},h=async()=>{s(!0);try{const g=await On.auth().signInWithPopup(bk);g.user?(localStorage.setItem("userEmail",g.user.email||""),l("/main-page1")):a("User not found. Please try again.")}catch(g){console.error("Error with Google sign in:",g),a("Error with Google sign in. Please try again.")}finally{s(!1)}},p=async()=>{s(!0);try{const g=await On.auth().signInWithPopup(Rk);g.user?(localStorage.setItem("userEmail",g.user.email||""),l("/main-page1")):a("User not found. Please try again.")}catch(g){console.error("Error with Facebook sign in:",g),a("Error with Facebook sign in. Please try again.")}finally{s(!1)}};return O.jsxs("div",{className:"login-container",children:[O.jsx("img",{src:"https://storage.googleapis.com/pr-newsroom-wp/1/2023/05/Spotify_Primary_Logo_RGB_White.png",alt:"Spotify Logo"}),O.jsx("h1",{className:"login-title",children:"Log in to Spotify"}),O.jsxs("div",{className:"auth-buttons",children:[O.jsxs("button",{className:"btn-google",onClick:h,disabled:i,children:[O.jsx(xk,{style:{marginRight:"8px"},className:"google-icon"})," Continue with Google"]}),O.jsxs("button",{className:"btn-facebook",onClick:p,disabled:i,children:[O.jsx(Nk,{style:{marginRight:"8px"},className:"facebook-icon"}),"Continue with Facebook"]})]}),O.jsx("div",{className:"thin-divider2"}),O.jsxs("form",{onSubmit:d,children:[O.jsx("div",{className:"input-group2",children:O.jsx("input",{type:"email",placeholder:"Email or username",value:t,onChange:g=>e(g.target.value),disabled:i})}),O.jsx("div",{className:"input-group2",children:O.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:g=>r(g.target.value),disabled:i})}),o&&O.jsx("p",{className:"error-message",children:o}),O.jsx("button",{type:"submit",className:"btn-login",disabled:i,children:i?"Logging in...":"Log In"})]}),O.jsxs("div",{className:"signup-link",children:["Dont have an account? ",O.jsx(DA,{to:"/signup",children:"Sign up for Spotify"})]})]})};const h6=()=>{const[t,e]=M.useState(""),[n,r]=M.useState(""),[i,s]=M.useState(!0),[o,a]=M.useState(""),[l,c]=M.useState(!1),d=Sf(),h=y=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y),p=y=>{const T=y.target.value;e(T),h(T)?(s(!0),a("")):(s(!1),a("This email is invalid. Make sure it's written like example@email.com"))},g=async(y,T)=>{const k={email:y,password:T};try{const V=await fetch("http://localhost:3000/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});if(!V.ok)throw new Error("Error saving user data");console.log("User saved to JSON:",await V.json())}catch(V){console.error("Error saving user to JSON:",V),a("Error while saving user data.")}},w=async y=>{y.preventDefault(),i&&t&&n?(c(!0),await g(t,n),d("/login"),c(!1)):a("Please fill in all fields correctly.")},v=async y=>{var T;if(y){const k={uid:y.uid,email:y.email,displayName:y.displayName,providerId:((T=y.providerData[0])==null?void 0:T.providerId)||"unknown"},V=e6.collection("users").doc(k.uid);(await V.get()).exists||(await V.set(k),console.log("User added to Firestore:",k))}},A=async()=>{c(!0);try{const y=await m1.signInWithPopup(bk);console.log("Signed in with Google:",y.user),await v(y.user),d("/login")}catch(y){console.error("Error with Google sign in:",y),a("Error with Google sign in. Please try again.")}finally{c(!1)}},I=async()=>{c(!0);try{const y=await m1.signInWithPopup(Rk);console.log("Signed in with Facebook:",y.user),await v(y.user),d("/login")}catch(y){console.error("Error with Facebook sign in:",y),a("Error with Facebook sign in. Please try again.")}finally{c(!1)}};return O.jsxs("div",{className:"registration-container",children:[O.jsx("img",{src:"https://storage.googleapis.com/pr-newsroom-wp/1/2023/05/Spotify_Primary_Logo_RGB_White.png",alt:"Spotify Logo"}),O.jsx("h1",{className:"Sign-up",children:"Sign up to start listening"}),O.jsxs("form",{onSubmit:w,children:[O.jsxs("div",{className:"input-group",children:[O.jsx("input",{type:"email",placeholder:"Email address",value:t,onChange:p,className:i?"":"input-error",disabled:l}),!i&&O.jsx("p",{className:"error-message",children:o})]}),O.jsx("div",{className:"input-group",children:O.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:y=>r(y.target.value),disabled:l})}),O.jsx("button",{type:"submit",className:"btn-submit",disabled:l,children:l?"Processing...":"Next"})]}),O.jsx("div",{className:"auth-separator",children:O.jsx("span",{children:"or"})}),O.jsxs("div",{className:"auth-options",children:[O.jsxs("button",{className:"btn-google",onClick:A,disabled:l,children:[O.jsx(xk,{style:{marginRight:"8px"},className:"google-icon"})," Continue with Google"]}),O.jsxs("button",{className:"btn-facebook",onClick:I,disabled:l,children:[O.jsx(Nk,{style:{marginRight:"8px"},className:"facebook-icon"}),"Continue with Facebook"]})]}),O.jsx("div",{className:"thin-divider"}),O.jsxs("p",{className:"login-text",children:["Already have an account? ",O.jsx(DA,{to:"/login",children:"Log in here"})]})]})},f6=[{id:"014c",email:"aboba@gmail.com",password:"123456"},{id:"a126",email:"dima@gmail.com",password:"Dima123"},{id:"a5d2",email:"jas23@gmail.com",password:"jas1234"},{id:"caf5",email:"jast23@gmail.com",password:"Jast23"},{id:"8668",email:"johndoe@gmail.com",password:"John123"},{id:"1a0b",email:"arthur23@gmail.com",password:"Arthur23"},{id:"2756",email:"sophia26@gmail.com",password:"Sophia26"},{id:"5fb8",email:"obema2008@gmail.com",password:"Obema2008"}],p6=[{id:1,title:"EARTH",artistId:1,image:"https://pbs.twimg.com/media/FsFDqq9WIAUyUDk?format=jpg&name=large",musicFile:"src/music/EARTH.mp3",fullscreenImage:"src/fullscreen/Stars.png"},{id:2,title:"Gats",artistId:1,image:"https://i.pinimg.com/736x/55/a8/91/55a8911c5c7f7b278999ce172d5d0265.jpg",musicFile:"src/music/Gats.mp3",fullscreenImage:"src/fullscreen/Duel.jpg"},{id:3,title:"Forces",artistId:1,image:"https://cs13.pikabu.ru/post_img/big/2022/12/18/10/1671382907298070929.png",musicFile:"src/music/Forces.mp3",fullscreenImage:"src/fullscreen/Fight.jpg"},{id:4,title:"Ball",artistId:1,image:"https://www.kinonews.ru/insimgs/2022/shotimg/shotimg111641_1.jpg",musicFile:"src/music/Ball.mp3",fullscreenImage:"src/fullscreen/Stars.png"},{id:5,title:"BEHELIT",artistId:1,image:"https://www.meme-arsenal.com/memes/1319a7ddaeb4e6552af79d93fe25e159.jpg",musicFile:"src/music/BEHELIT.mp3",fullscreenImage:"src/fullscreen/Duel.jpg"},{id:6,title:"Murder",artistId:1,image:"https://i.pinimg.com/736x/4d/44/f8/4d44f858594ae32f602362e3ffb2847c.jpg",musicFile:"src/music/Murder.mp3",fullscreenImage:"src/fullscreen/Femto.jpg"},{id:7,title:"Kaer Morchen",artistId:2,image:"src/fullscreen/KaerMorhen.jpg",musicFile:"src/music/Kaer.mp3",fullscreenImage:"src/fullscreen/Castle.jpg"},{id:8,title:"You're... Immortal?",artistId:2,image:"https://wallpapercave.com/wp/wp1854637.png",musicFile:"src/music/You're...Immortal.mp3",fullscreenImage:"src/fullscreen/Phone8.png"}],m6=[{id:1,name:"Susumu Hirasawa",description:"Mixing elements of progressive rock, spacy new age atmospheres, and electro-pop, Susumu Hirasawa is known for his time in bands including the chart-topping new wave group P-Model, as a soundtrack composer, and as a charting solo artist. Hirasawa maintained a solo career thereafter and branched into anime, scoring with projects like the '90s series Berserk, while continuing to release music with P-Model, the latter issued their final album, Music Industrial Wastes: P-Model or Die, in 1999.",image:"https://i.scdn.co/image/ab6761610000e5ebf0a9a67d18a96b163d395984",listeners:"317 223",link:"https://susumuhirasawa.com/"},{id:2,name:"Marcin Przybyowicz",description:"A visionary - one of the most streamed Polish composers worldwide - Marcin Przybyowicz - has already made history in gaming industry. With the release of The Witcher 3 in 2015, then followed by two expansions - Heart of Stone and Blood and Wine - he instantly became a household name, gaining an immediate success he then repeated with the release of the score for Cyberpunk 2077.",image:"https://is1-ssl.mzstatic.com/image/thumb/AMCArtistImages211/v4/8e/43/e2/8e43e239-3e07-0cde-ae32-7359a956389b/fd55c8a5-540e-472a-98c2-e9705e78d733_file_cropped.png/486x486bb.png",listeners:"1,501,267",link:"https://www.facebook.com/marcinprzybylowicz/?locale=pl_PL"}],Uo={users:f6,songs:p6,artists:m6};const g6=({onSelectSong:t,artists:e,searchTerm:n})=>{const[r,i]=M.useState(Uo.songs);M.useEffect(()=>{i(Uo.songs)},[]);const s=r.filter(o=>o.title.toLowerCase().includes(n.toLowerCase()));return O.jsxs("div",{className:"songs-container",children:[O.jsx("h1",{className:"songs-title",children:" "}),O.jsx("div",{className:"songs-list",children:s.map(o=>{const a=e.find(l=>l.id===o.artistId);return O.jsxs("div",{role:"button","aria-disabled":"false","aria-labelledby":`listrow-title-${o.id} listrow-subtitle-${o.id}`,tabIndex:0,className:"song-item RowButton",onClick:()=>t(o),children:[O.jsx("img",{src:o.image,alt:o.title,className:"song-image"}),O.jsxs("div",{className:"song-info",children:[O.jsx("div",{id:`listrow-title-${o.id}`,className:"song-title",children:o.title}),O.jsx("div",{id:`listrow-subtitle-${o.id}`,className:"song-artist",children:a?a.name:" "})]})]},o.id)})})]})};const y6=({song:t,artists:e})=>{const n=t?e.find(r=>r.id===t.artistId):null;return O.jsx("div",{className:"song-detail",children:t?O.jsxs(O.Fragment,{children:[O.jsx("img",{src:t.image?t.image:"https://via.placeholder.com/400",alt:t.title,className:"song-detail-image"}),O.jsx("h2",{className:"song-detail-title",children:t.title}),O.jsx("p",{className:"song-detail-artist",children:n&&n.name?n.name:" "})]}):O.jsxs(O.Fragment,{children:[O.jsx("img",{src:"https://www.the-paulmccartney-project.com/_images/wp-uploads/2023/12/Spotify_Logo_CMYK_Green-scaled.jpg",alt:"Spotify Logo",className:"song-detail-image"}),O.jsx("h2",{className:"song-detail-title",children:"   "})]})})};const _6=({artist:t})=>O.jsx("div",{className:"author-info-container",children:O.jsxs("div",{className:"author-info",children:[O.jsx("div",{className:"author-image-container",style:{backgroundImage:`url(${t.image})`},children:O.jsx("div",{className:"author-overlay",children:O.jsx("div",{className:"author-label",children:" "})})}),O.jsxs("div",{className:"artist-info-container",children:[O.jsx("div",{className:"artist-name-section",children:O.jsx("span",{className:"artist-name",children:t.name})}),O.jsxs("div",{className:"artist-stats-section",children:[O.jsxs("div",{className:"artist-listeners",children:[t.listeners,"   "]}),O.jsx("a",{className:"subscribe-button",href:t.link,tabIndex:0,role:"button","aria-label":"",children:""})]}),O.jsx("div",{className:"artist-description",children:t.description})]})]})});var k0={},Ok={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Ok);var Er=Ok.exports,Qm={};function ae(){return ae=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ae.apply(null,arguments)}function pi(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Dk(t){if(!pi(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=Dk(t[n])}),e}function mr(t,e,n={clone:!0}){const r=n.clone?ae({},t):t;return pi(t)&&pi(e)&&Object.keys(e).forEach(i=>{pi(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&pi(t[i])?r[i]=mr(t[i],e[i],n):n.clone?r[i]=pi(e[i])?Dk(e[i]):e[i]:r[i]=e[i]}),r}const v6=Object.freeze(Object.defineProperty({__proto__:null,default:mr,isPlainObject:pi},Symbol.toStringTag,{value:"Module"}));function Yu(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const w6=Object.freeze(Object.defineProperty({__proto__:null,default:Yu},Symbol.toStringTag,{value:"Module"}));var Vk={exports:{}},ge={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0=Symbol.for("react.element"),N0=Symbol.for("react.portal"),op=Symbol.for("react.fragment"),ap=Symbol.for("react.strict_mode"),lp=Symbol.for("react.profiler"),up=Symbol.for("react.provider"),cp=Symbol.for("react.context"),I6=Symbol.for("react.server_context"),dp=Symbol.for("react.forward_ref"),hp=Symbol.for("react.suspense"),fp=Symbol.for("react.suspense_list"),pp=Symbol.for("react.memo"),mp=Symbol.for("react.lazy"),E6=Symbol.for("react.offscreen"),Mk;Mk=Symbol.for("react.module.reference");function Mn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case x0:switch(t=t.type,t){case op:case lp:case ap:case hp:case fp:return t;default:switch(t=t&&t.$$typeof,t){case I6:case cp:case dp:case mp:case pp:case up:return t;default:return e}}case N0:return e}}}ge.ContextConsumer=cp;ge.ContextProvider=up;ge.Element=x0;ge.ForwardRef=dp;ge.Fragment=op;ge.Lazy=mp;ge.Memo=pp;ge.Portal=N0;ge.Profiler=lp;ge.StrictMode=ap;ge.Suspense=hp;ge.SuspenseList=fp;ge.isAsyncMode=function(){return!1};ge.isConcurrentMode=function(){return!1};ge.isContextConsumer=function(t){return Mn(t)===cp};ge.isContextProvider=function(t){return Mn(t)===up};ge.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===x0};ge.isForwardRef=function(t){return Mn(t)===dp};ge.isFragment=function(t){return Mn(t)===op};ge.isLazy=function(t){return Mn(t)===mp};ge.isMemo=function(t){return Mn(t)===pp};ge.isPortal=function(t){return Mn(t)===N0};ge.isProfiler=function(t){return Mn(t)===lp};ge.isStrictMode=function(t){return Mn(t)===ap};ge.isSuspense=function(t){return Mn(t)===hp};ge.isSuspenseList=function(t){return Mn(t)===fp};ge.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===op||t===lp||t===ap||t===hp||t===fp||t===E6||typeof t=="object"&&t!==null&&(t.$$typeof===mp||t.$$typeof===pp||t.$$typeof===up||t.$$typeof===cp||t.$$typeof===dp||t.$$typeof===Mk||t.getModuleId!==void 0)};ge.typeOf=Mn;Vk.exports=ge;var _1=Vk.exports;const T6=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function Lk(t){const e=`${t}`.match(T6);return e&&e[1]||""}function Fk(t,e=""){return t.displayName||t.name||Lk(t)||e}function v1(t,e,n){const r=Fk(e);return t.displayName||(r!==""?`${n}(${r})`:n)}function S6(t){if(t!=null){if(typeof t=="string")return t;if(typeof t=="function")return Fk(t,"Component");if(typeof t=="object")switch(t.$$typeof){case _1.ForwardRef:return v1(t,t.render,"ForwardRef");case _1.Memo:return v1(t,t.type,"memo");default:return}}}const P6=Object.freeze(Object.defineProperty({__proto__:null,default:S6,getFunctionName:Lk},Symbol.toStringTag,{value:"Module"}));function Gi(t){if(typeof t!="string")throw new Error(Yu(7));return t.charAt(0).toUpperCase()+t.slice(1)}const A6=Object.freeze(Object.defineProperty({__proto__:null,default:Gi},Symbol.toStringTag,{value:"Module"}));function b6(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function R6(t,e=166){let n;function r(...i){const s=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(s,e)}return r.clear=()=>{clearTimeout(n)},r}function C6(t,e){return()=>null}function k6(t,e){var n,r;return M.isValidElement(t)&&e.indexOf((n=t.type.muiName)!=null?n:(r=t.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function jk(t){return t&&t.ownerDocument||document}function x6(t){return jk(t).defaultView||window}function N6(t,e){return()=>null}function Uk(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const O6=typeof window<"u"?M.useLayoutEffect:M.useEffect,$k=O6;let w1=0;function D6(t){const[e,n]=M.useState(t),r=t||e;return M.useEffect(()=>{e==null&&(w1+=1,n(`mui-${w1}`))},[e]),r}const I1=nh["useId".toString()];function V6(t){if(I1!==void 0){const e=I1();return t??e}return D6(t)}function M6(t,e,n,r,i){return null}function L6({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=M.useRef(t!==void 0),[s,o]=M.useState(e),a=i?t:s,l=M.useCallback(c=>{i||o(c)},[]);return[a,l]}function F6(t){const e=M.useRef(t);return $k(()=>{e.current=t}),M.useRef((...n)=>(0,e.current)(...n)).current}function j6(...t){return M.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{Uk(n,e)})},t)}class O0{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new O0}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}let gp=!0,$y=!1;const U6=new O0,$6={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function B6(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&$6[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function z6(t){t.metaKey||t.altKey||t.ctrlKey||(gp=!0)}function Ym(){gp=!1}function q6(){this.visibilityState==="hidden"&&$y&&(gp=!0)}function W6(t){t.addEventListener("keydown",z6,!0),t.addEventListener("mousedown",Ym,!0),t.addEventListener("pointerdown",Ym,!0),t.addEventListener("touchstart",Ym,!0),t.addEventListener("visibilitychange",q6,!0)}function G6(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return gp||B6(e)}function K6(){const t=M.useCallback(i=>{i!=null&&W6(i.ownerDocument)},[]),e=M.useRef(!1);function n(){return e.current?($y=!0,U6.start(100,()=>{$y=!1}),e.current=!1,!0):!1}function r(i){return G6(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function By(t,e){const n=ae({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=ae({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},s=e[r];n[r]={},!s||!Object.keys(s)?n[r]=i:!i||!Object.keys(i)?n[r]=s:(n[r]=ae({},s),Object.keys(i).forEach(o=>{n[r][o]=By(i[o],s[o])}))}else n[r]===void 0&&(n[r]=t[r])}),n}function H6(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((s,o)=>{if(o){const a=e(o);a!==""&&s.push(a),n&&n[o]&&s.push(n[o])}return s},[]).join(" ")}),r}const E1=t=>t,Q6=()=>{let t=E1;return{configure(e){t=e},generate(e){return t(e)},reset(){t=E1}}},Y6=Q6(),Bk=Y6,J6={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function zk(t,e,n="Mui"){const r=J6[e];return r?`${n}-${r}`:`${Bk.generate(t)}-${e}`}function X6(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=zk(t,i,n)}),r}function Z6(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}const e9=Object.freeze(Object.defineProperty({__proto__:null,default:Z6},Symbol.toStringTag,{value:"Module"}));function Tr(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function qk(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=qk(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function t9(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=qk(t))&&(r&&(r+=" "),r+=e);return r}const Wk=M.createContext(void 0);function n9({value:t,children:e}){return O.jsx(Wk.Provider,{value:t,children:e})}function r9(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?By(i.defaultProps,r):!i.styleOverrides&&!i.variants?By(i,r):r}function i9({props:t,name:e}){const n=M.useContext(Wk);return r9({props:t,name:e,theme:{components:n}})}function s9(t){return i9(t)}var xc={},Jm={exports:{}},T1;function Gk(){return T1||(T1=1,function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var s in i)({}).hasOwnProperty.call(i,s)&&(n[s]=i[s])}return n},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(null,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(Jm)),Jm.exports}var Xm={exports:{}},S1;function o9(){return S1||(S1=1,function(t){function e(n,r){if(n==null)return{};var i={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(r.includes(s))continue;i[s]=n[s]}return i}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(Xm)),Xm.exports}function Kk(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var a9=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,l9=Kk(function(t){return a9.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),u9=!1;function c9(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function d9(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var h9=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!u9:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(d9(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=c9(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Dt="-ms-",Xh="-moz-",he="-webkit-",Hk="comm",D0="rule",V0="decl",f9="@import",Qk="@keyframes",p9="@layer",m9=Math.abs,yp=String.fromCharCode,g9=Object.assign;function y9(t,e){return Tt(t,0)^45?(((e<<2^Tt(t,0))<<2^Tt(t,1))<<2^Tt(t,2))<<2^Tt(t,3):0}function Yk(t){return t.trim()}function _9(t,e){return(t=e.exec(t))?t[0]:t}function fe(t,e,n){return t.replace(e,n)}function zy(t,e){return t.indexOf(e)}function Tt(t,e){return t.charCodeAt(e)|0}function Ju(t,e,n){return t.slice(e,n)}function tr(t){return t.length}function M0(t){return t.length}function Sd(t,e){return e.push(t),t}function v9(t,e){return t.map(e).join("")}var _p=1,Ca=1,Jk=0,an=0,st=0,Qa="";function vp(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:_p,column:Ca,length:o,return:""}}function Cl(t,e){return g9(vp("",null,null,"",null,null,0),t,{length:-t.length},e)}function w9(){return st}function I9(){return st=an>0?Tt(Qa,--an):0,Ca--,st===10&&(Ca=1,_p--),st}function mn(){return st=an<Jk?Tt(Qa,an++):0,Ca++,st===10&&(Ca=1,_p++),st}function gr(){return Tt(Qa,an)}function Jd(){return an}function Nc(t,e){return Ju(Qa,t,e)}function Xu(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Xk(t){return _p=Ca=1,Jk=tr(Qa=t),an=0,[]}function Zk(t){return Qa="",t}function Xd(t){return Yk(Nc(an-1,qy(t===91?t+2:t===40?t+1:t)))}function E9(t){for(;(st=gr())&&st<33;)mn();return Xu(t)>2||Xu(st)>3?"":" "}function T9(t,e){for(;--e&&mn()&&!(st<48||st>102||st>57&&st<65||st>70&&st<97););return Nc(t,Jd()+(e<6&&gr()==32&&mn()==32))}function qy(t){for(;mn();)switch(st){case t:return an;case 34:case 39:t!==34&&t!==39&&qy(st);break;case 40:t===41&&qy(t);break;case 92:mn();break}return an}function S9(t,e){for(;mn()&&t+st!==47+10;)if(t+st===42+42&&gr()===47)break;return"/*"+Nc(e,an-1)+"*"+yp(t===47?t:mn())}function P9(t){for(;!Xu(gr());)mn();return Nc(t,an)}function A9(t){return Zk(Zd("",null,null,null,[""],t=Xk(t),0,[0],t))}function Zd(t,e,n,r,i,s,o,a,l){for(var c=0,d=0,h=o,p=0,g=0,w=0,v=1,A=1,I=1,y=0,T="",k=i,V=s,j=r,S=T;A;)switch(w=y,y=mn()){case 40:if(w!=108&&Tt(S,h-1)==58){zy(S+=fe(Xd(y),"&","&\f"),"&\f")!=-1&&(I=-1);break}case 34:case 39:case 91:S+=Xd(y);break;case 9:case 10:case 13:case 32:S+=E9(w);break;case 92:S+=T9(Jd()-1,7);continue;case 47:switch(gr()){case 42:case 47:Sd(b9(S9(mn(),Jd()),e,n),l);break;default:S+="/"}break;case 123*v:a[c++]=tr(S)*I;case 125*v:case 59:case 0:switch(y){case 0:case 125:A=0;case 59+d:I==-1&&(S=fe(S,/\f/g,"")),g>0&&tr(S)-h&&Sd(g>32?A1(S+";",r,n,h-1):A1(fe(S," ","")+";",r,n,h-2),l);break;case 59:S+=";";default:if(Sd(j=P1(S,e,n,c,d,i,a,T,k=[],V=[],h),s),y===123)if(d===0)Zd(S,e,j,j,k,s,h,a,V);else switch(p===99&&Tt(S,3)===110?100:p){case 100:case 108:case 109:case 115:Zd(t,j,j,r&&Sd(P1(t,j,j,0,0,i,a,T,i,k=[],h),V),i,V,h,a,r?k:V);break;default:Zd(S,j,j,j,[""],V,0,a,V)}}c=d=g=0,v=I=1,T=S="",h=o;break;case 58:h=1+tr(S),g=w;default:if(v<1){if(y==123)--v;else if(y==125&&v++==0&&I9()==125)continue}switch(S+=yp(y),y*v){case 38:I=d>0?1:(S+="\f",-1);break;case 44:a[c++]=(tr(S)-1)*I,I=1;break;case 64:gr()===45&&(S+=Xd(mn())),p=gr(),d=h=tr(T=S+=P9(Jd())),y++;break;case 45:w===45&&tr(S)==2&&(v=0)}}return s}function P1(t,e,n,r,i,s,o,a,l,c,d){for(var h=i-1,p=i===0?s:[""],g=M0(p),w=0,v=0,A=0;w<r;++w)for(var I=0,y=Ju(t,h+1,h=m9(v=o[w])),T=t;I<g;++I)(T=Yk(v>0?p[I]+" "+y:fe(y,/&\f/g,p[I])))&&(l[A++]=T);return vp(t,e,n,i===0?D0:a,l,c,d)}function b9(t,e,n){return vp(t,e,n,Hk,yp(w9()),Ju(t,2,-2),0)}function A1(t,e,n,r){return vp(t,e,n,V0,Ju(t,0,r),Ju(t,r+1,-1),r)}function Zo(t,e){for(var n="",r=M0(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function R9(t,e,n,r){switch(t.type){case p9:if(t.children.length)break;case f9:case V0:return t.return=t.return||t.value;case Hk:return"";case Qk:return t.return=t.value+"{"+Zo(t.children,r)+"}";case D0:t.value=t.props.join(",")}return tr(n=Zo(t.children,r))?t.return=t.value+"{"+n+"}":""}function C9(t){var e=M0(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function k9(t){return function(e){e.root||(e=e.return)&&t(e)}}var x9=function(e,n,r){for(var i=0,s=0;i=s,s=gr(),i===38&&s===12&&(n[r]=1),!Xu(s);)mn();return Nc(e,an)},N9=function(e,n){var r=-1,i=44;do switch(Xu(i)){case 0:i===38&&gr()===12&&(n[r]=1),e[r]+=x9(an-1,n,r);break;case 2:e[r]+=Xd(i);break;case 4:if(i===44){e[++r]=gr()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=yp(i)}while(i=mn());return e},O9=function(e,n){return Zk(N9(Xk(e),n))},b1=new WeakMap,D9=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!b1.get(r))&&!i){b1.set(e,!0);for(var s=[],o=O9(n,s),a=r.props,l=0,c=0;l<o.length;l++)for(var d=0;d<a.length;d++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[d]):a[d]+" "+o[l]}}},V9=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function ex(t,e){switch(y9(t,e)){case 5103:return he+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return he+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return he+t+Xh+t+Dt+t+t;case 6828:case 4268:return he+t+Dt+t+t;case 6165:return he+t+Dt+"flex-"+t+t;case 5187:return he+t+fe(t,/(\w+).+(:[^]+)/,he+"box-$1$2"+Dt+"flex-$1$2")+t;case 5443:return he+t+Dt+"flex-item-"+fe(t,/flex-|-self/,"")+t;case 4675:return he+t+Dt+"flex-line-pack"+fe(t,/align-content|flex-|-self/,"")+t;case 5548:return he+t+Dt+fe(t,"shrink","negative")+t;case 5292:return he+t+Dt+fe(t,"basis","preferred-size")+t;case 6060:return he+"box-"+fe(t,"-grow","")+he+t+Dt+fe(t,"grow","positive")+t;case 4554:return he+fe(t,/([^-])(transform)/g,"$1"+he+"$2")+t;case 6187:return fe(fe(fe(t,/(zoom-|grab)/,he+"$1"),/(image-set)/,he+"$1"),t,"")+t;case 5495:case 3959:return fe(t,/(image-set\([^]*)/,he+"$1$`$1");case 4968:return fe(fe(t,/(.+:)(flex-)?(.*)/,he+"box-pack:$3"+Dt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+he+t+t;case 4095:case 3583:case 4068:case 2532:return fe(t,/(.+)-inline(.+)/,he+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(tr(t)-1-e>6)switch(Tt(t,e+1)){case 109:if(Tt(t,e+4)!==45)break;case 102:return fe(t,/(.+:)(.+)-([^]+)/,"$1"+he+"$2-$3$1"+Xh+(Tt(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~zy(t,"stretch")?ex(fe(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Tt(t,e+1)!==115)break;case 6444:switch(Tt(t,tr(t)-3-(~zy(t,"!important")&&10))){case 107:return fe(t,":",":"+he)+t;case 101:return fe(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+he+(Tt(t,14)===45?"inline-":"")+"box$3$1"+he+"$2$3$1"+Dt+"$2box$3")+t}break;case 5936:switch(Tt(t,e+11)){case 114:return he+t+Dt+fe(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return he+t+Dt+fe(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return he+t+Dt+fe(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return he+t+Dt+t+t}return t}var M9=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case V0:e.return=ex(e.value,e.length);break;case Qk:return Zo([Cl(e,{value:fe(e.value,"@","@"+he)})],i);case D0:if(e.length)return v9(e.props,function(s){switch(_9(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Zo([Cl(e,{props:[fe(s,/:(read-\w+)/,":"+Xh+"$1")]})],i);case"::placeholder":return Zo([Cl(e,{props:[fe(s,/:(plac\w+)/,":"+he+"input-$1")]}),Cl(e,{props:[fe(s,/:(plac\w+)/,":"+Xh+"$1")]}),Cl(e,{props:[fe(s,/:(plac\w+)/,Dt+"input-$1")]})],i)}return""})}},L9=[M9],tx=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(v){var A=v.getAttribute("data-emotion");A.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var i=e.stylisPlugins||L9,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(v){for(var A=v.getAttribute("data-emotion").split(" "),I=1;I<A.length;I++)s[A[I]]=!0;a.push(v)});var l,c=[D9,V9];{var d,h=[R9,k9(function(v){d.insert(v)})],p=C9(c.concat(i,h)),g=function(A){return Zo(A9(A),p)};l=function(A,I,y,T){d=y,g(A?A+"{"+I.styles+"}":I.styles),T&&(w.inserted[I.name]=!0)}}var w={key:n,sheet:new h9({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return w.sheet.hydrate(a),w},nx={exports:{}},ye={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vt=typeof Symbol=="function"&&Symbol.for,L0=vt?Symbol.for("react.element"):60103,F0=vt?Symbol.for("react.portal"):60106,wp=vt?Symbol.for("react.fragment"):60107,Ip=vt?Symbol.for("react.strict_mode"):60108,Ep=vt?Symbol.for("react.profiler"):60114,Tp=vt?Symbol.for("react.provider"):60109,Sp=vt?Symbol.for("react.context"):60110,j0=vt?Symbol.for("react.async_mode"):60111,Pp=vt?Symbol.for("react.concurrent_mode"):60111,Ap=vt?Symbol.for("react.forward_ref"):60112,bp=vt?Symbol.for("react.suspense"):60113,F9=vt?Symbol.for("react.suspense_list"):60120,Rp=vt?Symbol.for("react.memo"):60115,Cp=vt?Symbol.for("react.lazy"):60116,j9=vt?Symbol.for("react.block"):60121,U9=vt?Symbol.for("react.fundamental"):60117,$9=vt?Symbol.for("react.responder"):60118,B9=vt?Symbol.for("react.scope"):60119;function In(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case L0:switch(t=t.type,t){case j0:case Pp:case wp:case Ep:case Ip:case bp:return t;default:switch(t=t&&t.$$typeof,t){case Sp:case Ap:case Cp:case Rp:case Tp:return t;default:return e}}case F0:return e}}}function rx(t){return In(t)===Pp}ye.AsyncMode=j0;ye.ConcurrentMode=Pp;ye.ContextConsumer=Sp;ye.ContextProvider=Tp;ye.Element=L0;ye.ForwardRef=Ap;ye.Fragment=wp;ye.Lazy=Cp;ye.Memo=Rp;ye.Portal=F0;ye.Profiler=Ep;ye.StrictMode=Ip;ye.Suspense=bp;ye.isAsyncMode=function(t){return rx(t)||In(t)===j0};ye.isConcurrentMode=rx;ye.isContextConsumer=function(t){return In(t)===Sp};ye.isContextProvider=function(t){return In(t)===Tp};ye.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===L0};ye.isForwardRef=function(t){return In(t)===Ap};ye.isFragment=function(t){return In(t)===wp};ye.isLazy=function(t){return In(t)===Cp};ye.isMemo=function(t){return In(t)===Rp};ye.isPortal=function(t){return In(t)===F0};ye.isProfiler=function(t){return In(t)===Ep};ye.isStrictMode=function(t){return In(t)===Ip};ye.isSuspense=function(t){return In(t)===bp};ye.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===wp||t===Pp||t===Ep||t===Ip||t===bp||t===F9||typeof t=="object"&&t!==null&&(t.$$typeof===Cp||t.$$typeof===Rp||t.$$typeof===Tp||t.$$typeof===Sp||t.$$typeof===Ap||t.$$typeof===U9||t.$$typeof===$9||t.$$typeof===B9||t.$$typeof===j9)};ye.typeOf=In;nx.exports=ye;var z9=nx.exports,ix=z9,q9={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},W9={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},sx={};sx[ix.ForwardRef]=q9;sx[ix.Memo]=W9;var G9=!0;function K9(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var ox=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||G9===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},ax=function(e,n,r){ox(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function H9(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Q9={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Y9=!1,J9=/[A-Z]|^ms/g,X9=/_EMO_([^_]+?)_([^]*?)_EMO_/g,lx=function(e){return e.charCodeAt(1)===45},R1=function(e){return e!=null&&typeof e!="boolean"},Zm=Kk(function(t){return lx(t)?t:t.replace(J9,"-$&").toLowerCase()}),C1=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(X9,function(r,i,s){return nr={name:i,styles:s,next:nr},i})}return Q9[e]!==1&&!lx(e)&&typeof n=="number"&&n!==0?n+"px":n},Z9="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Zu(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return nr={name:i.name,styles:i.styles,next:nr},i.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)nr={name:o.name,styles:o.styles,next:nr},o=o.next;var a=s.styles+";";return a}return eB(t,e,n)}case"function":{if(t!==void 0){var l=nr,c=n(t);return nr=l,Zu(t,e,c)}break}}var d=n;if(e==null)return d;var h=e[d];return h!==void 0?h:d}function eB(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Zu(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?r+=s+"{"+e[a]+"}":R1(a)&&(r+=Zm(s)+":"+C1(s,a)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&Y9)throw new Error(Z9);if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var l=0;l<o.length;l++)R1(o[l])&&(r+=Zm(s)+":"+C1(s,o[l])+";");else{var c=Zu(t,e,o);switch(s){case"animation":case"animationName":{r+=Zm(s)+":"+c+";";break}default:r+=s+"{"+c+"}"}}}}return r}var k1=/label:\s*([^\s;{]+)\s*(;|$)/g,nr;function U0(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";nr=void 0;var s=t[0];if(s==null||s.raw===void 0)r=!1,i+=Zu(n,e,s);else{var o=s;i+=o[0]}for(var a=1;a<t.length;a++)if(i+=Zu(n,e,t[a]),r){var l=s;i+=l[a]}k1.lastIndex=0;for(var c="",d;(d=k1.exec(i))!==null;)c+="-"+d[1];var h=H9(i)+c;return{name:h,styles:i,next:nr}}var tB=function(e){return e()},ux=nh["useInsertionEffect"]?nh["useInsertionEffect"]:!1,nB=ux||tB,x1=ux||M.useLayoutEffect,cx=M.createContext(typeof HTMLElement<"u"?tx({key:"css"}):null),rB=cx.Provider,dx=function(e){return M.forwardRef(function(n,r){var i=M.useContext(cx);return e(n,i,r)})},Oc=M.createContext({});Gk();var iB=dx(function(t,e){var n=t.styles,r=U0([n],void 0,M.useContext(Oc)),i=M.useRef();return x1(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),x1(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&ax(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function hx(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return U0(e)}var sB=function(){var e=hx.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},oB=l9,aB=function(e){return e!=="theme"},N1=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?oB:aB},O1=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},lB=!1,uB=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return ox(n,r,i),nB(function(){return ax(n,r,i)}),null},cB=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=O1(e,n,r),l=a||N1(i),c=!l("as");return function(){var d=arguments,h=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&h.push("label:"+s+";"),d[0]==null||d[0].raw===void 0)h.push.apply(h,d);else{h.push(d[0][0]);for(var p=d.length,g=1;g<p;g++)h.push(d[g],d[0][g])}var w=dx(function(v,A,I){var y=c&&v.as||i,T="",k=[],V=v;if(v.theme==null){V={};for(var j in v)V[j]=v[j];V.theme=M.useContext(Oc)}typeof v.className=="string"?T=K9(A.registered,k,v.className):v.className!=null&&(T=v.className+" ");var S=U0(h.concat(k),A.registered,V);T+=A.key+"-"+S.name,o!==void 0&&(T+=" "+o);var E=c&&a===void 0?N1(y):l,P={};for(var b in v)c&&b==="as"||E(b)&&(P[b]=v[b]);return P.className=T,I&&(P.ref=I),M.createElement(M.Fragment,null,M.createElement(uB,{cache:A,serialized:S,isStringTag:typeof y=="string"}),M.createElement(y,P))});return w.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",w.defaultProps=e.defaultProps,w.__emotion_real=w,w.__emotion_base=i,w.__emotion_styles=h,w.__emotion_forwardProp=a,Object.defineProperty(w,"toString",{value:function(){return o===void 0&&lB?"NO_COMPONENT_SELECTOR":"."+o}}),w.withComponent=function(v,A){return t(v,ae({},n,A,{shouldForwardProp:O1(w,A,!0)})).apply(void 0,h)},w}},dB=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Wy=cB.bind();dB.forEach(function(t){Wy[t]=Wy(t)});let Gy;typeof document=="object"&&(Gy=tx({key:"css",prepend:!0}));function hB(t){const{injectFirst:e,children:n}=t;return e&&Gy?O.jsx(rB,{value:Gy,children:n}):n}function fB(t){return t==null||Object.keys(t).length===0}function pB(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(fB(i)?n:i):e;return O.jsx(iB,{styles:r})}/**
 * @mui/styled-engine v5.16.6
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function mB(t,e){return Wy(t,e)}const gB=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))},yB=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:pB,StyledEngineProvider:hB,ThemeContext:Oc,css:hx,default:mB,internal_processStyles:gB,keyframes:sB},Symbol.toStringTag,{value:"Module"})),_B=Kr(yB),vB=Kr(v6),wB=Kr(A6),IB=Kr(P6),EB=["values","unit","step"],TB=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>ae({},n,{[r.key]:r.val}),{})};function fx(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=Tr(t,EB),s=TB(e),o=Object.keys(s);function a(p){return`@media (min-width:${typeof e[p]=="number"?e[p]:p}${n})`}function l(p){return`@media (max-width:${(typeof e[p]=="number"?e[p]:p)-r/100}${n})`}function c(p,g){const w=o.indexOf(g);return`@media (min-width:${typeof e[p]=="number"?e[p]:p}${n}) and (max-width:${(w!==-1&&typeof e[o[w]]=="number"?e[o[w]]:g)-r/100}${n})`}function d(p){return o.indexOf(p)+1<o.length?c(p,o[o.indexOf(p)+1]):a(p)}function h(p){const g=o.indexOf(p);return g===0?a(o[1]):g===o.length-1?l(o[g]):c(p,o[o.indexOf(p)+1]).replace("@media","@media not all and")}return ae({keys:o,values:s,up:a,down:l,between:c,only:d,not:h,unit:n},i)}const SB={borderRadius:4},PB=SB;function lu(t,e){return e?mr(t,e,{clone:!1}):t}const $0={xs:0,sm:600,md:900,lg:1200,xl:1536},D1={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${$0[t]}px)`};function Gr(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||D1;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||D1;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||$0).indexOf(a)!==-1){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function AB(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const s=t.up(i);return r[s]={},r},{}))||{}}function bB(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function kp(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function Zh(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=kp(t,n)||r,e&&(i=e(i,r,t)),i}function tt(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=kp(l,r)||{};return Gr(o,a,h=>{let p=Zh(c,i,h);return h===p&&typeof h=="string"&&(p=Zh(c,i,`${e}${h==="default"?"":Gi(h)}`,h)),n===!1?p:{[n]:p}})};return s.propTypes={},s.filterProps=[e],s}function RB(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const CB={m:"margin",p:"padding"},kB={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},V1={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},xB=RB(t=>{if(t.length>2)if(V1[t])t=V1[t];else return[t];const[e,n]=t.split(""),r=CB[e],i=kB[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),B0=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],z0=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...B0,...z0];function Dc(t,e,n,r){var i;const s=(i=kp(t,e,!1))!=null?i:n;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function px(t){return Dc(t,"spacing",8)}function Vc(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function NB(t,e){return n=>t.reduce((r,i)=>(r[i]=Vc(e,n),r),{})}function OB(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=xB(n),s=NB(i,r),o=t[n];return Gr(t,o,s)}function mx(t,e){const n=px(t.theme);return Object.keys(t).map(r=>OB(t,e,r,n)).reduce(lu,{})}function $e(t){return mx(t,B0)}$e.propTypes={};$e.filterProps=B0;function Be(t){return mx(t,z0)}Be.propTypes={};Be.filterProps=z0;function DB(t=8){if(t.mui)return t;const e=px({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function xp(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?lu(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function An(t){return typeof t!="number"?t:`${t}px solid`}function Ln(t,e){return tt({prop:t,themeKey:"borders",transform:e})}const VB=Ln("border",An),MB=Ln("borderTop",An),LB=Ln("borderRight",An),FB=Ln("borderBottom",An),jB=Ln("borderLeft",An),UB=Ln("borderColor"),$B=Ln("borderTopColor"),BB=Ln("borderRightColor"),zB=Ln("borderBottomColor"),qB=Ln("borderLeftColor"),WB=Ln("outline",An),GB=Ln("outlineColor"),Np=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=Dc(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:Vc(e,r)});return Gr(t,t.borderRadius,n)}return null};Np.propTypes={};Np.filterProps=["borderRadius"];xp(VB,MB,LB,FB,jB,UB,$B,BB,zB,qB,Np,WB,GB);const Op=t=>{if(t.gap!==void 0&&t.gap!==null){const e=Dc(t.theme,"spacing",8),n=r=>({gap:Vc(e,r)});return Gr(t,t.gap,n)}return null};Op.propTypes={};Op.filterProps=["gap"];const Dp=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=Dc(t.theme,"spacing",8),n=r=>({columnGap:Vc(e,r)});return Gr(t,t.columnGap,n)}return null};Dp.propTypes={};Dp.filterProps=["columnGap"];const Vp=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=Dc(t.theme,"spacing",8),n=r=>({rowGap:Vc(e,r)});return Gr(t,t.rowGap,n)}return null};Vp.propTypes={};Vp.filterProps=["rowGap"];const KB=tt({prop:"gridColumn"}),HB=tt({prop:"gridRow"}),QB=tt({prop:"gridAutoFlow"}),YB=tt({prop:"gridAutoColumns"}),JB=tt({prop:"gridAutoRows"}),XB=tt({prop:"gridTemplateColumns"}),ZB=tt({prop:"gridTemplateRows"}),ez=tt({prop:"gridTemplateAreas"}),tz=tt({prop:"gridArea"});xp(Op,Dp,Vp,KB,HB,QB,YB,JB,XB,ZB,ez,tz);function ea(t,e){return e==="grey"?e:t}const nz=tt({prop:"color",themeKey:"palette",transform:ea}),rz=tt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:ea}),iz=tt({prop:"backgroundColor",themeKey:"palette",transform:ea});xp(nz,rz,iz);function dn(t){return t<=1&&t!==0?`${t*100}%`:t}const sz=tt({prop:"width",transform:dn}),q0=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i;const s=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||$0[n];return s?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${s}${t.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:dn(n)}};return Gr(t,t.maxWidth,e)}return null};q0.filterProps=["maxWidth"];const oz=tt({prop:"minWidth",transform:dn}),az=tt({prop:"height",transform:dn}),lz=tt({prop:"maxHeight",transform:dn}),uz=tt({prop:"minHeight",transform:dn});tt({prop:"size",cssProperty:"width",transform:dn});tt({prop:"size",cssProperty:"height",transform:dn});const cz=tt({prop:"boxSizing"});xp(sz,q0,oz,az,lz,uz,cz);const dz={border:{themeKey:"borders",transform:An},borderTop:{themeKey:"borders",transform:An},borderRight:{themeKey:"borders",transform:An},borderBottom:{themeKey:"borders",transform:An},borderLeft:{themeKey:"borders",transform:An},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:An},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Np},color:{themeKey:"palette",transform:ea},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:ea},backgroundColor:{themeKey:"palette",transform:ea},p:{style:Be},pt:{style:Be},pr:{style:Be},pb:{style:Be},pl:{style:Be},px:{style:Be},py:{style:Be},padding:{style:Be},paddingTop:{style:Be},paddingRight:{style:Be},paddingBottom:{style:Be},paddingLeft:{style:Be},paddingX:{style:Be},paddingY:{style:Be},paddingInline:{style:Be},paddingInlineStart:{style:Be},paddingInlineEnd:{style:Be},paddingBlock:{style:Be},paddingBlockStart:{style:Be},paddingBlockEnd:{style:Be},m:{style:$e},mt:{style:$e},mr:{style:$e},mb:{style:$e},ml:{style:$e},mx:{style:$e},my:{style:$e},margin:{style:$e},marginTop:{style:$e},marginRight:{style:$e},marginBottom:{style:$e},marginLeft:{style:$e},marginX:{style:$e},marginY:{style:$e},marginInline:{style:$e},marginInlineStart:{style:$e},marginInlineEnd:{style:$e},marginBlock:{style:$e},marginBlockStart:{style:$e},marginBlockEnd:{style:$e},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Op},rowGap:{style:Vp},columnGap:{style:Dp},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:dn},maxWidth:{style:q0},minWidth:{transform:dn},height:{transform:dn},maxHeight:{transform:dn},minHeight:{transform:dn},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},Mc=dz;function hz(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function fz(t,e){return typeof t=="function"?t(e):t}function gx(){function t(n,r,i,s){const o={[n]:r,theme:i},a=s[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:d,style:h}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const p=kp(i,c)||{};return h?h(o):Gr(o,r,w=>{let v=Zh(p,d,w);return w===v&&typeof w=="string"&&(v=Zh(p,d,`${n}${w==="default"?"":Gi(w)}`,w)),l===!1?v:{[l]:v}})}function e(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const o=(r=s.unstable_sxConfig)!=null?r:Mc;function a(l){let c=l;if(typeof l=="function")c=l(s);else if(typeof l!="object")return l;if(!c)return null;const d=AB(s.breakpoints),h=Object.keys(d);let p=d;return Object.keys(c).forEach(g=>{const w=fz(c[g],s);if(w!=null)if(typeof w=="object")if(o[g])p=lu(p,t(g,w,s,o));else{const v=Gr({theme:s},w,A=>({[g]:A}));hz(v,w)?p[g]=e({sx:w,theme:s}):p=lu(p,v)}else p=lu(p,t(g,w,s,o))}),bB(h,p)}return Array.isArray(i)?i.map(a):a(i)}return e}const yx=gx();yx.filterProps=["sx"];const W0=yx;function _x(t,e){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(t).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:n.palette.mode===t?e:{}}const pz=["breakpoints","palette","spacing","shape"];function vx(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=t,o=Tr(t,pz),a=fx(n),l=DB(i);let c=mr({breakpoints:a,direction:"ltr",components:{},palette:ae({mode:"light"},r),spacing:l,shape:ae({},PB,s)},o);return c.applyStyles=_x,c=e.reduce((d,h)=>mr(d,h),c),c.unstable_sxConfig=ae({},Mc,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(h){return W0({sx:h,theme:this})},c}const mz=Object.freeze(Object.defineProperty({__proto__:null,default:vx,private_createBreakpoints:fx,unstable_applyStyles:_x},Symbol.toStringTag,{value:"Module"})),gz=Kr(mz),yz=["sx"],_z=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:Mc;return Object.keys(t).forEach(s=>{i[s]?r.systemProps[s]=t[s]:r.otherProps[s]=t[s]}),r};function vz(t){const{sx:e}=t,n=Tr(t,yz),{systemProps:r,otherProps:i}=_z(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return pi(a)?ae({},r,a):r}:s=ae({},r,e),ae({},i,{sx:s})}const wz=Object.freeze(Object.defineProperty({__proto__:null,default:W0,extendSxProp:vz,unstable_createStyleFunctionSx:gx,unstable_defaultSxConfig:Mc},Symbol.toStringTag,{value:"Module"})),Iz=Kr(wz);var Ya=Er;Object.defineProperty(xc,"__esModule",{value:!0});var Ez=xc.default=Vz;xc.shouldForwardProp=eh;xc.systemDefaultTheme=void 0;var Tn=Ya(Gk()),Ky=Ya(o9()),M1=Cz(_B),Tz=vB;Ya(wB);Ya(IB);var Sz=Ya(gz),Pz=Ya(Iz);const Az=["ownerState"],bz=["variants"],Rz=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function wx(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(wx=function(r){return r?n:e})(t)}function Cz(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=wx(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function kz(t){return Object.keys(t).length===0}function xz(t){return typeof t=="string"&&t.charCodeAt(0)>96}function eh(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const Nz=xc.systemDefaultTheme=(0,Sz.default)(),Oz=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function Pd({defaultTheme:t,theme:e,themeId:n}){return kz(e)?t:e[n]||e}function Dz(t){return t?(e,n)=>n[t]:null}function th(t,e){let{ownerState:n}=e,r=(0,Ky.default)(e,Az);const i=typeof t=="function"?t((0,Tn.default)({ownerState:n},r)):t;if(Array.isArray(i))return i.flatMap(s=>th(s,(0,Tn.default)({ownerState:n},r)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:s=[]}=i;let a=(0,Ky.default)(i,bz);return s.forEach(l=>{let c=!0;typeof l.props=="function"?c=l.props((0,Tn.default)({ownerState:n},r,n)):Object.keys(l.props).forEach(d=>{(n==null?void 0:n[d])!==l.props[d]&&r[d]!==l.props[d]&&(c=!1)}),c&&(Array.isArray(a)||(a=[a]),a.push(typeof l.style=="function"?l.style((0,Tn.default)({ownerState:n},r,n)):l.style))}),a}return i}function Vz(t={}){const{themeId:e,defaultTheme:n=Nz,rootShouldForwardProp:r=eh,slotShouldForwardProp:i=eh}=t,s=o=>(0,Pz.default)((0,Tn.default)({},o,{theme:Pd((0,Tn.default)({},o,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{(0,M1.internal_processStyles)(o,V=>V.filter(j=>!(j!=null&&j.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:d,skipSx:h,overridesResolver:p=Dz(Oz(c))}=a,g=(0,Ky.default)(a,Rz),w=d!==void 0?d:c&&c!=="Root"&&c!=="root"||!1,v=h||!1;let A,I=eh;c==="Root"||c==="root"?I=r:c?I=i:xz(o)&&(I=void 0);const y=(0,M1.default)(o,(0,Tn.default)({shouldForwardProp:I,label:A},g)),T=V=>typeof V=="function"&&V.__emotion_real!==V||(0,Tz.isPlainObject)(V)?j=>th(V,(0,Tn.default)({},j,{theme:Pd({theme:j.theme,defaultTheme:n,themeId:e})})):V,k=(V,...j)=>{let S=T(V);const E=j?j.map(T):[];l&&p&&E.push(C=>{const x=Pd((0,Tn.default)({},C,{defaultTheme:n,themeId:e}));if(!x.components||!x.components[l]||!x.components[l].styleOverrides)return null;const R=x.components[l].styleOverrides,at={};return Object.entries(R).forEach(([Fn,Jn])=>{at[Fn]=th(Jn,(0,Tn.default)({},C,{theme:x}))}),p(C,at)}),l&&!w&&E.push(C=>{var x;const R=Pd((0,Tn.default)({},C,{defaultTheme:n,themeId:e})),at=R==null||(x=R.components)==null||(x=x[l])==null?void 0:x.variants;return th({variants:at},(0,Tn.default)({},C,{theme:R}))}),v||E.push(s);const P=E.length-j.length;if(Array.isArray(V)&&P>0){const C=new Array(P).fill("");S=[...V,...C],S.raw=[...V.raw,...C]}const b=y(S,...E);return o.muiName&&(b.muiName=o.muiName),b};return y.withConfig&&(k.withConfig=y.withConfig),k}}function Mz(t,e){return ae({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}var nt={};const Lz=Kr(w6),Fz=Kr(e9);var Ix=Er;Object.defineProperty(nt,"__esModule",{value:!0});nt.alpha=Px;nt.blend=Jz;nt.colorChannel=void 0;var jz=nt.darken=K0;nt.decomposeColor=Vn;nt.emphasize=Ax;var Uz=nt.getContrastRatio=Gz;nt.getLuminance=ef;nt.hexToRgb=Ex;nt.hslToRgb=Sx;var $z=nt.lighten=H0;nt.private_safeAlpha=Kz;nt.private_safeColorChannel=void 0;nt.private_safeDarken=Hz;nt.private_safeEmphasize=Yz;nt.private_safeLighten=Qz;nt.recomposeColor=Ja;nt.rgbToHex=Wz;var L1=Ix(Lz),Bz=Ix(Fz);function G0(t,e=0,n=1){return(0,Bz.default)(t,e,n)}function Ex(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function zz(t){const e=t.toString(16);return e.length===1?`0${e}`:e}function Vn(t){if(t.type)return t;if(t.charAt(0)==="#")return Vn(Ex(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,L1.default)(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error((0,L1.default)(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}const Tx=t=>{const e=Vn(t);return e.values.slice(0,3).map((n,r)=>e.type.indexOf("hsl")!==-1&&r!==0?`${n}%`:n).join(" ")};nt.colorChannel=Tx;const qz=(t,e)=>{try{return Tx(t)}catch{return t}};nt.private_safeColorChannel=qz;function Ja(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function Wz(t){if(t.indexOf("#")===0)return t;const{values:e}=Vn(t);return`#${e.map((n,r)=>zz(r===3?Math.round(255*n):n)).join("")}`}function Sx(t){t=Vn(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(c,d=(c+n/30)%12)=>i-s*Math.max(Math.min(d-3,9-d,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),Ja({type:a,values:l})}function ef(t){t=Vn(t);let e=t.type==="hsl"||t.type==="hsla"?Vn(Sx(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Gz(t,e){const n=ef(t),r=ef(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Px(t,e){return t=Vn(t),e=G0(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,Ja(t)}function Kz(t,e,n){try{return Px(t,e)}catch{return t}}function K0(t,e){if(t=Vn(t),e=G0(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return Ja(t)}function Hz(t,e,n){try{return K0(t,e)}catch{return t}}function H0(t,e){if(t=Vn(t),e=G0(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return Ja(t)}function Qz(t,e,n){try{return H0(t,e)}catch{return t}}function Ax(t,e=.15){return ef(t)>.5?K0(t,e):H0(t,e)}function Yz(t,e,n){try{return Ax(t,e)}catch{return t}}function Jz(t,e,n,r=1){const i=(l,c)=>Math.round((l**(1/r)*(1-n)+c**(1/r)*n)**r),s=Vn(t),o=Vn(e),a=[i(s.values[0],o.values[0]),i(s.values[1],o.values[1]),i(s.values[2],o.values[2])];return Ja({type:"rgb",values:a})}const Xz={black:"#000",white:"#fff"},ec=Xz,Zz={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},e8=Zz,t8={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},yo=t8,n8={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},_o=n8,r8={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},kl=r8,i8={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},vo=i8,s8={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},wo=s8,o8={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Io=o8,a8=["mode","contrastThreshold","tonalOffset"],F1={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:ec.white,default:ec.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},eg={text:{primary:ec.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:ec.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function j1(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=$z(t.main,i):e==="dark"&&(t.dark=jz(t.main,s)))}function l8(t="light"){return t==="dark"?{main:vo[200],light:vo[50],dark:vo[400]}:{main:vo[700],light:vo[400],dark:vo[800]}}function u8(t="light"){return t==="dark"?{main:yo[200],light:yo[50],dark:yo[400]}:{main:yo[500],light:yo[300],dark:yo[700]}}function c8(t="light"){return t==="dark"?{main:_o[500],light:_o[300],dark:_o[700]}:{main:_o[700],light:_o[400],dark:_o[800]}}function d8(t="light"){return t==="dark"?{main:wo[400],light:wo[300],dark:wo[700]}:{main:wo[700],light:wo[500],dark:wo[900]}}function h8(t="light"){return t==="dark"?{main:Io[400],light:Io[300],dark:Io[700]}:{main:Io[800],light:Io[500],dark:Io[900]}}function f8(t="light"){return t==="dark"?{main:kl[400],light:kl[300],dark:kl[700]}:{main:"#ed6c02",light:kl[500],dark:kl[900]}}function p8(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=Tr(t,a8),s=t.primary||l8(e),o=t.secondary||u8(e),a=t.error||c8(e),l=t.info||d8(e),c=t.success||h8(e),d=t.warning||f8(e);function h(v){return Uz(v,eg.text.primary)>=n?eg.text.primary:F1.text.primary}const p=({color:v,name:A,mainShade:I=500,lightShade:y=300,darkShade:T=700})=>{if(v=ae({},v),!v.main&&v[I]&&(v.main=v[I]),!v.hasOwnProperty("main"))throw new Error(Yu(11,A?` (${A})`:"",I));if(typeof v.main!="string")throw new Error(Yu(12,A?` (${A})`:"",JSON.stringify(v.main)));return j1(v,"light",y,r),j1(v,"dark",T,r),v.contrastText||(v.contrastText=h(v.main)),v},g={dark:eg,light:F1};return mr(ae({common:ae({},ec),mode:e,primary:p({color:s,name:"primary"}),secondary:p({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:a,name:"error"}),warning:p({color:d,name:"warning"}),info:p({color:l,name:"info"}),success:p({color:c,name:"success"}),grey:e8,contrastThreshold:n,getContrastText:h,augmentColor:p,tonalOffset:r},g[e]),i)}const m8=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function g8(t){return Math.round(t*1e5)/1e5}const U1={textTransform:"uppercase"},$1='"Roboto", "Helvetica", "Arial", sans-serif';function y8(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=$1,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:d,pxToRem:h}=n,p=Tr(n,m8),g=i/14,w=h||(I=>`${I/c*g}rem`),v=(I,y,T,k,V)=>ae({fontFamily:r,fontWeight:I,fontSize:w(y),lineHeight:T},r===$1?{letterSpacing:`${g8(k/y)}em`}:{},V,d),A={h1:v(s,96,1.167,-1.5),h2:v(s,60,1.2,-.5),h3:v(o,48,1.167,0),h4:v(o,34,1.235,.25),h5:v(o,24,1.334,0),h6:v(a,20,1.6,.15),subtitle1:v(o,16,1.75,.15),subtitle2:v(a,14,1.57,.1),body1:v(o,16,1.5,.15),body2:v(o,14,1.43,.15),button:v(a,14,1.75,.4,U1),caption:v(o,12,1.66,.4),overline:v(o,12,2.66,1,U1),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return mr(ae({htmlFontSize:c,pxToRem:w,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},A),p,{clone:!1})}const _8=.2,v8=.14,w8=.12;function Re(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${_8})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${v8})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${w8})`].join(",")}const I8=["none",Re(0,2,1,-1,0,1,1,0,0,1,3,0),Re(0,3,1,-2,0,2,2,0,0,1,5,0),Re(0,3,3,-2,0,3,4,0,0,1,8,0),Re(0,2,4,-1,0,4,5,0,0,1,10,0),Re(0,3,5,-1,0,5,8,0,0,1,14,0),Re(0,3,5,-1,0,6,10,0,0,1,18,0),Re(0,4,5,-2,0,7,10,1,0,2,16,1),Re(0,5,5,-3,0,8,10,1,0,3,14,2),Re(0,5,6,-3,0,9,12,1,0,3,16,2),Re(0,6,6,-3,0,10,14,1,0,4,18,3),Re(0,6,7,-4,0,11,15,1,0,4,20,3),Re(0,7,8,-4,0,12,17,2,0,5,22,4),Re(0,7,8,-4,0,13,19,2,0,5,24,4),Re(0,7,9,-4,0,14,21,2,0,5,26,4),Re(0,8,9,-5,0,15,22,2,0,6,28,5),Re(0,8,10,-5,0,16,24,2,0,6,30,5),Re(0,8,11,-5,0,17,26,2,0,6,32,5),Re(0,9,11,-5,0,18,28,2,0,7,34,6),Re(0,9,12,-6,0,19,29,2,0,7,36,6),Re(0,10,13,-6,0,20,31,3,0,8,38,7),Re(0,10,13,-6,0,21,33,3,0,8,40,7),Re(0,10,14,-6,0,22,35,3,0,8,42,7),Re(0,11,14,-7,0,23,36,3,0,9,44,8),Re(0,11,15,-7,0,24,38,3,0,9,46,8)],E8=I8,T8=["duration","easing","delay"],S8={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},P8={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function B1(t){return`${Math.round(t)}ms`}function A8(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function b8(t){const e=ae({},S8,t.easing),n=ae({},P8,t.duration);return ae({getAutoHeightDuration:A8,create:(i=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0}=s;return Tr(s,T8),(Array.isArray(i)?i:[i]).map(c=>`${c} ${typeof o=="string"?o:B1(o)} ${a} ${typeof l=="string"?l:B1(l)}`).join(",")}},t,{easing:e,duration:n})}const R8={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},C8=R8,k8=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function bx(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:s={}}=t,o=Tr(t,k8);if(t.vars)throw new Error(Yu(18));const a=p8(r),l=vx(t);let c=mr(l,{mixins:Mz(l.breakpoints,n),palette:a,shadows:E8.slice(),typography:y8(a,s),transitions:b8(i),zIndex:ae({},C8)});return c=mr(c,o),c=e.reduce((d,h)=>mr(d,h),c),c.unstable_sxConfig=ae({},Mc,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(h){return W0({sx:h,theme:this})},c}const x8=bx(),N8=x8,Hy="$$material";function O8(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const D8=t=>O8(t)&&t!=="classes",V8=D8,M8=Ez({themeId:Hy,defaultTheme:N8,rootShouldForwardProp:V8}),L8=M8;function F8(t){return zk("MuiSvgIcon",t)}X6("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const j8=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],U8=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${Gi(e)}`,`fontSize${Gi(n)}`]};return H6(i,F8,r)},$8=L8("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${Gi(n.color)}`],e[`fontSize${Gi(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,r,i,s,o,a,l,c,d,h,p,g,w;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(i=t.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((s=t.typography)==null||(o=s.pxToRem)==null?void 0:o.call(s,20))||"1.25rem",medium:((a=t.typography)==null||(l=a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem",large:((c=t.typography)==null||(d=c.pxToRem)==null?void 0:d.call(c,35))||"2.1875rem"}[e.fontSize],color:(h=(p=(t.vars||t).palette)==null||(p=p[e.color])==null?void 0:p.main)!=null?h:{action:(g=(t.vars||t).palette)==null||(g=g.action)==null?void 0:g.active,disabled:(w=(t.vars||t).palette)==null||(w=w.action)==null?void 0:w.disabled,inherit:void 0}[e.color]}}),Rx=M.forwardRef(function(e,n){const r=s9({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:d=!1,titleAccess:h,viewBox:p="0 0 24 24"}=r,g=Tr(r,j8),w=M.isValidElement(i)&&i.type==="svg",v=ae({},r,{color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:d,viewBox:p,hasSvgAsChild:w}),A={};d||(A.viewBox=p);const I=U8(v);return O.jsxs($8,ae({as:a,className:t9(I.root,s),focusable:"false",color:c,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:n},A,g,w&&i.props,{ownerState:v,children:[w?i.props.children:i,h?O.jsx("title",{children:h}):null]}))});Rx.muiName="SvgIcon";const z1=Rx;function B8(t,e){function n(r,i){return O.jsx(z1,ae({"data-testid":`${e}Icon`,ref:i},r,{children:t}))}return n.muiName=z1.muiName,M.memo(M.forwardRef(n))}const z8={configure:t=>{Bk.configure(t)}},q8=Object.freeze(Object.defineProperty({__proto__:null,capitalize:Gi,createChainedFunction:b6,createSvgIcon:B8,debounce:R6,deprecatedPropType:C6,isMuiElement:k6,ownerDocument:jk,ownerWindow:x6,requirePropFactory:N6,setRef:Uk,unstable_ClassNameGenerator:z8,unstable_useEnhancedEffect:$k,unstable_useId:V6,unsupportedProp:M6,useControlled:L6,useEventCallback:F6,useForkRef:j6,useIsFocusVisible:K6},Symbol.toStringTag,{value:"Module"})),W8=Kr(q8);var q1;function is(){return q1||(q1=1,function(t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=W8}(Qm)),Qm}var G8=Er;Object.defineProperty(k0,"__esModule",{value:!0});var Cx=k0.default=void 0;Q8(M);var K8=G8(is()),H8=O;function kx(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(kx=function(r){return r?n:e})(t)}function Q8(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=kx(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}Cx=k0.default=(0,K8.default)((0,H8.jsx)("path",{transform:"scale(0.5, 0.5)",d:"M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm-4 29V15l12 9-12 9z"}),"PlayCircleFilledWhite");var Q0={},Y8=Er;Object.defineProperty(Q0,"__esModule",{value:!0});var xx=Q0.default=void 0,J8=Y8(is()),X8=O;xx=Q0.default=(0,J8.default)((0,X8.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 14H9V8h2zm4 0h-2V8h2z"}),"PauseCircleFilled");var Y0={},Z8=Er;Object.defineProperty(Y0,"__esModule",{value:!0});var Nx=Y0.default=void 0,eq=Z8(is()),tq=O;Nx=Y0.default=(0,eq.default)((0,tq.jsx)("path",{d:"M6 6h2v12H6zm3.5 6 8.5 6V6z"}),"SkipPrevious");var J0={},nq=Er;Object.defineProperty(J0,"__esModule",{value:!0});var Ox=J0.default=void 0,rq=nq(is()),iq=O;Ox=J0.default=(0,rq.default)((0,iq.jsx)("path",{d:"m6 18 8.5-6L6 6zM16 6v12h2V6z"}),"SkipNext");var X0={},sq=Er;Object.defineProperty(X0,"__esModule",{value:!0});var Dx=X0.default=void 0,oq=sq(is()),aq=O;Dx=X0.default=(0,oq.default)((0,aq.jsx)("path",{d:"M10.59 9.17 5.41 4 4 5.41l5.17 5.17zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4zm.33 9.41-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04z"}),"Shuffle");var Z0={},lq=Er;Object.defineProperty(Z0,"__esModule",{value:!0});var Vx=Z0.default=void 0,uq=lq(is()),cq=O;Vx=Z0.default=(0,uq.default)((0,cq.jsx)("path",{d:"M7 7h10v3l4-4-4-4v3H5v6h2zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2z"}),"Repeat");var ew={},dq=Er;Object.defineProperty(ew,"__esModule",{value:!0});var Mx=ew.default=void 0,hq=dq(is()),fq=O;Mx=ew.default=(0,hq.default)((0,fq.jsx)("path",{d:"M3 9v6h4l5 5V4L7 9zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02M14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77"}),"VolumeUp");var tw={},pq=Er;Object.defineProperty(tw,"__esModule",{value:!0});var Lx=tw.default=void 0,mq=pq(is()),gq=O;Lx=tw.default=(0,mq.default)((0,gq.jsx)("path",{d:"M7 14H5v5h5v-2H7zm-2-4h2V7h3V5H5zm12 7h-3v2h5v-5h-2zM14 5v2h3v3h2V5z"}),"Fullscreen");const yq=({songSrc:t,songImage:e,songTitle:n,artistName:r,currentSongId:i,fullscreenImage:s,songs:o,onSongChange:a})=>{var Jn,En,H;const[l,c]=M.useState(!1),[d,h]=M.useState(0),[p,g]=M.useState(.5),[w,v]=M.useState(!1),[A,I]=M.useState(!1),[y,T]=M.useState(!1),k=M.useRef(null),V=M.useRef(null),j=()=>{k.current&&(l?k.current.pause():k.current.play().catch(K=>{console.error("Error playing audio:",K)}),c(!l))},S=()=>{k.current&&h(k.current.currentTime)},E=K=>{const ee=parseFloat(K.target.value);g(ee),k.current&&(k.current.volume=ee)};M.useEffect(()=>{k.current&&t&&(k.current.src=t,k.current.play().catch(K=>{console.error("Error playing audio:",K)}),c(!0))},[t]);const P=()=>{let K;do{const ee=Math.floor(Math.random()*o.length);K=o[ee].id}while(K===i);return K},b=()=>{if(A&&i!==null)a(P());else if(i!==null){const K=o.findIndex(ve=>ve.id===i),ee=K===0?o.length-1:K-1;a(o[ee].id)}},C=()=>{if(A&&i!==null)a(P());else if(i!==null){const K=o.findIndex(ve=>ve.id===i),ee=K===o.length-1?0:K+1;a(o[ee].id)}},x=()=>{v(K=>!K)},R=()=>{I(K=>!K)},at=()=>{var K;w?(K=k.current)==null||K.play():A?a(P()):C()},Fn=()=>{y?document.exitFullscreen():V.current&&V.current.requestFullscreen().catch(K=>{console.error("Error attempting to enable full-screen mode:",K)}),T(!y)};return M.useEffect(()=>{const K=()=>{document.fullscreenElement||T(!1)};return document.addEventListener("fullscreenchange",K),()=>{document.removeEventListener("fullscreenchange",K)}},[]),M.useEffect(()=>{y?(document.body.style.overflow="hidden",document.body.style.backgroundColor="transparent"):(document.body.style.overflow="auto",document.body.style.backgroundColor="")},[y]),O.jsxs("div",{className:`spotify-player ${y?"fullscreen":""}`,ref:V,children:[O.jsx("audio",{ref:k,onTimeUpdate:S,onEnded:at}),O.jsxs("div",{className:"track-info",children:[e&&O.jsx("img",{src:e,className:"track-image",alt:"track"}),O.jsxs("div",{className:"track-details",children:[O.jsx("span",{className:"track-title",children:n}),O.jsx("span",{className:"track-artist",children:r})]})]}),O.jsxs("div",{className:"player-controls",children:[O.jsx(Dx,{className:`icon ${A?"active":"inactive"}`,onClick:R}),O.jsx(Nx,{className:"icon arrow",onClick:b}),l?O.jsx(xx,{className:"icon play-pause",onClick:j}):O.jsx(Cx,{className:"icon play-pause",onClick:j}),O.jsx(Ox,{className:"icon arrow",onClick:C}),O.jsx(Vx,{className:`icon ${w?"active":"inactive"}`,onClick:x})]}),O.jsxs("div",{className:"progress-bar",children:[O.jsxs("span",{children:[Math.floor(d/60),":",Math.floor(d%60).toString().padStart(2,"0")]}),O.jsx("input",{type:"range",min:"0",max:((Jn=k.current)==null?void 0:Jn.duration)||100,value:d,onChange:K=>{k.current&&(k.current.currentTime=parseFloat(K.target.value))}}),O.jsxs("span",{children:[Math.floor((((En=k.current)==null?void 0:En.duration)||0)/60),":",Math.floor((((H=k.current)==null?void 0:H.duration)||0)%60).toString().padStart(2,"0")]}),O.jsxs("div",{className:"right-controls",children:[O.jsx(Mx,{className:"icon"}),O.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:p,onChange:E}),O.jsx(Lx,{className:"icon",onClick:Fn})]})]}),y&&s&&O.jsx("div",{className:"fullscreen-overlay",children:O.jsx("img",{src:s,alt:"fullscreen",className:"fullscreen-image"})})]})};function _q(t){return Ha({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 256c52.805 0 96-43.201 96-96s-43.195-96-96-96-96 43.201-96 96 43.195 96 96 96zm0 48c-63.598 0-192 32.402-192 96v48h384v-48c0-63.598-128.402-96-192-96z"},child:[]}]})(t)}const vq=()=>{const[t,e]=M.useState(!1),[n,r]=M.useState(!1),i=()=>{e(!t)},s=()=>{localStorage.removeItem("userEmail"),window.location.href="/login"},o=localStorage.getItem("userEmail");return O.jsxs("div",{className:"avatar-container",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[O.jsx(_q,{className:"icon avatar-icon",onClick:i}),n&&o&&O.jsx("span",{className:"user-email",children:o}),t&&O.jsx("div",{className:"dropdown-menu",children:O.jsx("div",{className:"menu-item",onClick:s,children:"Log out"})})]})},wq=({setSearchTerm:t})=>{const[e,n]=M.useState(null);return M.useEffect(()=>{const r=localStorage.getItem("userEmail");n(r)},[]),O.jsxs("div",{className:"spotify-header",children:[O.jsx("div",{className:"header-left",children:O.jsx("img",{src:"https://storage.googleapis.com/pr-newsroom-wp/1/2023/05/Spotify_Primary_Logo_RGB_White.png",alt:"Spotify Logo",className:"spotify-logo"})}),O.jsxs("div",{className:"header-center",children:[O.jsx("div",{className:"home-button",children:O.jsx(u6,{className:"icon home-icon"})}),O.jsxs("div",{className:"search-wrapper",children:[O.jsx("input",{type:"text",placeholder:"   ?",className:"search-input",onChange:r=>t(r.target.value)}),O.jsx(c6,{className:"search-icon"})]})]}),O.jsxs("div",{className:"header-right",children:[O.jsx("div",{className:"Bell",children:O.jsx(l6,{className:"icon-bell"})}),e&&O.jsx("span",{className:"user-email",children:e}),O.jsx("div",{className:"avatar",children:O.jsx(vq,{})})]})]})};const Iq=()=>{const[t,e]=M.useState(null),[n,r]=M.useState([]),[i,s]=M.useState(""),o=c=>{console.log("Selected song:",c),e(c)},a=c=>{console.log("Changing to song ID:",c);const d=Uo.songs.find(h=>h.id===c);console.log("Song found:",d),e(d||null)};M.useEffect(()=>{r(Uo.artists),console.log("Artists loaded:",Uo.artists)},[]);const l=t?n.find(c=>c.id===t.artistId):null;return O.jsx("div",{className:"main-page",children:O.jsxs("div",{className:"app-container",children:[O.jsx(wq,{setSearchTerm:s}),O.jsx("div",{className:"songs-container",children:O.jsx(g6,{onSelectSong:o,artists:n,searchTerm:i})}),O.jsxs("div",{className:"content",children:[O.jsx(y6,{song:t,artists:n}),l&&O.jsx(_6,{artist:l})]}),t&&O.jsx(yq,{songSrc:t.musicFile,songImage:t.image,songTitle:t.title,artistName:l?l.name:null,currentSongId:t.id,fullscreenImage:t.fullscreenImage,songs:Uo.songs,onSongChange:a})]})})},Eq=()=>O.jsx("div",{children:O.jsxs(zD,{children:[O.jsx(Vl,{path:"/",element:O.jsx($D,{to:"/signup"})}),O.jsx(Vl,{path:"/login",element:O.jsx("div",{className:"login-page",children:O.jsx(d6,{})})}),O.jsx(Vl,{path:"/signup",element:O.jsx("div",{className:"signup-page",children:O.jsx(h6,{})})}),O.jsx(Vl,{path:"/main-page1",element:O.jsx("div",{className:"main-page1",children:O.jsx(Iq,{})})})]})});function Tq(t){return Object.keys(t).length===0}function Sq(t=null){const e=M.useContext(Oc);return!e||Tq(e)?t:e}const Pq=M.createContext(null),Fx=Pq;function jx(){return M.useContext(Fx)}const Aq=typeof Symbol=="function"&&Symbol.for,bq=Aq?Symbol.for("mui.nested"):"__THEME_NESTED__";function Rq(t,e){return typeof e=="function"?e(t):ae({},t,e)}function Cq(t){const{children:e,theme:n}=t,r=jx(),i=M.useMemo(()=>{const s=r===null?n:Rq(r,n);return s!=null&&(s[bq]=r!==null),s},[n,r]);return O.jsx(Fx.Provider,{value:i,children:e})}const kq=["value"],xq=M.createContext();function Nq(t){let{value:e}=t,n=Tr(t,kq);return O.jsx(xq.Provider,ae({value:e??!0},n))}const W1={};function G1(t,e,n,r=!1){return M.useMemo(()=>{const i=t&&e[t]||e;if(typeof n=="function"){const s=n(i),o=t?ae({},e,{[t]:s}):s;return r?()=>o:o}return t?ae({},e,{[t]:n}):ae({},e,n)},[t,e,n,r])}function Oq(t){const{children:e,theme:n,themeId:r}=t,i=Sq(W1),s=jx()||W1,o=G1(r,i,n),a=G1(r,s,n,!0),l=o.direction==="rtl";return O.jsx(Cq,{theme:a,children:O.jsx(Oc.Provider,{value:o,children:O.jsx(Nq,{value:l,children:O.jsx(n9,{value:o==null?void 0:o.components,children:e})})})})}function tc(t){"@babel/helpers - typeof";return tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tc(t)}function Dq(t,e){if(tc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(tc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vq(t){var e=Dq(t,"string");return tc(e)=="symbol"?e:e+""}const Mq=["theme"];function Lq(t){let{theme:e}=t,n=Tr(t,Mq);const r=e[Hy];return O.jsx(Oq,ae({},n,{themeId:r?Hy:void 0,theme:r||e}))}const Fq=bx({});function qn(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Hs(t){return!!t&&!!t[Ce]}function Qs(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Kq}(t)||Array.isArray(t)||!!t[Z1]||!!(!((e=t.constructor)===null||e===void 0)&&e[Z1])||nw(t)||rw(t))}function Ys(t,e,n){n===void 0&&(n=!1),Xa(t)===0?(n?Object.keys:na)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function Xa(t){var e=t[Ce];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:nw(t)?2:rw(t)?3:0}function ta(t,e){return Xa(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function jq(t,e){return Xa(t)===2?t.get(e):t[e]}function Ux(t,e,n){var r=Xa(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function $x(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function nw(t){return Wq&&t instanceof Map}function rw(t){return Gq&&t instanceof Set}function ps(t){return t.o||t.t}function iw(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=zx(t);delete e[Ce];for(var n=na(e),r=0;r<n.length;r++){var i=n[r],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function sw(t,e){return e===void 0&&(e=!1),ow(t)||Hs(t)||!Qs(t)||(Xa(t)>1&&(t.set=t.add=t.clear=t.delete=Uq),Object.freeze(t),e&&Ys(t,function(n,r){return sw(r,!0)},!0)),t}function Uq(){qn(2)}function ow(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function yr(t){var e=Xy[t];return e||qn(18,t),e}function $q(t,e){Xy[t]||(Xy[t]=e)}function Qy(){return nc}function tg(t,e){e&&(yr("Patches"),t.u=[],t.s=[],t.v=e)}function tf(t){Yy(t),t.p.forEach(Bq),t.p=null}function Yy(t){t===nc&&(nc=t.l)}function K1(t){return nc={p:[],l:nc,h:t,m:!0,_:0}}function Bq(t){var e=t[Ce];e.i===0||e.i===1?e.j():e.g=!0}function ng(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||yr("ES5").S(e,t,r),r?(n[Ce].P&&(tf(e),qn(4)),Qs(t)&&(t=nf(e,t),e.l||rf(e,t)),e.u&&yr("Patches").M(n[Ce].t,t,e.u,e.s)):t=nf(e,n,[]),tf(e),e.u&&e.v(e.u,e.s),t!==Bx?t:void 0}function nf(t,e,n){if(ow(e))return e;var r=e[Ce];if(!r)return Ys(e,function(a,l){return H1(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return rf(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=iw(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),Ys(s,function(a,l){return H1(t,r,i,a,l,n,o)}),rf(t,i,!1),n&&t.u&&yr("Patches").N(r,n,t.u,t.s)}return r.o}function H1(t,e,n,r,i,s,o){if(Hs(i)){var a=nf(t,i,s&&e&&e.i!==3&&!ta(e.R,r)?s.concat(r):void 0);if(Ux(n,r,a),!Hs(a))return;t.m=!1}else o&&n.add(i);if(Qs(i)&&!ow(i)){if(!t.h.D&&t._<1)return;nf(t,i),e&&e.A.l||rf(t,i)}}function rf(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&sw(e,n)}function rg(t,e){var n=t[Ce];return(n?ps(n):t)[e]}function Q1(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function mi(t){t.P||(t.P=!0,t.l&&mi(t.l))}function ig(t){t.o||(t.o=iw(t.t))}function Jy(t,e,n){var r=nw(e)?yr("MapSet").F(e,n):rw(e)?yr("MapSet").T(e,n):t.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Qy(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,c=rc;o&&(l=[a],c=zl);var d=Proxy.revocable(l,c),h=d.revoke,p=d.proxy;return a.k=p,a.j=h,p}(e,n):yr("ES5").J(e,n);return(n?n.A:Qy()).p.push(r),r}function zq(t){return Hs(t)||qn(22,t),function e(n){if(!Qs(n))return n;var r,i=n[Ce],s=Xa(n);if(i){if(!i.P&&(i.i<4||!yr("ES5").K(i)))return i.t;i.I=!0,r=Y1(n,s),i.I=!1}else r=Y1(n,s);return Ys(r,function(o,a){i&&jq(i.t,o)===a||Ux(r,o,e(a))}),s===3?new Set(r):r}(t)}function Y1(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return iw(t)}function qq(){function t(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var l=this[Ce];return rc.get(l,s)},set:function(l){var c=this[Ce];rc.set(c,s,l)}},a}function e(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Ce];if(!a.P)switch(a.i){case 5:r(a)&&mi(a);break;case 4:n(a)&&mi(a)}}}function n(s){for(var o=s.t,a=s.k,l=na(a),c=l.length-1;c>=0;c--){var d=l[c];if(d!==Ce){var h=o[d];if(h===void 0&&!ta(o,d))return!0;var p=a[d],g=p&&p[Ce];if(g?g.t!==h:!$x(p,h))return!0}}var w=!!o[Ce];return l.length!==na(o).length+(w?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};$q("ES5",{J:function(s,o){var a=Array.isArray(s),l=function(d,h){if(d){for(var p=Array(h.length),g=0;g<h.length;g++)Object.defineProperty(p,""+g,t(g,!0));return p}var w=zx(h);delete w[Ce];for(var v=na(w),A=0;A<v.length;A++){var I=v[A];w[I]=t(I,d||!!w[I].enumerable)}return Object.create(Object.getPrototypeOf(h),w)}(a,s),c={i:a?5:4,A:o?o.A:Qy(),P:!1,I:!1,R:{},l:o,t:s,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Ce,{value:c,writable:!0}),l},S:function(s,o,a){a?Hs(o)&&o[Ce].A===s&&e(s.p):(s.u&&function l(c){if(c&&typeof c=="object"){var d=c[Ce];if(d){var h=d.t,p=d.k,g=d.R,w=d.i;if(w===4)Ys(p,function(T){T!==Ce&&(h[T]!==void 0||ta(h,T)?g[T]||l(p[T]):(g[T]=!0,mi(d)))}),Ys(h,function(T){p[T]!==void 0||ta(p,T)||(g[T]=!1,mi(d))});else if(w===5){if(r(d)&&(mi(d),g.length=!0),p.length<h.length)for(var v=p.length;v<h.length;v++)g[v]=!1;else for(var A=h.length;A<p.length;A++)g[A]=!0;for(var I=Math.min(p.length,h.length),y=0;y<I;y++)p.hasOwnProperty(y)||(g[y]=!0),g[y]===void 0&&l(p[y])}}}}(s.p[0]),e(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var J1,nc,aw=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Wq=typeof Map<"u",Gq=typeof Set<"u",X1=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Bx=aw?Symbol.for("immer-nothing"):((J1={})["immer-nothing"]=!0,J1),Z1=aw?Symbol.for("immer-draftable"):"__$immer_draftable",Ce=aw?Symbol.for("immer-state"):"__$immer_state",Kq=""+Object.prototype.constructor,na=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,zx=Object.getOwnPropertyDescriptors||function(t){var e={};return na(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},Xy={},rc={get:function(t,e){if(e===Ce)return t;var n=ps(t);if(!ta(n,e))return function(i,s,o){var a,l=Q1(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!Qs(r)?r:r===rg(t.t,e)?(ig(t),t.o[e]=Jy(t.A.h,r,t)):r},has:function(t,e){return e in ps(t)},ownKeys:function(t){return Reflect.ownKeys(ps(t))},set:function(t,e,n){var r=Q1(ps(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=rg(ps(t),e),s=i==null?void 0:i[Ce];if(s&&s.t===n)return t.o[e]=n,t.R[e]=!1,!0;if($x(n,i)&&(n!==void 0||ta(t.t,e)))return!0;ig(t),mi(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return rg(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,ig(t),mi(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=ps(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){qn(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){qn(12)}},zl={};Ys(rc,function(t,e){zl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),zl.deleteProperty=function(t,e){return zl.set.call(this,t,e,void 0)},zl.set=function(t,e,n){return rc.set.call(this,t[0],e,n,t[0])};var Hq=function(){function t(n){var r=this;this.O=X1,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(v){var A=this;v===void 0&&(v=a);for(var I=arguments.length,y=Array(I>1?I-1:0),T=1;T<I;T++)y[T-1]=arguments[T];return l.produce(v,function(k){var V;return(V=s).call.apply(V,[A,k].concat(y))})}}var c;if(typeof s!="function"&&qn(6),o!==void 0&&typeof o!="function"&&qn(7),Qs(i)){var d=K1(r),h=Jy(r,i,void 0),p=!0;try{c=s(h),p=!1}finally{p?tf(d):Yy(d)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(v){return tg(d,o),ng(v,d)},function(v){throw tf(d),v}):(tg(d,o),ng(c,d))}if(!i||typeof i!="object"){if((c=s(i))===void 0&&(c=i),c===Bx&&(c=void 0),r.D&&sw(c,!0),o){var g=[],w=[];yr("Patches").M(i,c,g,w),o(g,w)}return c}qn(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(c){for(var d=arguments.length,h=Array(d>1?d-1:0),p=1;p<d;p++)h[p-1]=arguments[p];return r.produceWithPatches(c,function(g){return i.apply(void 0,[g].concat(h))})};var o,a,l=r.produce(i,s,function(c,d){o=c,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){Qs(n)||qn(8),Hs(n)&&(n=zq(n));var r=K1(this),i=Jy(this,n,void 0);return i[Ce].C=!0,Yy(r),i},e.finishDraft=function(n,r){var i=n&&n[Ce],s=i.A;return tg(s,r),ng(void 0,s)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!X1&&qn(20),this.O=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=yr("Patches").$;return Hs(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),_n=new Hq;_n.produce;_n.produceWithPatches.bind(_n);_n.setAutoFreeze.bind(_n);_n.setUseProxies.bind(_n);_n.applyPatches.bind(_n);_n.createDraft.bind(_n);_n.finishDraft.bind(_n);function Qq(t,e,n){return(e=Vq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eS(Object(n),!0).forEach(function(r){Qq(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var nS=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),sg=function(){return Math.random().toString(36).substring(7).split("").join(".")},sf={INIT:"@@redux/INIT"+sg(),REPLACE:"@@redux/REPLACE"+sg(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+sg()}};function Yq(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function qx(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Vt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Vt(1));return n(qx)(t,e)}if(typeof t!="function")throw new Error(Vt(2));var i=t,s=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(Vt(3));return s}function h(v){if(typeof v!="function")throw new Error(Vt(4));if(l)throw new Error(Vt(5));var A=!0;return c(),a.push(v),function(){if(A){if(l)throw new Error(Vt(6));A=!1,c();var y=a.indexOf(v);a.splice(y,1),o=null}}}function p(v){if(!Yq(v))throw new Error(Vt(7));if(typeof v.type>"u")throw new Error(Vt(8));if(l)throw new Error(Vt(9));try{l=!0,s=i(s,v)}finally{l=!1}for(var A=o=a,I=0;I<A.length;I++){var y=A[I];y()}return v}function g(v){if(typeof v!="function")throw new Error(Vt(10));i=v,p({type:sf.REPLACE})}function w(){var v,A=h;return v={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(Vt(11));function T(){y.next&&y.next(d())}T();var k=A(T);return{unsubscribe:k}}},v[nS]=function(){return this},v}return p({type:sf.INIT}),r={dispatch:p,subscribe:h,getState:d,replaceReducer:g},r[nS]=w,r}function Jq(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:sf.INIT});if(typeof r>"u")throw new Error(Vt(12));if(typeof n(void 0,{type:sf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Vt(13))})}function Xq(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];typeof t[i]=="function"&&(n[i]=t[i])}var s=Object.keys(n),o;try{Jq(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var d=!1,h={},p=0;p<s.length;p++){var g=s[p],w=n[g],v=l[g],A=w(v,c);if(typeof A>"u")throw c&&c.type,new Error(Vt(14));h[g]=A,d=d||A!==v}return d=d||s.length!==Object.keys(l).length,d?h:l}}function of(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Zq(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Vt(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return s=of.apply(void 0,a)(i.dispatch),tS(tS({},i),{},{dispatch:s})}}}function Wx(t){var e=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,t):o(a)}}};return e}var Gx=Wx();Gx.withExtraArgument=Wx;const rS=Gx;var Kx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),e7=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ic=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},t7=Object.defineProperty,n7=Object.defineProperties,r7=Object.getOwnPropertyDescriptors,iS=Object.getOwnPropertySymbols,i7=Object.prototype.hasOwnProperty,s7=Object.prototype.propertyIsEnumerable,sS=function(t,e,n){return e in t?t7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ra=function(t,e){for(var n in e||(e={}))i7.call(e,n)&&sS(t,n,e[n]);if(iS)for(var r=0,i=iS(e);r<i.length;r++){var n=i[r];s7.call(e,n)&&sS(t,n,e[n])}return t},og=function(t,e){return n7(t,r7(e))},o7=function(t,e,n){return new Promise(function(r,i){var s=function(l){try{a(n.next(l))}catch(c){i(c)}},o=function(l){try{a(n.throw(l))}catch(c){i(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(s,o)};a((n=n.apply(t,e)).next())})},a7=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?of:of.apply(null,arguments)};function l7(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}function ia(t,e){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var s=e.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return ra(ra({type:t,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}var u7=function(t){Kx(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,ic([void 0],n[0].concat(this)))):new(e.bind.apply(e,ic([void 0],n.concat(this))))},e}(Array),c7=function(t){Kx(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,ic([void 0],n[0].concat(this)))):new(e.bind.apply(e,ic([void 0],n.concat(this))))},e}(Array);function d7(t){return typeof t=="boolean"}function h7(){return function(e){return f7(e)}}function f7(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck,t.actionCreatorCheck;var r=new u7;return n&&(d7(n)?r.push(rS):r.push(rS.withExtraArgument(n.extraArgument))),r}var p7=!0;function m7(t){var e=h7(),n=t||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?e():s,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,d=c===void 0?void 0:c,h=n.enhancers,p=h===void 0?void 0:h,g;if(typeof i=="function")g=i;else if(l7(i))g=Xq(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var w=o;typeof w=="function"&&(w=w(e));var v=Zq.apply(void 0,w),A=of;l&&(A=a7(ra({trace:!p7},typeof l=="object"&&l)));var I=new c7(v),y=I;Array.isArray(p)?y=ic([v],p):typeof p=="function"&&(y=p(I));var T=A.apply(void 0,y);return qx(g,d,T)}var g7="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",y7=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=g7[Math.random()*64|0];return e},_7=["name","message","stack","code"],ag=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),oS=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),v7=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=_7;n<r.length;n++){var i=r[n];typeof t[i]=="string"&&(e[i]=t[i])}return e}return{message:String(t)}};(function(){function t(e,n,r){var i=ia(e+"/fulfilled",function(c,d,h,p){return{payload:c,meta:og(ra({},p||{}),{arg:h,requestId:d,requestStatus:"fulfilled"})}}),s=ia(e+"/pending",function(c,d,h){return{payload:void 0,meta:og(ra({},h||{}),{arg:d,requestId:c,requestStatus:"pending"})}}),o=ia(e+"/rejected",function(c,d,h,p,g){return{payload:p,error:(r&&r.serializeError||v7)(c||"Rejected"),meta:og(ra({},g||{}),{arg:h,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(d,h,p){var g=r!=null&&r.idGenerator?r.idGenerator(c):y7(),w=new a,v;function A(y){v=y,w.abort()}var I=function(){return o7(this,null,function(){var y,T,k,V,j,S,E;return e7(this,function(P){switch(P.label){case 0:return P.trys.push([0,4,,5]),V=(y=r==null?void 0:r.condition)==null?void 0:y.call(r,c,{getState:h,extra:p}),I7(V)?[4,V]:[3,2];case 1:V=P.sent(),P.label=2;case 2:if(V===!1||w.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return j=new Promise(function(b,C){return w.signal.addEventListener("abort",function(){return C({name:"AbortError",message:v||"Aborted"})})}),d(s(g,c,(T=r==null?void 0:r.getPendingMeta)==null?void 0:T.call(r,{requestId:g,arg:c},{getState:h,extra:p}))),[4,Promise.race([j,Promise.resolve(n(c,{dispatch:d,getState:h,extra:p,requestId:g,signal:w.signal,abort:A,rejectWithValue:function(b,C){return new ag(b,C)},fulfillWithValue:function(b,C){return new oS(b,C)}})).then(function(b){if(b instanceof ag)throw b;return b instanceof oS?i(b.payload,g,c,b.meta):i(b,g,c)})])];case 3:return k=P.sent(),[3,5];case 4:return S=P.sent(),k=S instanceof ag?o(null,g,c,S.payload,S.meta):o(S,g,c),[3,5];case 5:return E=r&&!r.dispatchConditionRejection&&o.match(k)&&k.meta.condition,E||d(k),[2,k]}})})}();return Object.assign(I,{abort:A,requestId:g,arg:c,unwrap:function(){return I.then(w7)}})}}return Object.assign(l,{pending:s,rejected:o,fulfilled:i,typePrefix:e})}return t.withTypes=function(){return t},t})();function w7(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function I7(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var lw="listenerMiddleware";ia(lw+"/add");ia(lw+"/removeAll");ia(lw+"/remove");var aS;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);qq();const E7=m7({reducer:{}});var Hx={exports:{}},Qx={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ka=M;function T7(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var S7=typeof Object.is=="function"?Object.is:T7,P7=ka.useState,A7=ka.useEffect,b7=ka.useLayoutEffect,R7=ka.useDebugValue;function C7(t,e){var n=e(),r=P7({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return b7(function(){i.value=n,i.getSnapshot=e,lg(i)&&s({inst:i})},[t,n,e]),A7(function(){return lg(i)&&s({inst:i}),t(function(){lg(i)&&s({inst:i})})},[t]),R7(n),n}function lg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!S7(t,n)}catch{return!0}}function k7(t,e){return e()}var x7=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?k7:C7;Qx.useSyncExternalStore=ka.useSyncExternalStore!==void 0?ka.useSyncExternalStore:x7;Hx.exports=Qx;var N7=Hx.exports,O7={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mp=M,D7=N7;function V7(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var M7=typeof Object.is=="function"?Object.is:V7,L7=D7.useSyncExternalStore,F7=Mp.useRef,j7=Mp.useEffect,U7=Mp.useMemo,$7=Mp.useDebugValue;O7.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=F7(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=U7(function(){function l(g){if(!c){if(c=!0,d=g,g=r(g),i!==void 0&&o.hasValue){var w=o.value;if(i(w,g))return h=w}return h=g}if(w=h,M7(d,g))return w;var v=r(g);return i!==void 0&&i(w,v)?w:(d=g,h=v)}var c=!1,d,h,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,i]);var a=L7(t,s[0],s[1]);return j7(function(){o.hasValue=!0,o.value=a},[a]),$7(a),a};function B7(t){t()}let Yx=B7;const z7=t=>Yx=t,q7=()=>Yx,lS=Symbol.for("react-redux-context"),uS=typeof globalThis<"u"?globalThis:{};function W7(){var t;if(!M.createContext)return{};const e=(t=uS[lS])!=null?t:uS[lS]=new Map;let n=e.get(M.createContext);return n||(n=M.createContext(null),e.set(M.createContext,n)),n}const G7=W7();function K7(){const t=q7();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:e=s,function(){!i||e===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}const cS={notify(){},get:()=>[]};function H7(t,e){let n,r=cS,i=0,s=!1;function o(v){d();const A=r.subscribe(v);let I=!1;return()=>{I||(I=!0,A(),h())}}function a(){r.notify()}function l(){w.onStateChange&&w.onStateChange()}function c(){return s}function d(){i++,n||(n=e?e.addNestedSub(l):t.subscribe(l),r=K7())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=cS)}function p(){s||(s=!0,d())}function g(){s&&(s=!1,h())}const w={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:p,tryUnsubscribe:g,getListeners:()=>r};return w}const Q7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Y7=Q7?M.useLayoutEffect:M.useEffect;function J7({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",noopCheck:s="once"}){const o=M.useMemo(()=>{const c=H7(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:s}},[t,r,i,s]),a=M.useMemo(()=>t.getState(),[t]);Y7(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||G7;return M.createElement(l.Provider,{value:o},n)}z7(SA.unstable_batchedUpdates);var Zy={},dS=SA;Zy.createRoot=dS.createRoot,Zy.hydrateRoot=dS.hydrateRoot;Zy.createRoot(document.querySelector("#root")).render(O.jsx(YD,{children:O.jsx(J7,{store:E7,children:O.jsx(Lq,{theme:Fq,children:O.jsx(Eq,{})})})}));
